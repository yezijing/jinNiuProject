webpackJsonp([6],{"1xPn":function(t,e){},"40Br":function(t,e){},IxMb:function(t,e){},ccTg:function(t,e){},jaH2:function(t,e,a){"use strict";var s=a("7+uW");e.a=new s.default},ppQ6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("/5Zb"),l=a("mvHQ"),i=a.n(l),n={name:"fillIn",props:["choosename","yearmonth","indexType","fillDatas","isEdit","stepHeight","creHeight","listAddNum"],components:{},data:function(){return{loginid:JSON.parse(this.$store.getters.userdata).id,active:1,amountShow:!1,isCrease:!1,label:"",writeShow:!0,previewShow:!1,preDatas:[],tname:"",isDel:0,isnumShow:!1,isjinShow:!1}},mounted:function(){},created:function(){1==this.indexType?(this.isCrease=!0,this.amountShow=!1,this.label="目标（%）"):(this.amountShow=!0,this.isCrease=!1,this.label="目标")},methods:{ruleone:function(t,e){if(1==this.indexType){var a=this.fillDatas[e].amplify,s=this.fillDatas[e].cytarget,l=parseFloat(a)-parseFloat(s);l=l.toFixed(2),this.fillDatas[e].overtarget=l,t.overtarget>=0?this.fillDatas[e].isfinish=0:this.fillDatas[e].isfinish=1}else{var i=parseFloat(t.amount)/parseFloat(t.cytarget),n=100*(i=i.toFixed(4));n=n.toFixed(2),this.fillDatas[e].fschedule=100*n;var o=100*this.fillDatas[e].fschedule;this.fillDatas[e].isfinish=o>=100?0:1}},ruletwo:function(t,e){if(0==this.indexType){var a=parseFloat(t.amount)/parseFloat(t.cytarget),s=100*(a=a.toFixed(4));s=s.toFixed(2),this.fillDatas[e].fschedule=s;var l=100*this.fillDatas[e].fschedule;this.fillDatas[e].isfinish=l>=100?0:1}else this.fillDatas[e].fschedule=0},rulethree:function(t,e){var a=this.fillDatas[e].amplify,s=this.fillDatas[e].cytarget,l=parseFloat(a)-parseFloat(s);l=l.toFixed(2),this.fillDatas[e].overtarget=l,this.fillDatas[e].overtarget>=0?this.fillDatas[e].isfinish=0:this.fillDatas[e].isfinish=1},goBack:function(){this.$emit("my-event")},creatTable:function(){var t=this;if(this.previewShow=!0,this.writeShow=!1,1==this.indexType?(this.isnumShow=!0,this.isjinShow=!1):(this.isnumShow=!1,this.isjinShow=!0),1==this.isEdit){var e={targetOtherEconomicList:this.fillDatas,reportUser:this.loginid};e.addnum=this.fillDatas[0].addnum,e=i()(e),Object(s.t)(e,function(e){t.preDatas=e.data.obj,t.tname=t.choosename+"（"+t.yearmonth+"）",t.active=2,t.isDel=1})}else{var a={targetOtherEconomicList:this.fillDatas,reportUser:this.loginid};a=i()(a),Object(s.a)(a,function(e){t.preDatas=e.data.obj,t.tname=t.choosename+"（"+t.yearmonth+"）",t.active=2,t.isDel=1})}},preStep:function(){var t=this;Object(s.d)("",function(e){t.previewShow=!1,t.writeShow=!0,t.active=1,t.isDel=0})},goback:function(){var t=this;1==this.isDel?Object(s.d)("",function(e){t.$emit("my-event"),t.previewShow=!1,t.writeShow=!0}):(this.$emit("my-event"),this.previewShow=!1,this.writeShow=!0)},submitReport:function(){var t=this;this.previewShow=!1,this.writeShow=!0;var e={targetOtherEconomicList:this.preDatas,userId:this.loginid,addnum:this.listAddNum};Object(s.h)(e,function(e){t.$emit("my-event"),t.$emit("load-event"),t.$message({message:"提交成功",type:"success"})})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillstep"},[a("el-button",{staticClass:"btn backbtn",attrs:{type:"primary",size:"small"},on:{click:t.goback}},[t._v("返回")]),t._v(" "),a("el-steps",{attrs:{active:t.active,"align-center":""}},[a("el-step",{attrs:{title:"信息填报"}}),t._v(" "),a("el-step",{attrs:{title:"生成报表"}})],1),t._v(" "),t.writeShow?a("div",{staticClass:"write-report"},[a("div",{staticClass:"names"},[a("p",[t._v(t._s(t.choosename))]),t._v(" "),a("p",{staticClass:"date"},[t._v("（"+t._s(t.yearmonth)+"）")])]),t._v(" "),a("el-row",[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:t.fillDatas,"highlight-current-row":"",height:t.stepHeight}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"districtName",label:"区（市）县"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cytarget",label:t.label},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small"},nativeOn:{change:function(a){t.ruleone(e.row,e.$index)}},model:{value:e.row.cytarget,callback:function(a){t.$set(e.row,"cytarget",a)},expression:"scope.row.cytarget"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"绝对量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small"},nativeOn:{change:function(a){t.ruletwo(e.row,e.$index)}},model:{value:e.row.amount,callback:function(a){t.$set(e.row,"amount",a)},expression:"scope.row.amount"}})]}}])}),t._v(" "),t.isCrease?a("el-table-column",{attrs:{prop:"amplify",label:"增幅(%)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small"},nativeOn:{change:function(a){t.rulethree(e.row,e.$index)}},model:{value:e.row.amplify,callback:function(a){t.$set(e.row,"amplify",a)},expression:"scope.row.amplify"}})]}}])}):t._e(),t._v(" "),t.amountShow?a("el-table-column",{attrs:{prop:"fschedule",label:"完成进度（%）"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.fschedule)+"%")])]}}])}):t._e(),t._v(" "),t.isCrease?a("el-table-column",{attrs:{prop:"overtarget",label:"超目标百分点(%)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.overtarget)+"%")])]}}])}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"bottombtn"},[a("el-button",{staticClass:"btn",attrs:{type:"warning",size:"small"},on:{click:t.goBack}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:function(e){t.creatTable()}}},[t._v("生成报表")])],1)],1):t._e(),t._v(" "),t.previewShow?a("div",{staticClass:"report-preview"},[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:t.preDatas,"highlight-current-row":"",height:t.creHeight}},[a("el-table-column",{attrs:{label:t.tname}},[a("el-table-column",{attrs:{prop:"districtName",label:"区（市）县"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cytarget",label:"目标"}}),t._v(" "),a("el-table-column",{attrs:{label:"目标完成额"}},[a("el-table-column",{attrs:{label:"绝对量",prop:"amount"}}),t._v(" "),a("el-table-column",{attrs:{label:"五城区排名",prop:"amountfiverank"}}),t._v(" "),a("el-table-column",{attrs:{label:"中心城区排名",prop:"amountcentralrank"}}),t._v(" "),a("el-table-column",{attrs:{label:"全市排名",prop:"amountcityrank"}}),t._v(" "),t.isnumShow?a("el-table-column",{attrs:{label:"增幅",prop:"amplify"}}):t._e(),t._v(" "),t.isnumShow?a("el-table-column",{attrs:{label:"五城区排名",prop:"amplifyfiverank"}}):t._e(),t._v(" "),t.isnumShow?a("el-table-column",{attrs:{label:"中心城区排名",prop:"amplifycentralrank"}}):t._e(),t._v(" "),t.isnumShow?a("el-table-column",{attrs:{label:"全市排名",prop:"amplifycityrank"}}):t._e()],1),t._v(" "),a("el-table-column",{attrs:{label:"目标完成率"}},[t.isjinShow?a("el-table-column",{attrs:{label:"完成进度",prop:"fschedule"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.fschedule>=0?a("p",[t._v(t._s(e.row.fschedule)+"%")]):a("p",{staticStyle:{color:"#f00"}},[t._v(t._s(e.row.fschedule)+"%")])]}}])}):t._e(),t._v(" "),t.isjinShow?a("el-table-column",{attrs:{label:"五城区排名",prop:"fschedulefiverank"}}):t._e(),t._v(" "),t.isjinShow?a("el-table-column",{attrs:{label:"中心城区排名",prop:"fschedulecentralrank"}}):t._e(),t._v(" "),t.isjinShow?a("el-table-column",{attrs:{label:"全市排名",prop:"fschedulecityrank"}}):t._e(),t._v(" "),t.isnumShow?a("el-table-column",{attrs:{label:"超目标百分点",prop:"overtarget"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.overtarget>=0?a("p",[t._v(t._s(e.row.overtarget)+"%")]):a("p",{staticStyle:{color:"#f00"}},[t._v(t._s(e.row.overtarget)+"%")])]}}])}):t._e(),t._v(" "),t.isnumShow?a("el-table-column",{attrs:{label:"五城区排名",prop:"overtargetfiverank"}}):t._e(),t._v(" "),t.isnumShow?a("el-table-column",{attrs:{label:"中心城区排名",prop:"overtargetcentralrank"}}):t._e(),t._v(" "),t.isnumShow?a("el-table-column",{attrs:{label:"全市排名",prop:"overtargetcityrank"}}):t._e()],1)],1)],1),t._v(" "),a("div",{staticClass:"bottombtn"},[a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:t.preStep}},[t._v("上一步")]),t._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitReport()}}},[t._v("提交")])],1)],1):t._e()],1)},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(t){a("IxMb")},null,null).exports,c=(a("jaH2"),a("y7k7")),u={name:"fillIn",props:["leaderList","indexNames"],components:{fillStep:r},data:function(){return{loginid:JSON.parse(this.$store.getters.userdata).id,filters:{},currentPage:1,pageSize:20,totals:0,tableDatas:[],indexName:"",targetCheckList:JSON.parse(this.$store.getters.userdata).targetCheckList,isAddShow:!1,isEditShow:!1,isDownShow:!1,stepForm:{},stepFormVisible:!1,viewReport:!1,isShow:!0,stepShow:!1,yearmonth:"",choosename:"",indexType:1,fillDatas:[],eid:"",startmonth:"",endmonth:"",viewDadas:[],isEdit:0,viewTitle:"",months:[{value:1,name:"1月"},{value:2,name:"2月"},{value:3,name:"3月"},{value:4,name:"4月"},{value:5,name:"5月"},{value:6,name:"6月"},{value:7,name:"7月"},{value:8,name:"8月"},{value:9,name:"9月"},{value:10,name:"10月"},{value:11,name:"11月"},{value:12,name:"12月"}],tableHeight:"500px",stepHeight:"300px",creHeight:"300px",lookHeight:"350px",isJuedui:!1,isZeng:!1,listAddNum:-1,economicid:0,addnum:0,defaturl:""}},mounted:function(){},created:function(){this.defaturl=c.a,this.browerHeight(),this.limitChange(),this.getAllDatas()},methods:{downReportData:function(){this.isZeng?window.open(this.defaturl+"/report/targetOtherAmplifyReport?economicid="+this.economicid+"&addnum="+this.addnum):window.open(this.defaturl+"/report/targetOtherAmountReport?economicid="+this.economicid+"&addnum="+this.addnum)},tableRowClassName:function(t){var e=t.row;t.rowIndex;if(1==e.audit)return"noedit"},filterTag:function(t,e){return e.statsus===t},swstateFormat:function(t,e){switch(e){case 2:return"审核未通过";case 1:return"审核通过";case 0:return"未审核"}},browerHeight:function(){var t=document.body.clientHeight,e=t-380,a=t-350,s=t-280;this.tableHeight=e+"px",this.stepHeight=e+"px",this.creHeight=a+"px",this.lookHeight=s+"px"},fscheduleFormat:function(t,e){return e<0?"<span style='color:#f00;'>"+e+"%</span>":"<span>"+e+"%</span>"},amountFormat:function(t,e){return e<0?"<span style='color:#f00;'>"+e+"</span>":"<span>"+e+"</span>"},amplifyFormat:function(t,e){return null==e?"<span>/</span>":e<0?"<span style='color:#f00;'>"+e+"</span>":"<span>"+e+"</span>"},overtargetFormat:function(t,e){return null==e?"<span>/</span>":e<0?"<span style='color:#f00;'>"+e+"%</span>":"<span>"+e+"%</span>"},timestampToTime:function(t,e){var a=new Date(t.reportDate);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},getAllDatas:function(){var t=this,e={pageSize:this.pageSize,pageNum:this.currentPage,userId:this.loginid};Object(s.o)(e,function(e){t.tableDatas=e.data.obj.datas;for(var a=0;a<t.tableDatas.length;a++)t.tableDatas[a].month=t.tableDatas[a].startmonth+"月 - "+t.tableDatas[a].endmonth+"月",null==t.tableDatas[a].deptnames?t.tableDatas[a].deptnames="":t.tableDatas[a].deptnames=t.tableDatas[a].deptnames.join("，");t.totals=e.data.obj.total})},handleSizeChange:function(t){this.pageSize=t,this.getAllDatas()},handleCurrentChange:function(t){this.currentPage=t,this.getAllDatas()},statusFormat:function(t,e){switch(e){case"1":return"增幅";case"0":return"绝对量"}},limitChange:function(){if(null!==this.targetCheckList)for(var t=0;t<this.targetCheckList.length;t++){switch(this.targetCheckList[t]){case"D-add":this.isAddShow=!0;break;case"D-edit":this.isEditShow=!0;break;case"D-down":this.isDownShow=!0}}},formatter:function(t,e,a,s){return s+1+(this.currentPage-1)*this.pageSize},selectChange:function(){this.$forceUpdate()},handleBack:function(){this.isShow=!0,this.stepShow=!1},getDatas:function(){var t=this,e=this.filters;e.pageSize=this.pageSize,e.currentPage=this.currentPage,e.userId=this.loginid,Object(s.o)(e,function(e){t.tableDatas=e.data.obj.datas,t.totals=e.data.obj.total})},resetForm:function(t){this.$refs[t].resetFields(),this.getAllDatas()},handleAdd:function(){this.stepForm.startDate=1,this.stepFormVisible=!0},selectName:function(){for(var t=this.stepForm.indexid,e=0;e<this.indexNames.length;e++)if(this.indexNames[e].id==t){this.choosename=this.indexNames[e].name,this.indexType=this.indexNames[e].type;break}},nextStep:function(){var t=this;this.$refs.stepForm.validate(function(e){if(e){var a={economicid:t.stepForm.indexid};t.eid=t.stepForm.indexid,t.startmonth=t.stepForm.startDate,t.endmonth=t.stepForm.endDate,console.log(a),Object(s.j)(a,function(e){t.fillDatas=e.data.obj;for(var a=0;a<e.data.obj.length;a++)t.fillDatas[a].amount="",t.fillDatas[a].amplify="",t.fillDatas[a].cytarget="",t.fillDatas[a].overtarget="",t.fillDatas[a].fschedule="",t.fillDatas[a].startmonth=t.startmonth,t.fillDatas[a].endmonth=t.endmonth,t.fillDatas[a].districtid=t.fillDatas[a].id,t.fillDatas[a].districttype=t.fillDatas[a].typeName,t.fillDatas[a].districtName=t.fillDatas[a].name,t.fillDatas[a].economicid=t.stepForm.indexid;t.selectName(),t.yearmonth=t.stepForm.startDate+"月 - "+t.stepForm.endDate+"月",t.stepShow=!0,t.stepFormVisible=!1,t.isShow=!1,t.stepForm={},t.isEdit=0})}})},handleDetail:function(t,e){var a=this;"1"==e.economicType?(this.isZeng=!0,this.isJuedui=!1):(this.isJuedui=!0,this.isZeng=!1),this.economicid=e.economicId,this.addnum=e.addnum,this.viewTitle=e.economicName+"（"+e.month+"）";var l={economicid:e.economicId,addnum:e.addnum};Object(s.c)(l,function(t){console.log(t.data),a.viewReport=!0,a.isShow=!1,a.viewDadas=t.data.obj})},goBack:function(){this.viewReport=!1,this.isShow=!0,this.typeChoose=""},handleEdit:function(t,e){var a=this;this.listAddNum=e.addnum,this.choosename=e.economicName;var l={economicid:e.economicId,addnum:e.addnum};this.indexType=e.economicType,Object(s.f)(l,function(t){console.log(t.data);var e=t.data.obj;a.fillDatas=t.data.obj;for(var s=0;s<a.fillDatas.length;s++)a.fillDatas[s].typeName=a.fillDatas[s].districttype;console.log(a.fillDatas),a.yearmonth=e[0].startmonth+"月 - "+e[0].endmonth+"月",a.stepShow=!0,a.isShow=!1,a.isEdit=1})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"target keyrank"},[t.isShow?a("div",{staticClass:"mainfill"},[a("el-row",[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{ref:"filters",attrs:{size:"small",inline:!0,model:t.filters}},[a("el-form-item",{staticClass:"mc",attrs:{label:"指标名称：",prop:"economicId"}},[a("el-select",{attrs:{placeholder:"全部",filterable:"",clearable:""},on:{change:t.selectChange},model:{value:t.filters.economicId,callback:function(e){t.$set(t.filters,"economicId",e)},expression:"filters.economicId"}},t._l(t.indexNames,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"填报时间：",prop:"startDate"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},on:{change:t.selectChange},model:{value:t.filters.startDate,callback:function(e){t.$set(t.filters,"startDate",e)},expression:"filters.startDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"--",prop:"endDate"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},on:{change:t.selectChange},model:{value:t.filters.endDate,callback:function(e){t.$set(t.filters,"endDate",e)},expression:"filters.endDate"}})],1),t._v(" "),a("el-form-item",{staticClass:"ld",attrs:{label:"牵头区领导",prop:"leadName"}},[a("el-select",{attrs:{placeholder:"全部",filterable:"",clearable:""},on:{change:t.selectChange},model:{value:t.filters.leadName,callback:function(e){t.$set(t.filters,"leadName",e)},expression:"filters.leadName"}},t._l(t.leaderList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div",{staticClass:"toolbtns"},[a("div",[t.isAddShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新 增")]):t._e()],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getDatas("filters")}}},[t._v("搜 索")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm("filters")}}},[t._v("重 置")])],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableDatas,"highlight-current-row":"",height:t.tableHeight,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",width:"60",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"reportDate",label:"填报时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("dateformat")(e.row.reportDate,"YYYY-MM-DD HH:mm:ss")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"economicName",label:"指标名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"month",label:"填报月份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"leadName",label:"牵头区领导"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptnames",label:"牵头单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"economicType",label:"指标类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(t.statusFormat(e,e.row.economicType))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"audit",label:"状态",filters:[{text:"审核未通过",value:2},{text:"审核通过",value:1},{text:"未审核",value:0},{text:"未上报",value:-1}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.audit?a("el-tag",{attrs:{type:"danger","disable-transitions":""}},[a("span",{domProps:{innerHTML:t._s(t.swstateFormat(e,e.row.audit))}})]):1==e.row.audit?a("el-tag",{attrs:{type:"success","disable-transitions":""}},[a("span",{domProps:{innerHTML:t._s(t.swstateFormat(e,e.row.audit))}})]):a("el-tag",{attrs:{type:"info","disable-transitions":""}},[a("span",{domProps:{innerHTML:t._s(t.swstateFormat(e,e.row.audit))}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditShow?a("el-button",{staticClass:"btn nobtn",on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){t.handleDetail(e.$index,e.row)}}},[t._v("查看报表")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,40],"page-size":t.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:t.totals},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{staticClass:"fillbox",attrs:{title:"新增区县重点经济指标填报",visible:t.stepFormVisible,width:"500px"},on:{"update:visible":function(e){t.stepFormVisible=e}}},[a("el-form",{ref:"stepForm",attrs:{model:t.stepForm,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"指标名称：",prop:"indexid",size:"small",rules:[{required:!0,message:"请先选择指标名称",trigger:"change"}]}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:function(e){t.selectChange()}},model:{value:t.stepForm.indexid,callback:function(e){t.$set(t.stepForm,"indexid",e)},expression:"stepForm.indexid"}},t._l(t.indexNames,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div",{staticClass:"ylist"},[a("el-form-item",{staticClass:"ybox",attrs:{label:"填报月份：",prop:"startDate"}},[a("el-select",{attrs:{placeholder:"开始月份",filterable:"",clearable:""},on:{change:function(e){t.selectChange()}},model:{value:t.stepForm.startDate,callback:function(e){t.$set(t.stepForm,"startDate",e)},expression:"stepForm.startDate"}},t._l(t.months,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))],1),t._v(" "),a("el-form-item",{staticClass:"endbox",attrs:{label:"--",prop:"endDate"}},[a("el-select",{attrs:{placeholder:"结束月份",filterable:"",clearable:""},on:{change:function(e){t.selectChange()}},model:{value:t.stepForm.endDate,callback:function(e){t.$set(t.stepForm,"endDate",e)},expression:"stepForm.endDate"}},t._l(t.months,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.nextStep("stepForm")}}},[t._v("下一步")])],1)],1)],1):t._e(),t._v(" "),t.stepShow?a("div",{staticClass:"nextstep"},[a("fill-step",{attrs:{fillDatas:t.fillDatas,indexType:t.indexType,yearmonth:t.yearmonth,choosename:t.choosename,isEdit:t.isEdit,stepHeight:t.stepHeight,creHeight:t.creHeight,listAddNum:t.listAddNum},on:{"my-event":t.handleBack,"load-event":t.getAllDatas}})],1):t._e(),t._v(" "),t.viewReport?a("div",{staticClass:"viewreport"},[a("div",{staticClass:"bottombtn"},[a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:t.goBack}},[t._v("返回")]),t._v(" "),t.isDownShow?a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:t.downReportData}},[t._v("报表下载")]):t._e()],1),t._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",height:t.lookHeight,data:t.viewDadas,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:t.viewTitle}},[a("el-table-column",{attrs:{prop:"districtName",label:"区（市）县"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cytarget",label:"目标"}}),t._v(" "),a("el-table-column",{attrs:{label:"目标完成额"}},[t.isJuedui?a("el-table-column",{attrs:{label:"绝对量",prop:"amount"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.amountFormat(e,e.row.amount))}})]}}])}):t._e(),t._v(" "),t.isJuedui?a("el-table-column",{attrs:{label:"五城区排名",prop:"amountfiverank"}}):t._e(),t._v(" "),t.isJuedui?a("el-table-column",{attrs:{label:"中心城区排名",prop:"amountcentralrank"}}):t._e(),t._v(" "),t.isJuedui?a("el-table-column",{attrs:{label:"全市排名",prop:"amountcityrank"}}):t._e(),t._v(" "),t.isZeng?a("el-table-column",{attrs:{label:"增幅",prop:"amplify"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.amplifyFormat(e,e.row.amplify))}})]}}])}):t._e(),t._v(" "),t.isZeng?a("el-table-column",{attrs:{label:"五城区排名",prop:"amplifyfiverank"}}):t._e(),t._v(" "),t.isZeng?a("el-table-column",{attrs:{label:"中心城区排名",prop:"amplifycentralrank"}}):t._e(),t._v(" "),t.isZeng?a("el-table-column",{attrs:{label:"全市排名",prop:"amplifycityrank"}}):t._e()],1),t._v(" "),a("el-table-column",{attrs:{label:"目标完成率"}},[t.isJuedui?a("el-table-column",{attrs:{label:"完成进度",prop:"fschedule"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.fscheduleFormat(e,e.row.fschedule))}})]}}])}):t._e(),t._v(" "),t.isJuedui?a("el-table-column",{attrs:{label:"五城区排名",prop:"fschedulefiverank"}}):t._e(),t._v(" "),t.isJuedui?a("el-table-column",{attrs:{label:"中心城区排名",prop:"fschedulecentralrank"}}):t._e(),t._v(" "),t.isJuedui?a("el-table-column",{attrs:{label:"全市排名",prop:"fschedulecityrank"}}):t._e(),t._v(" "),t.isZeng?a("el-table-column",{attrs:{label:"超目标百分点",prop:"overtarget"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.overtargetFormat(e,e.row.overtarget))}})]}}])}):t._e(),t._v(" "),t.isZeng?a("el-table-column",{attrs:{label:"五城区排名",prop:"overtargetfiverank"}}):t._e(),t._v(" "),t.isZeng?a("el-table-column",{attrs:{label:"中心城区排名",prop:"overtargetcentralrank"}}):t._e(),t._v(" "),t.isZeng?a("el-table-column",{attrs:{label:"全市排名",prop:"overtargetcityrank"}}):t._e()],1)],1)],1)],1):t._e()])},staticRenderFns:[]};var d=a("VU/8")(u,p,!1,function(t){a("1xPn")},null,null).exports,m={name:"fillIn",props:["choosename","yearmonth","indexType","fillDatas","eid","isEdit","stepHeight","creHeight","listAddNum","iseditshow","isaddshow"],components:{},data:function(){return{loginid:JSON.parse(this.$store.getters.userdata).id,active:1,amountShow:!1,isCrease:!1,label:"",writeShow:!0,previewShow:!1,preDatas:[],monthname:"",titlename:"",spanArr:[],spanPos:0,isDel:0,isJuedui:!1,isZengfu:!1}},mounted:function(){},created:function(){1==this.indexType?(this.isCrease=!0,this.amountShow=!1,this.label="目标（%）"):(this.amountShow=!0,this.isCrease=!1,this.label="目标")},methods:{isOverPlan:function(t,e){switch(e){case 0:return"<span>是</span>";case 1:return"<span style='color:#f00;'>否</span>"}},ruleone:function(t,e){if(1==this.indexType){var a=this.fillDatas[e].amplify,s=this.fillDatas[e].cytarget,l=parseFloat(a)-parseFloat(s);l=l.toFixed(2),this.fillDatas[e].overtarget=l,t.overtarget>=0?this.fillDatas[e].isfinish=0:this.fillDatas[e].isfinish=1}else{var i=parseFloat(t.amount)/parseFloat(t.cytarget),n=100*(i=i.toFixed(3));n=n.toFixed(2),this.fillDatas[e].fschedule=n;var o=100*this.fillDatas[e].fschedule;this.fillDatas[e].isfinish=o>=100?0:1}},ruletwo:function(t,e){if(0==this.indexType){var a=parseFloat(t.amount)/parseFloat(t.cytarget),s=100*(a=a.toFixed(3));s=s.toFixed(2),this.fillDatas[e].fschedule=s;var l=100*this.fillDatas[e].fschedule;this.fillDatas[e].isfinish=l>=100?0:1}else this.fillDatas[e].fschedule=0},rulethree:function(t,e){var a=this.fillDatas[e].amplify,s=this.fillDatas[e].cytarget,l=parseFloat(a)-parseFloat(s);l=l.toFixed(2),this.fillDatas[e].overtarget=l,this.fillDatas[e].overtarget>=0?this.fillDatas[e].isfinish=0:this.fillDatas[e].isfinish=1},goBack:function(){this.$emit("my-event")},creatTable:function(){var t=this;if(1==this.indexType?(this.isJuedui=!0,this.isZengfu=!0):(this.isJuedui=!0,this.isZengfu=!1),this.previewShow=!0,this.writeShow=!1,1==this.isEdit){var e={targetStreetReportList:this.fillDatas,reportUser:this.loginid};e.addnum=this.fillDatas[0].addnum,e=i()(e),Object(s.u)(e,function(e){t.preDatas=e.data.obj,t.merage(),t.active=2,t.monthname=t.yearmonth+"任务计划",t.titlename=t.yearmonth+"完成情况",t.isDel=1})}else{var a={targetStreetReportList:this.fillDatas,reportUser:this.loginid};a=i()(a),Object(s.b)(a,function(e){t.preDatas=e.data.obj,t.merage(),t.active=2,t.monthname=t.yearmonth+"任务计划",t.titlename=t.yearmonth+"完成情况",t.isDel=1})}},preStep:function(){var t=this;Object(s.e)("",function(e){t.active=1,t.previewShow=!1,t.writeShow=!0,t.isDel=0})},goback:function(){var t=this;1==this.isDel?Object(s.e)("",function(e){t.$emit("my-event"),t.previewShow=!1,t.writeShow=!0}):(this.$emit("my-event"),this.previewShow=!1,this.writeShow=!0)},submitReport:function(){var t=this;this.previewShow=!1,this.writeShow=!0;var e={targetStreetReportList:this.preDatas,addnum:this.listAddNum,userId:this.loginid};Object(s.i)(e,function(e){t.$emit("my-event"),t.$emit("load-event"),t.$message({message:"提交成功",type:"success"})})},merageInit:function(){this.spanArr=[],this.spanPos=0},merage:function(){this.merageInit();for(var t=0;t<this.preDatas.length;t+=1)0===t?(this.spanArr.push(1),this.spanPos=0):this.preDatas[t].deptcategory===this.preDatas[t-1].deptcategory?(this.spanArr[this.spanPos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.spanPos=t)},typeSpanMethod:function(t){t.row,t.column;var e=t.rowIndex;if(0===t.columnIndex){var a=this.spanArr[e];return{rowspan:a,colspan:a>0?1:0}}}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillstep"},[a("el-button",{staticClass:"btn backbtn",attrs:{type:"primary",size:"small"},on:{click:t.goback}},[t._v("返回")]),t._v(" "),a("el-steps",{attrs:{active:t.active,"align-center":""}},[a("el-step",{attrs:{title:"信息填报"}}),t._v(" "),a("el-step",{attrs:{title:"生成报表"}})],1),t._v(" "),t.writeShow?a("div",{staticClass:"write-report"},[a("div",{staticClass:"names"},[a("p",[t._v(t._s(t.choosename))]),t._v(" "),a("p",{staticClass:"date"},[t._v("（填报月份："+t._s(t.yearmonth)+"）")])]),t._v(" "),a("el-row",[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",height:t.stepHeight,data:t.fillDatas,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptcategory",label:"类别"}}),t._v(" "),t.iseditshow?a("el-table-column",{attrs:{prop:"deptName",label:"单位"}}):t._e(),t._v(" "),t.isaddshow?a("el-table-column",{attrs:{prop:"name",label:"单位"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"cytarget",label:t.label},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(a){t.ruleone(e.row,e.$index)}},model:{value:e.row.cytarget,callback:function(a){t.$set(e.row,"cytarget",a)},expression:"scope.row.cytarget"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"完成总量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(a){t.ruletwo(e.row,e.$index)}},model:{value:e.row.amount,callback:function(a){t.$set(e.row,"amount",a)},expression:"scope.row.amount"}})]}}])}),t._v(" "),t.isCrease?a("el-table-column",{attrs:{prop:"amplify",label:"增幅(%)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(a){t.rulethree(e.row,e.$index)}},model:{value:e.row.amplify,callback:function(a){t.$set(e.row,"amplify",a)},expression:"scope.row.amplify"}})]}}])}):t._e(),t._v(" "),t.amountShow?a("el-table-column",{attrs:{prop:"fschedule",label:"完成进度（%）"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.fschedule)+"%")])]}}])}):t._e(),t._v(" "),t.isCrease?a("el-table-column",{attrs:{prop:"overtarget",label:"超目标百分点（%）"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.overtarget)+"%")])]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"isfinish",label:"是否完成任务计划"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.isOverPlan(e,e.row.isfinish))}})]}}])})],1)],1),t._v(" "),a("div",{staticClass:"bottombtn"},[a("el-button",{staticClass:"btn",attrs:{size:"small",type:"warning"},on:{click:t.goBack}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"btn",attrs:{size:"small",type:"primary"},on:{click:function(e){t.creatTable()}}},[t._v("生成报表")])],1)],1):t._e(),t._v(" "),t.previewShow?a("div",{staticClass:"report-preview"},[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:t.preDatas,height:t.creHeight,"highlight-current-row":"","span-method":t.typeSpanMethod}},[a("el-table-column",{attrs:{label:t.choosename}},[a("el-table-column",{attrs:{prop:"deptcategory",label:"类别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fscrank",label:"进度排名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amountrank",label:"总量排名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cytarget",label:t.monthname}}),t._v(" "),a("el-table-column",{attrs:{label:t.titlename}},[a("el-table-column",{attrs:{label:"完成总量",prop:"amount"}}),t._v(" "),t.isJuedui?a("el-table-column",{attrs:{label:"完成进度",prop:"fschedule"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.fschedule>=0?a("p",[t._v(t._s(e.row.fschedule)+"%")]):a("p",{staticStyle:{color:"#f00"}},[t._v(t._s(e.row.fschedule)+"%")])]}}])}):t._e(),t._v(" "),t.isZengfu?a("el-table-column",{attrs:{label:"增幅（%）",prop:"amplify"}}):t._e(),t._v(" "),t.isZengfu?a("el-table-column",{attrs:{label:"超目标百分点（%）",prop:"overtarget"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.overtarget>=0?a("p",[t._v(t._s(e.row.overtarget)+"%")]):a("p",{staticStyle:{color:"#f00"}},[t._v(t._s(e.row.overtarget)+"%")])]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"是否完成任务计划",prop:"isfinish"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isfinish?a("p",[t._v("是")]):1==e.row.isfinish?a("p",{staticStyle:{color:"#f00"}},[t._v("否")]):t._e()]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"bottombtn"},[a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:t.preStep}},[t._v("上一步")]),t._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitReport()}}},[t._v("提交")])],1)],1):t._e()],1)},staticRenderFns:[]};var f={name:"fillIn",props:["leaderList","chengNames"],components:{otherStep:a("VU/8")(m,h,!1,function(t){a("40Br")},null,null).exports},data:function(){return{loginid:JSON.parse(this.$store.getters.userdata).id,filters:{},currentPage:1,pageSize:20,totals:0,tableDatas:[],indexName:"",targetCheckList:JSON.parse(this.$store.getters.userdata).targetCheckList,isAddShow:!1,isEditShow:!1,isDownShow:!1,viewReport:!1,stepForm:{},stepFormVisible:!1,isShow:!0,stepShow:!1,yearmonth:"",choosename:"",indexType:0,fillDatas:[],eid:"",startmonth:"",endmonth:"",viewDatas:[],spanArr:[],spanPos:0,isEdit:0,titlename:"",monthname:"",months:[{value:1,name:"1月"},{value:2,name:"2月"},{value:3,name:"3月"},{value:4,name:"4月"},{value:5,name:"5月"},{value:6,name:"6月"},{value:7,name:"7月"},{value:8,name:"8月"},{value:9,name:"9月"},{value:10,name:"10月"},{value:11,name:"11月"},{value:12,name:"12月"}],tableHeight:"500px",stepHeight:"300px",creHeight:"300px",lookHeight:"350px",listAddNum:-1,iseditshow:!1,isaddshow:!1,economicid:0,addnum:0,defaturl:"",isJuedui:!1,isZeng:!1}},mounted:function(){},created:function(){this.defaturl=c.a,this.browerHeight(),this.limitChange(),this.getAllDatas()},methods:{downReportData:function(){this.isZeng?window.open(this.defaturl+"/report/targetStreetAmplifyReport?economicid="+this.economicid+"&addnum="+this.addnum):window.open(this.defaturl+"/report/targetStreetAmountReport?economicid="+this.economicid+"&addnum="+this.addnum)},tableRowClassName:function(t){var e=t.row;t.rowIndex;if(1==e.audit)return"noedit"},filterTag:function(t,e){return e.statsus===t},swstateFormat:function(t,e){switch(e){case 2:return"审核未通过";case 1:return"审核通过";case 0:return"未审核"}},browerHeight:function(){var t=document.body.clientHeight,e=t-380,a=t-350;this.tableHeight=e+"px",this.stepHeight=e+"px",this.creHeight=a+"px",this.lookHeight=a+"px"},timestampToTime:function(t,e){var a=new Date(t.reportDate);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},getAllDatas:function(){var t=this,e={pageSize:this.pageSize,pageNum:this.currentPage,userId:this.loginid};Object(s.p)(e,function(e){t.tableDatas=e.data.obj.datas;for(var a=0;a<t.tableDatas.length;a++)t.tableDatas[a].month=t.tableDatas[a].startmonth+"月 - "+t.tableDatas[a].endmonth+"月",null==t.tableDatas[a].deptnames?t.tableDatas[a].deptnames="":t.tableDatas[a].deptnames=t.tableDatas[a].deptnames.join("，");t.totals=e.data.obj.total})},handleSizeChange:function(t){this.pageSize=t,this.getAllDatas()},handleCurrentChange:function(t){this.currentPage=t,this.getAllDatas()},statusFormat:function(t,e){switch(e){case"1":return"增幅";case"0":return"绝对量"}},limitChange:function(){if(null!==this.targetCheckList)for(var t=0;t<this.targetCheckList.length;t++){switch(this.targetCheckList[t]){case"D-add":this.isAddShow=!0;break;case"D-edit":this.isEditShow=!0;break;case"D-down":this.isDownShow=!0}}},formatter:function(t,e,a,s){return s+1+(this.currentPage-1)*this.pageSize},selectChange:function(){this.$forceUpdate()},handleBack:function(){this.isShow=!0,this.stepShow=!1},getDatas:function(){var t=this,e=this.filters;e.userId=this.loginid,e.pageSize=this.pageSize,e.pageNum=this.currentPage,Object(s.p)(e,function(e){t.tableDatas=e.data.obj.datas,t.totals=e.data.obj.total})},resetForm:function(t){this.$refs[t].resetFields(),this.getAllDatas()},handleAdd:function(){this.stepForm.startDate=1,this.stepFormVisible=!0},selectName:function(){for(var t=this.stepForm.indexid,e=0;e<this.chengNames.length;e++)if(this.chengNames[e].id==t){this.choosename=this.chengNames[e].name,this.indexType=this.chengNames[e].type;break}},nextStep:function(){var t=this;this.$refs.stepForm.validate(function(e){if(e){var a={economicid:t.stepForm.indexid};t.eid=t.stepForm.indexid,t.startmonth=t.stepForm.startDate,t.endmonth=t.stepForm.endDate,Object(s.k)(a,function(e){t.fillDatas=e.data.obj,console.log(t.fillDatas);for(var a=0;a<e.data.obj.length;a++)t.fillDatas[a].amount="",t.fillDatas[a].amplify="",t.fillDatas[a].cytarget="",t.fillDatas[a].overtarget="",t.fillDatas[a].fschedule="",t.fillDatas[a].isfinish="",t.fillDatas[a].startmonth=t.startmonth,t.fillDatas[a].endmonth=t.endmonth,t.fillDatas[a].economicid=t.stepForm.indexid,t.fillDatas[a].deptid=t.fillDatas[a].id;t.selectName(),t.yearmonth=t.stepForm.startDate+"月 - "+t.stepForm.endDate+"月",t.stepShow=!0,t.stepFormVisible=!1,t.isShow=!1,t.iseditshow=!1,t.isaddshow=!0,t.stepForm={},t.isEdit=0})}})},handleDetail:function(t,e){var a=this;"1"==e.economicType?(this.isZeng=!0,this.isJuedui=!1):(this.isJuedui=!0,this.isZeng=!1),this.economicid=e.economicId,this.addnum=e.addnum,this.choosename=e.economicName+"（"+e.month+"）";var l={economicid:e.economicId,addnum:e.addnum};Object(s.s)(l,function(t){a.viewDatas=t.data.obj,a.merage(),a.viewReport=!0,a.isShow=!1})},isfinishFormat:function(t,e){switch(e){case 0:return"是";case 1:return"否"}},fscheduleFormat:function(t,e){return null==e?"<span>/</span>":e<0?"<span style='color:#f00;'>"+e+"</span>":"<span>"+e+"</span>"},amountFormat:function(t,e){return null==e?"<span>/</span>":e<0?"<span style='color:#f00;'>"+e+"</span>":"<span>"+e+"</span>"},amplifyFormat:function(t,e){return null==e?"<span>/</span>":e<0?"<span style='color:#f00;'>"+e+"%</span>":"<span>"+e+"%</span>"},overtargetFormat:function(t,e){return null==e?"<span>/</span>":e<0?"<span style='color:#f00;'>"+e+"%</span>":"<span>"+e+"%</span>"},goBack:function(){this.viewReport=!1,this.isShow=!0},merageInit:function(){this.spanArr=[],this.spanPos=0},merage:function(){this.merageInit();for(var t=0;t<this.viewDatas.length;t+=1)0===t?(this.spanArr.push(1),this.spanPos=0):this.viewDatas[t].deptcategory===this.viewDatas[t-1].deptcategory?(this.spanArr[this.spanPos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.spanPos=t)},typeSpanMethod:function(t){t.row,t.column;var e=t.rowIndex;if(0===t.columnIndex){var a=this.spanArr[e];return{rowspan:a,colspan:a>0?1:0}}},handleEdit:function(t,e){var a=this;this.listAddNum=e.addnum,this.choosename=e.economicName;var l={economicid:e.economicId,addnum:e.addnum};this.indexType=e.economicType,Object(s.g)(l,function(t){var e=t.data.obj;a.fillDatas=t.data.obj,a.yearmonth=e[0].startmonth+"月 - "+e[0].endmonth+"月",a.stepShow=!0,a.isShow=!1,a.isEdit=1,a.iseditshow=!0,a.isaddshow=!1})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"target keyrank"},[t.isShow?a("div",{staticClass:"mainfill"},[a("el-row",[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{ref:"filters",attrs:{inline:!0,model:t.filters,size:"small"}},[a("el-form-item",{staticClass:"mc",attrs:{label:"指标名称：",prop:"economicId"}},[a("el-select",{attrs:{placeholder:"全部",filterable:"",clearable:""},on:{change:t.selectChange},model:{value:t.filters.economicId,callback:function(e){t.$set(t.filters,"economicId",e)},expression:"filters.economicId"}},t._l(t.chengNames,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"填报时间：",prop:"startDate"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},on:{change:t.selectChange},model:{value:t.filters.startDate,callback:function(e){t.$set(t.filters,"startDate",e)},expression:"filters.startDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"--",prop:"endDate"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},on:{change:t.selectChange},model:{value:t.filters.endDate,callback:function(e){t.$set(t.filters,"endDate",e)},expression:"filters.endDate"}})],1),t._v(" "),a("el-form-item",{staticClass:"ld",attrs:{label:"牵头区领导",prop:"headLeaderId"}},[a("el-select",{attrs:{placeholder:"全部",filterable:"",clearable:""},on:{change:t.selectChange},model:{value:t.filters.headLeaderId,callback:function(e){t.$set(t.filters,"headLeaderId",e)},expression:"filters.headLeaderId"}},t._l(t.leaderList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div",{staticClass:"toolbtns"},[a("div",[t.isAddShow?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleAdd}},[t._v("新 增")]):t._e()],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.getDatas("filters")}}},[t._v("搜 索")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(e){t.resetForm("filters")}}},[t._v("重 置")])],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",height:t.tableHeight,data:t.tableDatas,"highlight-current-row":"","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",width:"60",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"reportDate",formatter:t.timestampToTime,label:"填报时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("dateformat")(e.row.reportDate,"YYYY-MM-DD HH:mm:ss")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"economicName",label:"指标名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"month",label:"填报月份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"leadName",label:"牵头区领导"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptnames",label:"牵头单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"economicType",label:"指标类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(t.statusFormat(e,e.row.economicType))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"audit",label:"状态",filters:[{text:"审核未通过",value:2},{text:"审核通过",value:1},{text:"未审核",value:0},{text:"未上报",value:-1}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.audit?a("el-tag",{attrs:{type:"danger","disable-transitions":""}},[a("span",{domProps:{innerHTML:t._s(t.swstateFormat(e,e.row.audit))}})]):1==e.row.audit?a("el-tag",{attrs:{type:"success","disable-transitions":""}},[a("span",{domProps:{innerHTML:t._s(t.swstateFormat(e,e.row.audit))}})]):a("el-tag",{attrs:{type:"info","disable-transitions":""}},[a("span",{domProps:{innerHTML:t._s(t.swstateFormat(e,e.row.audit))}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditShow?a("el-button",{staticClass:"btn nobtn",on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){t.handleDetail(e.$index,e.row)}}},[t._v("查看报表")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,40],"page-size":t.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:t.totals},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{staticClass:"fillbox",attrs:{title:"新增承办单位经济指标填报",visible:t.stepFormVisible,width:"500px"},on:{"update:visible":function(e){t.stepFormVisible=e}}},[a("el-form",{ref:"stepForm",attrs:{model:t.stepForm,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"指标名称：",prop:"indexid",rules:[{required:!0,message:"请先选择指标名称",trigger:"change"}]}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:function(e){t.selectChange()}},model:{value:t.stepForm.indexid,callback:function(e){t.$set(t.stepForm,"indexid",e)},expression:"stepForm.indexid"}},t._l(t.chengNames,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div",{staticClass:"ylist"},[a("el-form-item",{staticClass:"ybox",attrs:{label:"填报月份：",prop:"startDate"}},[a("el-select",{attrs:{placeholder:"开始月份",filterable:"",clearable:""},on:{change:function(e){t.selectChange()}},model:{value:t.stepForm.startDate,callback:function(e){t.$set(t.stepForm,"startDate",e)},expression:"stepForm.startDate"}},t._l(t.months,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))],1),t._v(" "),a("el-form-item",{staticClass:"endbox",attrs:{label:"--",prop:"endDate"}},[a("el-select",{attrs:{placeholder:"结束月份",filterable:"",clearable:""},on:{change:function(e){t.selectChange()}},model:{value:t.stepForm.endDate,callback:function(e){t.$set(t.stepForm,"endDate",e)},expression:"stepForm.endDate"}},t._l(t.months,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.nextStep("stepForm")}}},[t._v("下一步")])],1)],1)],1):t._e(),t._v(" "),t.stepShow?a("div",{staticClass:"nextstep"},[a("other-step",{attrs:{fillDatas:t.fillDatas,indexType:t.indexType,yearmonth:t.yearmonth,choosename:t.choosename,eid:t.eid,isEdit:t.isEdit,stepHeight:t.stepHeight,creHeight:t.creHeight,listAddNum:t.listAddNum,iseditshow:t.iseditshow,isaddshow:t.isaddshow},on:{"my-event":t.handleBack,"load-event":t.getAllDatas}})],1):t._e(),t._v(" "),t.viewReport?a("div",{staticClass:"viewreport"},[a("div",{staticClass:"bottombtn"},[a("el-button",{staticClass:"btn",attrs:{size:"small",type:"primary"},on:{click:t.goBack}},[t._v("返回")]),t._v(" "),t.isDownShow?a("el-button",{staticClass:"btn",attrs:{size:"small",type:"primary"},on:{click:t.downReportData}},[t._v("报表下载")]):t._e()],1),t._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",height:t.lookHeight,data:t.viewDatas,"highlight-current-row":"","span-method":t.typeSpanMethod}},[a("el-table-column",{attrs:{label:t.choosename}},[a("el-table-column",{attrs:{prop:"deptcategory",label:"类别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fscrank",label:"进度排名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amountrank",label:"总量排名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cytarget",label:"任务计划"}}),t._v(" "),a("el-table-column",{attrs:{label:"完成情况"}},[a("el-table-column",{attrs:{label:"完成总量",prop:"amount"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.amountFormat(e,e.row.amount))}})]}}])}),t._v(" "),t.isJuedui?a("el-table-column",{attrs:{label:"完成进度",prop:"fschedule"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.fscheduleFormat(e,e.row.fschedule))}})]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"增幅",prop:"amplify"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.amplifyFormat(e,e.row.amplify))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"超目标百分点",prop:"overtarget"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{domProps:{innerHTML:t._s(t.overtargetFormat(e,e.row.overtarget))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否完成任务计划",prop:"isfinish"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isfinish?a("p",[t._v("是")]):1==e.row.isfinish?a("p",{staticStyle:{color:"#f00"}},[t._v("否")]):t._e()]}}])})],1)],1)],1)],1):t._e()])},staticRenderFns:[]};var v=a("VU/8")(f,b,!1,function(t){a("ccTg")},null,null).exports,g=a("P9l9"),_=a("hct2"),w={name:"target",components:{fillinArea:d,fillinOther:v},data:function(){return{activeName:"first",loginid:JSON.parse(this.$store.getters.userdata).id,leaderList:[],indexName:"",indexNames:[],chengNames:[],currentPage:1,pageSize:10,totals:0,othertableDatas:[]}},mounted:function(){this.getLeaderList()},created:function(){this.getIndexData(),this.getAllDatas(),this.getChengbanData()},methods:{getAllDatas:function(){var t=this,e={pageSize:this.pageSize,pageNum:this.currentPage,userId:this.loginid};Object(s.p)(e,function(e){t.othertableDatas=e.data.obj})},handleTabClick:function(t,e){},switchTabs:function(t){this.activeName="second"},getLeaderList:function(){var t=this;Object(g.G)("",function(e){t.leaderList=e.data.obj})},getIndexData:function(){var t=this;Object(_.j)("",function(e){t.indexNames=e.data.obj})},getChengbanData:function(){var t=this;Object(_.t)("",function(e){t.chengNames=e.data.obj})}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrap target"},[a("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"各区市县完成情况",name:"first"}},[a("fillin-area",{attrs:{indexNames:t.indexNames,leaderList:t.leaderList}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"各街道等承办单位完成情况",name:"second"}},[a("fillin-other",{attrs:{chengNames:t.chengNames,leaderList:t.leaderList}})],1)],1)],1)},staticRenderFns:[]};var D=a("VU/8")(w,y,!1,function(t){a("xZ7K")},null,null);e.default=D.exports},xZ7K:function(t,e){}});
//# sourceMappingURL=6.e824673ad4ffe1610a62.js.map