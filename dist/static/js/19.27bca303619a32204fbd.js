webpackJsonp([19],{"13y6":function(t,e){},ACkI:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("4OxD"),o=s("P9l9"),l={name:"setup",data:function(){return{logoUrl:"",bgUrl:"",setForm:{},slogo:"",sbg:"",upfile:"",imgIp:""}},created:function(){this.systemList()},methods:{handleAvatarSuccess2:function(t,e){this.bgUrl=URL.createObjectURL(e.raw),this.sbg=e.response.obj,console.log(e)},beforeAvatarUpload2:function(t){var e="image/jpeg"===t.type,s=t.size/1024/1024<2;return e||this.$message.error("请上传 JPG 格式的图片!"),s||this.$message.error("上传图片大小不能超过 2MB!"),e&&s},handleAvatarSuccess:function(t,e){this.logoUrl=URL.createObjectURL(e.raw),this.slogo=e.response.obj},beforeAvatarUpload:function(t){var e="image/jpeg/png"===t.type,s=t.size/1024/1024<2;return e||this.$message.error("请上传 JPG 格式的图片!"),s||this.$message.error("上传图片大小不能超过 2MB!"),e&&s},systemList:function(){var t=this;Object(o.P)("",function(e){console.log(e),t.upfile=a.j,t.imgIp=a.a,t.logoUrl=t.imgIp+e.data.obj.logoname,t.bgUrl=t.imgIp+e.data.obj.backgroundname,t.setForm.systemname=e.data.obj.systemname,t.setForm.unitname=e.data.obj.unitname,t.sbg=e.data.obj.backgroundname,t.slogo=e.data.obj.logoname,t.systemname=e.data.obj.systemname,t.logoimg=t.logoUrl})},saveData:function(){var t=this,e={};e.systemname=this.setForm.systemname,e.backgroundname=this.sbg,e.logoname=this.slogo,e.unitname=this.setForm.unitname,Object(o.Q)(e,function(e){t.$confirm("修改成功，需要退出登录才能生效，确认现在退出吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.I)("",function(t){var e=t.data,s=e.code;e.msg;"0"===s&&(sessionStorage.removeItem("token"),location.reload())})}).catch(function(){t.$message({type:"info",message:"取消重新登录，修改将在下次登录生效！"})}),t.systemList()})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content-wrap setup"},[t._m(0),t._v(" "),s("div",{staticClass:"setwrap"},[s("div",{staticClass:"sleft"},[s("el-form",{ref:"setForm",attrs:{model:t.setForm,"label-width":"180px",size:"small"}},[s("el-form-item",{attrs:{label:"系统LOGO："}},[s("el-input",{attrs:{placeholder:"请上传"},model:{value:t.slogo,callback:function(e){t.slogo=e},expression:"slogo"}})],1),t._v(" "),s("p",{staticClass:"ts"},[t._v("建议：上传背景为透明色格式为png的图片")]),t._v(" "),s("el-form-item",{attrs:{label:"系统首页背景图："}},[s("el-input",{attrs:{placeholder:"请上传"},model:{value:t.sbg,callback:function(e){t.sbg=e},expression:"sbg"}})],1),t._v(" "),s("p",{staticClass:"ts"},[t._v("建议：背景请上传高清图")]),t._v(" "),s("el-form-item",{attrs:{label:"系统名称：",prop:"systemname"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.setForm.systemname,callback:function(e){t.$set(t.setForm,"systemname",e)},expression:"setForm.systemname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"单位名称：",prop:"unitname"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.setForm.unitname,callback:function(e){t.$set(t.setForm,"unitname",e)},expression:"setForm.unitname"}})],1),t._v(" "),s("el-form-item",{staticClass:"sbtn"},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("保 存")])],1)],1)],1),t._v(" "),s("div",{staticClass:"sright"},[s("div",{staticClass:"list"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.upfile,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[s("el-button",{attrs:{type:"primary",size:"small"}},[t._v("上传图片")]),t._v(" "),t.logoUrl?s("img",{staticClass:"avatar avatar2",attrs:{src:t.logoUrl}}):t._e()],1)],1),t._v(" "),s("div",{staticClass:"list"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.upfile,"show-file-list":!1,"on-success":t.handleAvatarSuccess2}},[s("el-button",{attrs:{type:"primary",size:"small"}},[t._v("上传图片")]),t._v(" "),t.bgUrl?s("img",{staticClass:"avatar",attrs:{src:t.bgUrl}}):t._e()],1)],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"navtitle"},[e("span",[this._v("系统设置")])])}]};var n=s("VU/8")(l,r,!1,function(t){s("13y6")},null,null);e.default=n.exports}});
//# sourceMappingURL=19.27bca303619a32204fbd.js.map