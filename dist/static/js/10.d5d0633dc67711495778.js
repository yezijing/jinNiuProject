webpackJsonp([10],{BgD4:function(e,t){},CJ7p:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("4OxD"),i=a("y7k7"),l=a("mvHQ"),r=a.n(l),n=a("woOf"),o=a.n(n),d=a("6rDn"),c={props:["deptlist","addheight","leaderUsers"],components:{},data:function(){return{submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}],basicInfo:{status:0},checkMeetList:[],addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:0,filepath:[],fileList:[],upfile:"",imgIp:"",ruleList:[],ruleVisible:!1,ruleTitle:"",ruleBtn:"",addRuleForm:{cycletype:1},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],dateShow1:!0,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",cycleNum:1,ruleIndex:-1,addLeadVisible:!1,addDutyVisible:!1,leadsData:[],dutysData:[],addLeadData:{},addDutyData:{},taskTitle:""}},created:function(){this.upfile=s.j,this.imgIp=s.a},methods:{addLead:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增牵头单位",this.readOn=!1,this.addLeadVisible=!0},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},handleEdit2:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑牵头单位",this.readOn=!1,this.addLeadVisible=!0,this.addLeadData=o()({},t),this.tindex=e},submitLead:function(){"read"==this.changeNum?this.addLeadVisible=!1:"add"==this.changeNum?this.addLeadSubmit():this.editLeadSubmit()},deptChange:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addLeadData.deptid){e=this.deptlist[t].name;break}this.addLeadData.deptname=e},addLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return console.log("error"),!1;var a=o()({},e.addLeadData);e.leadsData.push(a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},editLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return console.log("error"),!1;var a=o()({},e.addLeadData);e.leadsData.splice(e.tindex,1,a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},handleDelete2:function(e,t){this.leadsData.splice(e,1),this.$refs.addLeadData.resetFields(),this.addLeadVisible=!1,this.$message({message:"删除成功",type:"success"})},addDuty:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增责任单位",this.readOn=!1,this.addDutyVisible=!0},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},handleEdit3:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑责任单位",this.readOn=!1,this.addDutyVisible=!0,this.addDutyData=o()({},t),this.tindex=e},submitDuty:function(){"read"==this.changeNum?this.addDutyVisible=!1:"add"==this.changeNum?this.addDutySubmit():this.editDutySubmit()},deptChange2:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addDutyData.deptid){e=this.deptlist[t].name;break}this.addDutyData.deptname=e,console.log(this.addDutyData)},addDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;console.log(e.addDutyData);var a=o()({},e.addDutyData);e.dutysData.push(a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},editDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.splice(e.tindex,1,a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},handleDelete3:function(e,t){this.dutysData.splice(e,1),this.$refs.addDutyData.resetFields(),this.addDutyVisible=!1,this.$message({message:"删除成功",type:"success"})},ctypeFormat:function(e,t){switch(t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},addRuleBtn:function(){this.ruleVisible=!0,this.ruleTitle="新增报送规则",this.ruleBtn="新增",this.changeNum="add",this.addRuleForm={cycletype:1},this.cycleChange()},addRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.push(a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},editRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="编辑报送规则",this.ruleBtn="保存",this.changeNum="edit",this.addRuleForm=o()({},t),this.ruleIndex=e},editRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.splice(e.ruleIndex,1,a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleIndex=-1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},delRuleBtn:function(e,t){this.ruleList.splice(e,1),this.ruleVisible=!1,this.$message({message:"删除成功",type:"success"})},submitRule:function(){"add"==this.changeNum?this.addRuleSubmit():this.editRuleSubmit()},goback:function(){var e=this;this.$confirm("<span style='color:#f00;'>数据未保存</span>，确定返回列表吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("my-event")}).catch(function(){return!1})},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},addTask:function(){this.addItemData={},this.changeNum="add",this.changeWord="新增",this.itemTitle="新增督办事项",this.readOn=!1,this.itemVisible=!0},handleDetail:function(e,t){this.changeNum="read",this.changeWord="确定",this.itemTitle="详情",this.readOn=!0,this.itemVisible=!0,this.addItemData=o()({},t)},handleEdit:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑督办事项",this.readOn=!1,this.itemVisible=!0,this.addItemData=o()({},t),this.tindex=e},submitItemForm:function(){"read"==this.changeNum?this.itemVisible=!1:"add"==this.changeNum?this.addSubmit():this.editSubmit()},addSubmit:function(){var e=this;this.$refs.addItemData.validate(function(t){if(!t)return!1;e.addItemData.status=0;var a=o()({},e.addItemData);e.checkMeetList.push(a),e.$refs.addItemData.resetFields(),e.itemVisible=!1})},editSubmit:function(){var e=this;this.$refs.addItemData.validate(function(t){if(!t)return!1;var a=o()({},e.addItemData);e.checkMeetList.splice(e.tindex,1,a),e.$refs.addItemData.resetFields(),e.itemVisible=!1})},handleDelete:function(e,t){this.checkMeetList.splice(e,1),this.$refs.addItemData.resetFields(),this.itemVisible=!1},removeArr:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1},handleRemove:function(e,t){var a=e.response.obj;this.filepath.splice(this.removeArr(this.filepath,a),1),console.log(this.filepath)},handleSuccess:function(e,t){this.filepath.push(e.obj)},submitAll:function(){var e=this;this.$refs.basicInfo.validate(function(t){if(!t)return!1;if(e.leadsData==[])e.$message({message:"请添加牵头单位",type:"warning"});else{var a=e.basicInfo.aleaders;a=0==a.length?"":1==a.length?a[0]+",":a.join(",");var s=e.basicInfo;s.arealeadids=a,s.totalstatus=0,s.formstatus=0,s.checkMeetList=e.checkMeetList,s.checkRuleList=e.ruleList,s.leaderList=e.leadsData,s.dutyList=e.dutysData;var i="";""==e.filepath?e.filepath=[]:i=e.filepath.length>1?e.filepath.join(","):e.filepath[0]+",",s.filepath=i,s=r()(s),Object(d.a)(s,function(t){if(-2==t.data.code)e.$message({message:t.data.msg,type:"error"});else if(0==t.data.code){var a={cid:t.data.obj};Object(d.g)(a,function(a){Object(d.r)({cid:t.data.obj},function(t){e.$emit("my-event"),e.$emit("updateList"),e.$message({message:"新增成功",type:"success"})})})}else e.$message({message:"新增失败",type:"error"}),e.$emit("my-event"),e.$emit("updateList")})}})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addproject"},[a("div",{staticClass:"pback"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")])],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight},[a("el-row",{staticClass:"box"},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent basicbox"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"110px",size:"small",model:e.basicInfo}},[a("el-col",{staticClass:"assign-left",attrs:{span:12}},[a("el-form-item",{attrs:{label:"编号：",prop:"code",rules:[{required:!0,message:"请输入编号",trigger:"change"}]}},[a("el-input",{attrs:{placeholder:"请输入编号"},model:{value:e.basicInfo.code,callback:function(t){e.$set(e.basicInfo,"code",t)},expression:"basicInfo.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"立项时间：",prop:"starttime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择时间"},model:{value:e.basicInfo.starttime,callback:function(t){e.$set(e.basicInfo,"starttime",t)},expression:"basicInfo.starttime"}})],1),e._v(" "),a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"aleaders"}},[a("el-select",{staticClass:"item-select",attrs:{multiple:"",clearable:"",placeholder:"请选择"},model:{value:e.basicInfo.aleaders,callback:function(t){e.$set(e.basicInfo,"aleaders",t)},expression:"basicInfo.aleaders"}},e._l(e.leaderUsers,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{staticClass:"assign-right",attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务来源：",prop:"tasksource"}},[a("el-input",{attrs:{placeholder:"请输入任务来源"},model:{value:e.basicInfo.tasksource,callback:function(t){e.$set(e.basicInfo,"tasksource",t)},expression:"basicInfo.tasksource"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工作要求：",prop:"jobrequire"}},[a("el-input",{attrs:{type:"textarea",rows:4,readonly:e.readOn},model:{value:e.basicInfo.jobrequire,callback:function(t){e.$set(e.basicInfo,"jobrequire",t)},expression:"basicInfo.jobrequire"}})],1)],1)],1)],1)])]),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("督办事项")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addTask}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.checkMeetList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"remark",label:"督办事项"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{staticStyle:{"max-width":"150px","line-height":"2"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.remark))]),e._v(" "),a("p",{staticClass:"sxtitle"},[e._v(e._s(t.row.remark))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stoptime",label:"时间节点"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{width:"100%"}},[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addRuleBtn}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.editRuleBtn(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.delRuleBtn(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addLead}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptname",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit2(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete2(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addDuty}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptname",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit3(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete3(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("div",{staticClass:"upfile"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.upfile,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加附件")])],1)],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.goback}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitAll}},[e._v("新 增")])],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:e.ruleTitle,visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog",attrs:{title:e.itemTitle,visible:e.itemVisible,width:"800px"},on:{"update:visible":function(t){e.itemVisible=t}}},[a("el-form",{ref:"addItemData",attrs:{model:e.addItemData,size:"small","label-width":"130px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"督办事项：",prop:"remark",rules:[{required:!0,message:"督办事项不能为空",trigger:"change"}]}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3},readonly:e.readOn},model:{value:e.addItemData.remark,callback:function(t){e.$set(e.addItemData,"remark",t)},expression:"addItemData.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截止报送时间：",prop:"stoptime",rules:[{required:!0,message:"请选择截止时间",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:e.readOn,"value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addItemData.stoptime,callback:function(t){e.$set(e.addItemData,"stoptime",t)},expression:"addItemData.stoptime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitItemForm}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptid",rules:[{required:!0,message:"请选择牵头单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.addLeadData.deptid,callback:function(t){e.$set(e.addLeadData,"deptid",t)},expression:"addLeadData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptid",rules:[{required:!0,message:"请选择责任单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",readonly:e.readOn,placeholder:"请选择"},on:{change:e.deptChange2},model:{value:e.addDutyData.deptid,callback:function(t){e.$set(e.addDutyData,"deptid",t)},expression:"addDutyData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var h,m=a("VU/8")(c,u,!1,function(e){a("oqZT")},null,null).exports,p=a("bOdI"),f=a.n(p),b={props:["deptlist","basicInfo","checkMeetList","addheight","ruleList","leaderUsers","checkReceipt","ccid","leadsData","dutysData","newReportList","fileArr"],components:{},data:function(){var e;return e={addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:0,filepath:[],fileList:[],upfile:"",ruleVisible:!1,dateShow1:!1,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",ruleTitle:"",ruleBtn:"",cycleNum:0,addRuleForm:{},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}],ruleIndex:-1,addLeadVisible:!1,addDutyVisible:!1},f()(e,"changeNum",""),f()(e,"changeWord",""),f()(e,"tindex","-1"),f()(e,"readOn",!1),f()(e,"addLeadData",{}),f()(e,"addDutyData",{}),f()(e,"taskTitle",""),e},created:function(){if(this.fileList=this.fileArr,this.fileList==[])this.filepath=[];else for(var e=0;e<this.fileList.length;e++)this.filepath.push(this.fileList[e].name);this.upfile=s.j,this.imgIp=s.a},methods:(h={weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},addLead:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增牵头单位",this.readOn=!1,this.addLeadVisible=!0},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},handleEdit2:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑牵头单位",this.readOn=!1,this.addLeadVisible=!0,this.addLeadData=o()({},t),this.tindex=e},submitLead:function(){"read"==this.changeNum?this.addLeadVisible=!1:"add"==this.changeNum?this.addLeadSubmit():this.editLeadSubmit()},deptChange:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addLeadData.deptid){e=this.deptlist[t].name;break}this.addLeadData.deptName=e},addLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);e.leadsData.push(a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},editLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);e.leadsData.splice(e.tindex,1,a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},handleDelete2:function(e,t){this.leadsData.splice(e,1),this.$refs.addLeadData.resetFields(),this.addLeadVisible=!1,this.$message({message:"删除成功",type:"success"})},addDuty:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增责任单位",this.readOn=!1,this.addDutyVisible=!0},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},handleEdit3:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑责任单位",this.readOn=!1,this.addDutyVisible=!0,this.addDutyData=o()({},t),this.tindex=e},submitDuty:function(){"read"==this.changeNum?this.addDutyVisible=!1:"add"==this.changeNum?this.addDutySubmit():this.editDutySubmit()},deptChange2:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addDutyData.deptid){e=this.deptlist[t].name;break}this.addDutyData.deptName=e},addDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.push(a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},editDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.splice(e.tindex,1,a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},handleDelete3:function(e,t){this.dutysData.splice(e,1),this.$refs.addDutyData.resetFields(),this.addDutyVisible=!1,this.$message({message:"删除成功",type:"success"})},selectChange:function(){this.$forceUpdate()},endtimeToTime:function(e,t){var a=new Date(e.endtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},ctypeFormat:function(e,t){switch(this.$forceUpdate(),t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},addRuleBtn:function(){this.ruleVisible=!0,this.ruleTitle="新增报送规则",this.ruleBtn="新增",this.changeNum="add",this.addRuleForm={cycletype:1},this.cycleChange()},addRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.push(a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},editRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="编辑报送规则",this.ruleBtn="保存",this.changeNum="edit",this.addRuleForm=o()({},t),this.addRuleForm.daytime=new Date(this.addRuleForm.daytime),this.addRuleForm.starttime=new Date(this.addRuleForm.starttime),this.addRuleForm.endtime=new Date(this.addRuleForm.endtime),this.ruleIndex=e},editRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.splice(e.ruleIndex,1,a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleIndex=-1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},delRuleBtn:function(e,t){this.ruleList.splice(e,1),this.ruleVisible=!1,this.$message({message:"删除成功",type:"success"})},submitRule:function(){"add"==this.changeNum?this.addRuleSubmit():this.editRuleSubmit()}},f()(h,"selectChange",function(){this.$forceUpdate()}),f()(h,"timestampToTime",function(e,t){var a=new Date(e.stoptime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()}),f()(h,"selectChange",function(){this.$forceUpdate()}),f()(h,"goback",function(){var e=this;this.$confirm("<span style='color:#f00;'>数据未保存</span>，确定返回列表吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("my-event")}).catch(function(){return!1})}),f()(h,"tableRowClassName",function(e){var t=e.row;e.rowIndex;return-1==t.status?"noedit":3==t.status?"lagbtn":void 0}),f()(h,"statusFormat",function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}}),f()(h,"cellClassName",function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}}),f()(h,"addTask",function(){this.addItemData={},this.changeNum="add",this.changeWord="新增",this.itemTitle="新增督办事项",this.readOn=!1,this.itemVisible=!0}),f()(h,"handleDetail",function(e,t){this.changeNum="read",this.changeWord="确定",this.itemTitle="详情",this.readOn=!0,this.itemVisible=!0,this.addItemData=o()({},t)}),f()(h,"handleEdit",function(e,t){this.changeNum="edit",this.changeWord="保存",this.itemTitle="编辑督办事项",this.readOn=!1,this.itemVisible=!0,this.addItemData=o()({},t),this.addItemData.stoptime=new Date(this.addItemData.stoptime),this.tindex=e}),f()(h,"submitItemForm",function(){"read"==this.changeNum?this.itemVisible=!1:"add"==this.changeNum?this.addSubmit():this.editSubmit()}),f()(h,"addSubmit",function(){var e=this;this.$refs.addItemData.validate(function(t){if(!t)return!1;e.addItemData.status=0;var a=o()({},e.addItemData);e.checkMeetList.push(a),e.$refs.addItemData.resetFields(),e.itemVisible=!1,console.log(e.checkMeetList)})}),f()(h,"editSubmit",function(){var e=this;this.$refs.addItemData.validate(function(t){if(!t)return!1;var a=o()({},e.addItemData);e.checkMeetList.splice(e.tindex,1,a),e.$refs.addItemData.resetFields(),e.itemVisible=!1})}),f()(h,"handleOver",function(e,t,a){var s=this;-1==e.status?this.$message({message:"已完结"}):this.$confirm("确定设置为完结吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={meetid:t};Object(d.o)(e,function(t){Object(d.p)(e,function(e){s.checkMeetList[a].status=e.data.obj.status})})}).catch(function(){s.$message({type:"info",message:"取消操作"})})}),f()(h,"handleLag",function(e,t,a){var s=this;3==e.status?this.$message({message:"已设置滞后"}):this.$confirm("确定设置为滞后吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={meetid:t};Object(d.n)(e,function(t){Object(d.p)(e,function(e){s.checkMeetList[a].status=e.data.obj.status})})}).catch(function(){s.$message({type:"info",message:"取消操作"})})}),f()(h,"handleDelete",function(e,t){this.checkMeetList.splice(e,1),this.$refs.addItemData.resetFields(),this.itemVisible=!1}),f()(h,"removeArr",function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1}),f()(h,"handleRemove",function(e,t){var a=e.response.obj;this.filepath.splice(this.removeArr(this.filepath,a),1)}),f()(h,"handleSuccess",function(e,t){this.filepath.push(e.obj)}),f()(h,"submitAll",function(){var e=this;this.$refs.basicInfo.validate(function(t){if(!t)return!1;console.log(e.basicInfo),0==e.basicInfo.arealeadids.length?e.basicInfo.arealeadids="":1==e.basicInfo.arealeadids.length?e.basicInfo.arealeadids=e.basicInfo.arealeadids[0]+",":e.basicInfo.arealeadids=e.basicInfo.arealeadids.join(",");var a=new Date(e.basicInfo.starttime),s=a.getFullYear()+"-",i=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",l=a.getDate()<10?"0"+a.getDate():a.getDate();e.basicInfo.starttime=s+i+l;var n=e.basicInfo;n.checkRuleList=e.ruleList,n.leaderList=e.leadsData,n.dutyList=e.dutysData;var o="";n.checkMeetList=e.checkMeetList,o=e.filepath.length>1?e.filepath.join(","):e.filepath[0]+",",n.filepath=o,n=r()(n),Object(d.d)(n,function(t){Object(d.g)({cid:e.ccid},function(t){Object(d.r)({cid:e.ccid},function(t){e.$emit("my-event"),e.$emit("updateList"),e.$message({message:"编辑成功",type:"success"})})})})})}),h)},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addproject"},[a("div",{staticClass:"pback"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")])],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight},[a("el-row",{staticClass:"box",staticStyle:{display:"flex","align-items":"stretch"},attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{height:"100%"}},[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent basicbox"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"110px",size:"small",model:e.basicInfo}},[a("el-form-item",{attrs:{label:"编号：",prop:"code",rules:[{required:!0,message:"请输入编号",trigger:"change"}]}},[a("el-input",{attrs:{placeholder:"请输入编号"},model:{value:e.basicInfo.code,callback:function(t){e.$set(e.basicInfo,"code",t)},expression:"basicInfo.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"立项时间：",prop:"starttime"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.basicInfo.starttime,callback:function(t){e.$set(e.basicInfo,"starttime",t)},expression:"basicInfo.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务来源：",prop:"tasksource"}},[a("el-input",{attrs:{placeholder:"请输入任务来源"},model:{value:e.basicInfo.tasksource,callback:function(t){e.$set(e.basicInfo,"tasksource",t)},expression:"basicInfo.tasksource"}})],1),e._v(" "),a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"arealeadids"}},[a("el-select",{staticClass:"item-select",attrs:{multiple:"",clearable:"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.basicInfo.arealeadids,callback:function(t){e.$set(e.basicInfo,"arealeadids",t)},expression:"basicInfo.arealeadids"}},e._l(e.leaderUsers,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"工作要求：",prop:"jobrequire"}},[a("el-input",{attrs:{type:"textarea",rows:6,readonly:e.readOn},model:{value:e.basicInfo.jobrequire,callback:function(t){e.$set(e.basicInfo,"jobrequire",t)},expression:"basicInfo.jobrequire"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{height:"100%"}},[a("legend",[e._v("进展汇报")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("div",{staticClass:"speed"},[a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("存在问题：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("下步工作计划：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])}))]),e._v(" "),a("div",{staticClass:"filelist"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),a("div",{staticClass:"list"},[a("div",e._l(e.newReportList,function(t,s){return a("div",{key:s},e._l(t.newFiles,function(t,i){return a("div",{key:i},[a("a",{staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])])}))}))])])])])])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("督办事项")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addTask}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.checkMeetList,"highlight-current-row":"","cell-class-name":e.cellClassName,"row-class-name":e.tableRowClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"remark",label:"督办事项"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{staticStyle:{"max-width":"150px","line-height":"2"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.remark))]),e._v(" "),a("p",{staticClass:"sxtitle"},[e._v(e._s(t.row.remark))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stoptime",formatter:e.timestampToTime,label:"时间节点"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addRuleBtn}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.starttime,"YYYY-MM-DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",formatter:e.endtimeToTime,label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.editRuleBtn(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.delRuleBtn(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addLead}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"200px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"报送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"small"}},[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit2(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete2(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addDuty}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,"highlight-current-row":"",height:"200px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit3(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete3(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("div",{staticClass:"upfile"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.upfile,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.fileList}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("添加附件")])],1)],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.goback}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitAll}},[e._v("保 存")])],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:e.ruleTitle,visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog",attrs:{title:e.itemTitle,visible:e.itemVisible,width:"800px"},on:{"update:visible":function(t){e.itemVisible=t}}},[a("el-form",{ref:"addItemData",attrs:{model:e.addItemData,size:"small","label-width":"130px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"督办事项：",prop:"remark",rules:[{required:!0,message:"请输入",trigger:"change"}]}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},readonly:e.readOn},model:{value:e.addItemData.remark,callback:function(t){e.$set(e.addItemData,"remark",t)},expression:"addItemData.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截止报送时间：",prop:"stoptime",rules:[{required:!0,message:"请选择时间",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:e.readOn,placeholder:"请选择","value-format":"yyyy-MM-dd"},model:{value:e.addItemData.stoptime,callback:function(t){e.$set(e.addItemData,"stoptime",t)},expression:"addItemData.stoptime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitItemForm}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptid",rules:[{required:!0,message:"请选择牵头单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.addLeadData.deptid,callback:function(t){e.$set(e.addLeadData,"deptid",t)},expression:"addLeadData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptid",rules:[{required:!0,message:"请选择责任单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",readonly:e.readOn,placeholder:"请选择"},on:{change:e.deptChange2},model:{value:e.addDutyData.deptid,callback:function(t){e.$set(e.addDutyData,"deptid",t)},expression:"addDutyData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(b,v,!1,function(e){a("BgD4")},null,null).exports,g={components:{},props:["basicInfo","deptlist","checkMeetList","addheight2","histableHeight","aid","leaderUsers","ruleList","checkReceipt","isEditShow","noEdit","leadsData","dutysData","newReportList","fileArr","isCenter"],data:function(){var e;return e={statusLabel:["../../../static/images/s0.png","../../../static/images/s1.png","../../../static/images/s2.png","../../../static/images/s3.png"],imgNum:"",addItemData:{},itemVisible:!1,readOn:!1,upfile:"",imgIp:"",isDetailShow:!0,isHistoryShow:!1,historyData:[],ruleVisible:!1,ruleTitle:"",ruleBtn:"",addRuleForm:{cycletype:1},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}],dateShow1:!0,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",cycleNum:1,ruleIndex:-1,addLeadVisible:!1,addDutyVisible:!1,changeNum:"",changeWord:"",tindex:"-1"},f()(e,"readOn",!1),f()(e,"taskTitle",""),f()(e,"addLeadData",{}),f()(e,"addDutyData",{}),e},created:function(){this.upfile=s.j,this.imgIp=s.a,this.statusImg()},methods:{formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},submitLead:function(){this.addLeadVisible=!1},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},submitDuty:function(){this.addDutyVisible=!1},toEdit:function(){this.$emit("edit-event")},stateFormat:function(e,t){switch(t){case 2:return"未执行";case 1:return"执行中";case 0:return"失效"}},weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},detailRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="报送规则详情",this.ruleBtn="确定",this.changeNum="detail",this.addRuleForm=o()({},t),this.addRuleForm.daytime=new Date(this.addRuleForm.daytime),this.addRuleForm.starttime=new Date(this.addRuleForm.starttime),this.addRuleForm.endtime=new Date(this.addRuleForm.endtime),this.ruleIndex=e},ctypeFormat:function(e,t){switch(t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},timestampToTime:function(e,t){new Date(e.stoptime);return e.stoptime|dateformat("YYYY-MM-DD HH:mm:ss")},enddateToTime:function(e,t){var a=new Date(e.endtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()+" ")},timestampToTime2:function(e,t){var a=new Date(e.createtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},lookHistory:function(){var e=this,t={checkid:this.aid};Object(d.m)(t,function(t){e.historyData=t.data.obj;for(var a=[],s=0;s<e.historyData.length;s++){var i=e.historyData[s].filepath,l=[];if(null==i)l=[];else{var r=(a=i.split(",")).length;""==a[r-1]&&a.splice(r-1,1);for(var n=a,o=0;o<n.length;o++){var d={};d.url=e.imgIp+n[o],d.name=n[o],l.push(d)}}e.historyData[s].filepath=l}}),this.isDetailShow=!1,this.isHistoryShow=!0},returnDetail:function(){this.isDetailShow=!0,this.isHistoryShow=!1},statusImg:function(){switch(this.basicInfo.status){case 0:return this.imgNum=0;case 1:return this.imgNum=1;case 2:return this.imgNum=2;case-1:return this.imgNum=3}},goback:function(){1==this.isCenter?this.$router.push({path:"/index"}):2==this.isCenter?this.$router.push({path:"/personCenter"}):this.$emit("my-event")},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},handleDetail:function(e,t){this.readOn=!0,this.itemVisible=!0,this.addItemData=o()({},t)}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addproject"},[e.isDetailShow?a("div",[a("div",{staticClass:"pback"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")]),e._v(" "),e.isEditShow?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.noEdit,expression:"noEdit"}],staticClass:"editbtn",class:2==e.isCenter?"noeditbtn":"",attrs:{size:"small",type:"primary"},on:{click:e.toEdit}},[e._v("编辑")]):e._e()],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight2},[a("el-row",{staticClass:"box abox",attrs:{gutter:40}},[a("el-col",{staticClass:"detail-info",attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent basicbox"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"110px",size:"small",model:e.basicInfo}},[a("el-form-item",{attrs:{label:"编号：",prop:"code"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.code,callback:function(t){e.$set(e.basicInfo,"code",t)},expression:"basicInfo.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"立项时间：",prop:"starttime"}},[a("el-date-picker",{staticClass:"el-input-datebox",attrs:{readonly:"",type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.basicInfo.starttime,callback:function(t){e.$set(e.basicInfo,"starttime",t)},expression:"basicInfo.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务来源：",prop:"tasksource"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.tasksource,callback:function(t){e.$set(e.basicInfo,"tasksource",t)},expression:"basicInfo.tasksource"}})],1),e._v(" "),a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"arealeadids"}},[a("el-select",{staticClass:"item-select",attrs:{multiple:"",clearable:"",disabled:""},model:{value:e.basicInfo.arealeadids,callback:function(t){e.$set(e.basicInfo,"arealeadids",t)},expression:"basicInfo.arealeadids"}},e._l(e.leaderUsers,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"lastitem",attrs:{label:"工作要求：",prop:"jobrequire"}},[a("el-input",{attrs:{type:"textarea",rows:6,readonly:""},model:{value:e.basicInfo.jobrequire,callback:function(t){e.$set(e.basicInfo,"jobrequire",t)},expression:"basicInfo.jobrequire"}})],1)],1),e._v(" "),a("div",{staticClass:"stateId"},[a("img",{attrs:{src:e.statusLabel[e.imgNum],alt:""}})])],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("进展汇报")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{size:"small",type:"primary"},on:{click:e.lookHistory}},[e._v("报送历史")]),e._v(" "),a("div",{staticClass:"speed"},[a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("存在问题：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("下步工作计划：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])}))]),e._v(" "),a("div",{staticClass:"filelist"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),a("div",{staticClass:"list"},[a("div",e._l(e.newReportList,function(t,s){return a("div",{key:s},e._l(t.newFiles,function(t,i){return a("div",{key:i},[a("a",{staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])])}))}))])])])],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("督办事项")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.checkMeetList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"remark",label:"督办事项"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"150px","line-height":"2"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.remark))]),e._v(" "),a("p",{staticClass:"sxtitle"},[e._v(e._s(t.row.remark))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stoptime",label:"时间节点"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.stoptime,"YYYY-MM-DD")))])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{width:"100%"}},[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.starttime,"YYYY-MM-DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",formatter:e.enddateToTime,label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"medium"}},[1==t.row.status?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):0==t.row.status?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.stateFormat(t,t.row.status))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.detailRuleBtn(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo dtable",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"报送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"small"}},[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail2(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo dtable",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,height:"250px","highlight-current-row":"","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail3(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])])],1),e._v(" "),a("div",{staticClass:"upfile"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),e._l(e.fileArr,function(t,s){return a("a",{key:s,attrs:{target:"_blank",href:t.url}},[e._v(e._s(t.name))])})],2)],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:"详情",visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{readonly:"",placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{attrs:{readonly:""},model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",disabled:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{attrs:{readonly:""},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ruleVisible=!1}}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog",attrs:{title:"详情",visible:e.itemVisible,width:"800px"},on:{"update:visible":function(t){e.itemVisible=t}}},[a("el-form",{ref:"addItemData",attrs:{model:e.addItemData,"label-width":"120px",size:"small","append-to-body":!0}},[a("el-form-item",{attrs:{label:"督办事项：",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},readonly:e.readOn},model:{value:e.addItemData.remark,callback:function(t){e.$set(e.addItemData,"remark",t)},expression:"addItemData.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截止报送时间：",prop:"stoptime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:e.readOn,"value-format":"yyyy-MM-dd"},model:{value:e.addItemData.stoptime,callback:function(t){e.$set(e.addItemData,"stoptime",t)},expression:"addItemData.stoptime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.itemVisible=!1}}},[e._v("确定")])],1)],1)],1):e._e(),e._v(" "),e.isHistoryShow?a("div",{staticClass:"history"},[a("p",{staticClass:"title"},[e._v("报送历史")]),e._v(" "),a("div",{staticClass:"hbtns"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.returnDetail}},[e._v("返 回")])],1),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.historyData,"highlight-current-row":"",height:e.histableHeight}},[a("el-table-column",{attrs:{prop:"reportdept",label:"报送单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"报送时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.createtime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"question",label:"进展情况"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wenti",label:"存在问题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"measure",label:"下步工作计划"}}),e._v(" "),a("el-table-column",{attrs:{prop:"filepath",label:"附件"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.filepath,function(t,s){return a("a",{key:s,staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])})}}])})],1)],1):e._e(),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptName"}},[a("el-input",{model:{value:e.addLeadData.deptName,callback:function(t){e.$set(e.addLeadData,"deptName",t)},expression:"addLeadData.deptName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptName"}},[a("el-input",{model:{value:e.addDutyData.deptName,callback:function(t){e.$set(e.addDutyData,"deptName",t)},expression:"addDutyData.deptName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(g,w,!1,function(e){a("dpKc")},null,null).exports,D=a("flNh"),k=a("qAgM"),S=a("Vi22"),x=a("Vbf0"),L=a("P9l9"),C=a("ArgV"),$={name:"assignlive",components:{addAssign:m,editAssign:y,detailAssign:_,reportContent:D.a,batchRule:k.a,importFile:S.a,reportProgress:x.a},data:function(){return{downTypeVisible:!1,downType:"",upbtnDisabled:!1,showYearbox:!1,isExport:{visible:!0},allitems:[],batchHeight:"",batchVisible:!1,allShow:!0,laststate:"",reportVisible:{visible:!1},itemShow:2,reportid:-1,reportBasic:{},isCenter:3,loading:!0,isShow:!0,addShow:!1,detailShow:!1,editShow:!1,receiptVisible:!1,loginid:JSON.parse(this.$store.getters.userdata).id,filters:{},userlist:[],deptlist:[],assignId:-1,fileList:[],filepath:[],reportData:{},currentPage:1,pageSize:10,totals:0,statuss:[{value:0,status:"正常"},{value:1,status:"预警"},{value:2,status:"逾期"},{value:3,status:"滞后"},{value:4,status:"严重滞后"},{value:-1,status:"完结"}],assignDetailData:{},assignDatas:[],checkid:"",checkId:"-1",meets:[],detailAssignData:[],basicInfo:{},checkMeetList:[],astatus:"",assignCheckList:JSON.parse(this.$store.getters.userdata).assignCheckList,isAddShow:!1,isEditShow:!1,isReportShow:!1,isOverShow:!1,isDownShow:!1,upfile:"",imgIp:"",cellhidden:[],tableHeight:"500px",histableHeight:"300px",ishidden1:!0,ishidden2:!0,ishidden3:!0,ishidden4:!0,ishidden5:!0,ishidden6:!0,ishidden7:!0,fileArr:[],colums:"",showitemlist:[{name:"工作要求",value:1},{name:"牵头单位",value:2},{name:"责任单位",value:3},{name:"总体情况",value:4},{name:"存在问题",value:5},{name:"下步工作计划",value:6},{name:"牵头区领导",value:7}],addheight:"height:500px",addheight2:"height:500px",ruleList:[],leaderUsers:[],totalStatus:[{value:0,status:"正常"},{value:3,status:"滞后"},{value:4,status:"严重滞后"},{value:-1,status:"完结"}],formStatus:[{value:0,status:"正常"},{value:1,status:"预警"},{value:2,status:"逾期"},{value:-1,status:"完结"}],aid:"",checkReceipt:{},ccid:"",noEdit:!0,leadsData:[],dutysData:[],defaturl:"",importdataVisible:!1,pdatalist:[],importProjectList:"",filedatas:[],newReportList:[],newFiles:[]}},mounted:function(){},created:function(){this.upfile=s.j,this.imgIp=s.a,this.defaturl=i.a,this.importProjectList=s.f,this.hiddenDatas(),this.browerHeight(),this.limitChange(),this.passValue(),this.getDeptlist(),this.getUsers(),this.getAssignList(),this.getLeaderList(),this.centerDetail()},methods:{checkDownload:function(){this.downTypeVisible=!0},downDatalist:function(){1==this.downType?window.open(this.defaturl+"/report/createCheckReport"):window.open(this.defaturl+"/CheckExport2Word/export"),this.downTypeVisible=!1},getAllDatas:function(){var e=this;Object(d.k)("",function(t){if(null==t.data.obj)e.allitems=[];else{e.allitems=t.data.obj;for(var a=0;a<e.allitems.length;a++)e.allitems[a].name=e.allitems[a].code}})},batchRule:function(){this.allShow=!1,this.batchVisible=!0,this.getAllDatas()},batchBack:function(){this.allShow=!0,this.batchVisible=!1,this.getAssignList()},handleDelete:function(e,t,a){var s=this;this.$confirm('<span style="color:#f00;">该操作将删除该事项信息</span>，确定删除吗?',"提示",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var e={cid:a};Object(d.j)(e,function(e){0==e.data.code?(s.$message({message:"删除成功",type:"success"}),s.getAssignList()):s.$message({message:"删除失败",type:"error"})})}).catch(function(){s.$message({message:"取消删除",type:"warning"})})},dataRemove:function(e,t){var a=e.response.obj;this.filedatas.splice(this.removeArr(this.filedatas,a),1),this.errorShow=!1,this.successShow=!1,this.sureImport=!0},handleExceed:function(e,t){this.$message.warning({message:"当前限制只能上传 1 个文件，请先删除已上传的文件，再重新上传！",duration:5e3})},dataSuccess:function(e,t){if(-1==e.code)this.errorShow=!0,this.successShow=!1,this.sureImport=!0;else{this.successShow=!0,this.errorShow=!1,this.sureImport=!1;var a=e.obj;this.filedatas.push(a),this.getAssignList()}},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="xls"===t,s="xlsx"===t;return a||s||this.$message({message:"上传文件只能是 xls、xlsx格式!",type:"warning"}),a||s},loadData:function(){this.pdatalist=[],this.filedatas=[],this.sureImport=!0,this.errorShow=!1,this.successShow=!1,this.importdataVisible=!0},sureImportData:function(){this.$refs.uploaddata.submit(),this.importdataVisible=!1,this.$message({type:"success",message:"导入成功!"})},downMoudle:function(){window.open(this.defaturl+"/templateDownload/projectTemplateDown")},totalstateChange:function(e,t){var a=this,s={totalstatus:t.totalstatus,checkid:t.id};Object(d.i)(s,function(e){a.getAssignList(),a.$message({type:"success",message:"修改状态成功!"})})},formstateChange:function(e,t){var a=this,s={formstatus:t.formstatus,checkid:t.id};Object(d.h)(s,function(e){a.getAssignList(),a.$message({type:"success",message:"修改状态成功!"})})},totalstatusFormat:function(e,t){switch(t){case 0:return"正常";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},numberFormatter:function(e,t,a,s){return s+1+(this.currentPage-1)*this.pageSize},getLeaderList:function(){var e=this;Object(L.G)("",function(t){e.leaderUsers=t.data.obj})},browerHeight:function(){var e=document.body.clientHeight,t=e-380,a=e-280,s=e-320,i=e-250;this.batchHeight=i+"px",this.tableHeight=t+"px",this.addheight="height:"+t+"px",this.addheight2="height:"+a+"px",this.histableHeight=s+"px"},hiddenDatas:function(){var e=this,t={userid:this.loginid,catagory:1};Object(L.B)(t,function(t){e.cellhidden=t.data.obj,e.showItems()})},selectChange:function(){this.$forceUpdate()},showItems:function(){this.ishidden1=!0,this.ishidden2=!0,this.ishidden3=!0,this.ishidden4=!0,this.ishidden5=!0,this.ishidden6=!0,this.ishidden7=!0;for(var e=0;e<this.cellhidden.length;e++){switch(this.cellhidden[e]){case 1:this.ishidden1=!1;break;case 2:this.ishidden2=!1;break;case 3:this.ishidden3=!1;break;case 4:this.ishidden4=!1;break;case 5:this.ishidden5=!1;break;case 6:this.ishidden6=!1;break;case 7:this.ishidden7=!1}}},itemChange:function(){var e=this;this.$forceUpdate(),0==this.cellhidden.length?this.colums="":1==this.cellhidden.length?this.colums=this.cellhidden[0]+",":this.colums=this.cellhidden.join(",");var t={colums:this.colums,userId:this.loginid,catagory:1};Object(L.o)(t,function(t){e.hiddenDatas(),e.showItems(),e.colums=""})},limitChange:function(){if(null!==this.assignCheckList)for(var e=0;e<this.assignCheckList.length;e++){switch(this.assignCheckList[e]){case"B-add":this.isAddShow=!0;break;case"B-edit":this.isEditShow=!0;break;case"B-report":this.isReportShow=!0;break;case"B-over":this.isOverShow=!0;break;case"B-down":this.isDownShow=!0}}},passValue:function(){this.astatus=this.$route.query.astatus,0==this.astatus||3==this.astatus||4==this.astatus||-1==this.astatus?this.astatus=this.$route.query.astatus:this.astatus="",this.filters.totalstatus=this.astatus},getDeptlist:function(){var e=this;Object(L.e)("",function(t){e.deptlist=t.data.obj})},getUsers:function(){var e=this;Object(L.f)("",function(t){e.userlist=t.data.obj})},getAssignList:function(){var e=this;this.loading=!1;var t=this.filters;t.userid=this.loginid,t.pageNum=this.currentPage,t.pageSize=this.pageSize,t.totalstatus=this.astatus,Object(d.e)(t,function(t){if(null==t.data.obj);else{e.totals=t.data.obj.total,e.assignDatas=t.data.obj.datas;var a="";null==e.assignDatas&&(e.assignDatas=[]);for(var s=0;s<e.assignDatas.length;s++)a=null==e.assignDatas[s].leaderNameList?"":(a=e.assignDatas[s].leaderNameList).join("，"),e.assignDatas[s].leaderNameList=a;e.showItems()}})},handleSizeChange:function(e){this.pageSize=e,this.getAssignList()},handleCurrentChange:function(e){this.currentPage=e,this.getAssignList()},handleBack:function(){this.isShow=!0,this.addShow=!1,this.detailShow=!1,this.editShow=!1},getDatas:function(){var e=this;this.loading=!0;var t=this.filters;t.userid=this.loginid,t.pageNum=this.currentPage,t.pageSize=this.pageSize,Object(d.e)(t,function(t){if(null==t.data.obj)e.loading=!1,e.totals=0,e.assignDatas=[];else{e.totals=t.data.obj.total,e.assignDatas=t.data.obj.datas,e.showItems();for(var a="",s="",i=0;i<e.assignDatas.length;i++)s=null==e.assignDatas[i].leaderNames?"":(s=e.assignDatas[i].leaderNames).split("+"),e.assignDatas[i].leaderNames=s;for(var l=0;l<e.assignDatas.length;l++)a=null==e.assignDatas[l].meetName?"":(a=e.assignDatas[l].meetName).split("+"),e.assignDatas[l].meetName=a;for(var r=0;r<e.assignDatas.length;r++){var n=String(e.assignDatas[r].agentname);if("null"==n){var o=n.replace("null","");e.assignDatas[r].agentname=o}else{o=n.replace(",null","");e.assignDatas[r].agentname=o}}e.loading=!1}})},handleLag:function(e,t){var a=this;4==e.status?this.$message({message:"已设置严重滞后"}):this.$confirm("确定设置为严重滞后吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={checkid:t};Object(d.s)(e,function(e){a.$message({type:"success",message:"操作成功!"}),a.getAssignList()})}).catch(function(){a.$message({type:"info",message:"取消操作"})})},overReceipt:function(e,t){var a=this;-1==e.status?this.$message({message:"已完结"}):this.$confirm("此操作将完结该事项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={checkid:t};Object(d.f)(e,function(e){a.$message({type:"success",message:"完结成功!"}),a.getAssignList()})}).catch(function(){a.$message({type:"info",message:"取消完结"})})},resetForm:function(e){var t=this;this.$refs[e].resetFields(),this.filters.status="";var a={userid:this.loginid,pageNum:this.currentPage,pageSize:this.pageSize,status:""};Object(d.e)(a,function(e){t.totals=e.data.obj.total,t.assignDatas=e.data.obj.datas,t.showItems();for(var a="",s="",i=0;i<t.assignDatas.length;i++)s=null==t.assignDatas[i].leaderNames?"":(s=t.assignDatas[i].leaderNames).split("+"),t.assignDatas[i].leaderNames=s;for(var l=0;l<t.assignDatas.length;l++)a=null==t.assignDatas[l].meetName?"":(a=t.assignDatas[l].meetName).split("+"),t.assignDatas[l].meetName=a;for(var r=0;r<t.assignDatas.length;r++){var n=String(t.assignDatas[r].agentname);if("null"==n){var o=n.replace("null","");t.assignDatas[r].agentname=o}else{o=n.replace(",null","");t.assignDatas[r].agentname=o}}})},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},tableRowClassName:function(e){var t=e.row;e.rowIndex;if(-1==t.totalstatus)return"noedit"},centerDetail:function(){if(void 0==this.$route.query.checkid)this.checkid="",this.isCenter=3,this.getAssignList();else{this.checkid=this.$route.query.checkid,this.isCenter=this.$route.query.isCenter,this.aid=this.$route.query.checkid;var e={checkid:this.checkid};Object(d.l)(e,function(e){});var t={checkId:this.checkid};this.isShow=!1,this.detailShow=!0,this.fileArr=[],this.detailFuc(t)}},detailFuc:function(e){var t=this;Object(d.c)(e,function(e){t.assignDetailData=e.data.obj,t.basicInfo.code=t.assignDetailData.code,t.basicInfo.starttime=new Date(t.assignDetailData.starttime),t.basicInfo.tasksource=t.assignDetailData.tasksource,t.basicInfo.jobrequire=t.assignDetailData.jobrequire,t.basicInfo.status=t.assignDetailData.totalstatus,null==e.data.obj.arealeadidList&&(e.data.obj.arealeadidList=[]),t.basicInfo.arealeadids=e.data.obj.arealeadidList,t.basicInfo.leaderids=e.data.obj.leaderidList,t.leadsData=t.assignDetailData.leaderList,t.dutysData=t.assignDetailData.dutyList,null==t.assignDetailData.receiptList&&(t.assignDetailData.receiptList=[]),t.newReportList=t.assignDetailData.receiptList;for(var a=0;a<t.newReportList.length;a++){t.newReportList[a].newFiles=[];var s=t.newReportList[a].filepath;if(""==s||null==s)t.newReportList[a].newFiles=[];else{""==(s=s.split(","))[(n=s.length)-1]&&s.splice(n-1,1);for(var i=s,l=0;l<i.length;l++){(c={}).url=t.imgIp+i[l],c.name=i[l],t.newReportList[a].newFiles.push(c)}}}var r=e.data.obj.filepath;if(null==r)t.fileArr=[];else{var n,o=r.split(",");""==o[(n=o.length)-1]&&o.splice(n-1,1);var d=o;for(l=0;l<d.length;l++){var c;if("undefined"==d[l]);else(c={}).url=t.imgIp+d[l],c.name=d[l],t.fileArr.push(c)}}t.checkReceipt=t.assignDetailData.checkReceipt,null==t.checkReceipt&&(t.checkReceipt={}),null==t.leadsData&&(t.leadsData=[]),null==t.dutysData&&(t.dutysData=[]),t.checkMeetList=t.assignDetailData.checkMeetList,t.ruleList=t.assignDetailData.checkRuleList,t.isShow=!1,t.detailShow=!0})},handleDetail:function(e,t,a){this.checkid=a;var s={checkid:a};Object(d.l)(s,function(e){}),this.aid=a,this.fileArr=[];var i={checkId:a};-1==t.totalstatus?this.noEdit=!1:this.noEdit=!0,this.detailFuc(i)},editFuc:function(e){var t=this;Object(d.c)(e,function(e){t.detailAssignData=e.data.obj,t.basicInfo.code=t.detailAssignData.code,t.basicInfo.id=t.detailAssignData.id,t.basicInfo.starttime=new Date(t.detailAssignData.starttime),t.basicInfo.tasksource=t.detailAssignData.tasksource,t.basicInfo.jobrequire=t.detailAssignData.jobrequire,null==e.data.obj.arealeadidList&&(e.data.obj.arealeadidList=[]),t.basicInfo.arealeadids=e.data.obj.arealeadidList,t.leadsData=t.detailAssignData.leaderList,t.dutysData=t.detailAssignData.dutyList,null==t.detailAssignData.receiptList&&(t.detailAssignData.receiptList=[]),t.newReportList=t.detailAssignData.receiptList;for(var a=0;a<t.newReportList.length;a++){t.newReportList[a].newFiles=[];var s=t.newReportList[a].filepath;if(""==s||null==s)t.newReportList[a].newFiles=[];else{""==(s=s.split(","))[(n=s.length)-1]&&s.splice(n-1,1);for(var i=s,l=0;l<i.length;l++){(c={}).url=t.imgIp+i[l],c.name=i[l],t.newReportList[a].newFiles.push(c)}}}var r=e.data.obj.filepath;if(null==r)t.fileArr=[];else{var n,o=r.split(",");""==o[(n=o.length)-1]&&o.splice(n-1,1);var d=o;for(l=0;l<d.length;l++){var c;if("undefined"==d[l]);else(c={}).url=t.imgIp+d[l],c.name=d[l],t.fileArr.push(c)}}t.checkReceipt=t.assignDetailData.checkReceipt,null==t.checkReceipt&&(t.checkReceipt={}),null==t.leadsData&&(t.leadsData=[]),null==t.dutysData&&(t.dutysData=[]),t.checkMeetList=t.detailAssignData.checkMeetList,t.ruleList=t.detailAssignData.checkRuleList,t.isShow=!1,t.editShow=!0})},toeditPage:function(){this.detailShow=!1,this.fileArr=[];var e={checkId:this.checkid,userId:this.loginid};this.ccid=this.checkid,this.editFuc(e)},handleEdit:function(e,t,a){this.fileArr=[];var s={checkId:a,userId:this.loginid};this.ccid=a,this.editFuc(s)},handleAdd:function(){this.isShow=!1,this.addShow=!0},redetailFuc:function(e){var t=this;Object(d.c)({checkId:e},function(e){t.reportBasic=e.data.obj;var a=e.data.obj.arealeadNameList;null==a&&(a=[]),t.reportBasic.leadername=a.join(",");var s=e.data.obj.leaderList,i=[];if(null==s)i=[];else for(var l=0;l<s.length;l++)i.push(s[l].deptName);t.reportBasic.leaderDeptName=i.join(", ")})},handleReport:function(e,t,a){var s=this;this.checkid=a,this.filepath=[],this.fileList=[],this.reportData={},this.isExport.visible=!0,Object(d.q)({userid:this.loginid,checkid:a},function(e){s.laststate=e.data.obj.question}),this.redetailFuc(a);var i={};i.checkid=a,i.userid=this.loginid,Object(C.l)(i,function(e){if(null==e.data.obj){var t={userid:s.loginid,termid:a,modeltype:2};Object(L.L)(t,function(e){var t=e.data.obj;if(null==t)s.reportData={userid:s.loginid},s.reportid=-1;else{s.isExport.visible=!1,s.reportid=t.id,s.reportData={userid:s.loginid,question:t.question,measure:t.plan,wenti:t.problem,remark:t.remark};var a=t.filepath,i={};if(null==a||""==a)s.fileList=[],s.fileArr=[];else{var l;l=(a=a.replace(/,$/gi,"")).split(",");for(var r=0;r<l.length;r++)i.name=l[r],i.url=s.imgIp+l[r],s.fileList.push(i),s.fileArr.push(i.name)}}s.reportVisible.visible=!0})}else s.$confirm("<span style='color:#f00;'>已重复报送</span>，确定继续报送吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!1,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){s.reportData.userid=s.loginid,s.reportVisible.visible=!0,s.reportData.question=e.data.obj.question,s.reportData.measure=e.data.obj.measure,s.reportData.wenti=e.data.obj.wenti,s.reportData.remark=e.data.obj.remark;var t=e.data.obj.filepath,a={};if(null==t||""==t)s.fileList=[],s.filepath=[];else{var i;i=(t=t.replace(/,$/gi,"")).split(",");for(var l=0;l<i.length;l++)a.name=i[l],a.url=s.imgIp+i[l],s.fileList.push(a),s.filepath.push(a.name)}}).catch(function(){s.$message({type:"info",message:"取消报送"}),s.reportVisible.visible=!1})})},removeArr:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1},handleRemove:function(e,t){var a=e.name;this.filepath.splice(this.removeArr(this.filepath,a),1)},handleSuccess:function(e,t){this.filepath.push(e.obj)},saveReport:function(){var e=this;this.$refs.reportChild.$refs.reportData.validate(function(t){if(t){if(0==e.fileArr.length)"";else 1==e.fileArr.length?e.fileArr[0]+",":e.fileArr.join(",");var a=e.reportData;a.problem=e.reportData.wenti,a.plan=e.reportData.measure,-1==e.reportid||(a.id=e.reportid),a.modeltype=2,a.filepath="",a.termid=e.checkid,Object(L.N)(a,function(t){e.$message({type:"success",message:"保存成功"}),e.reportVisible=!1})}})},submitReport:function(){var e=this;this.$refs.reportChild.$refs.reportData.validate(function(t){if(!t)return!1;var a="";e.fileArr==[]?a="":1==e.fileArr.length?a+=e.fileArr[0]+",":a=e.fileArr.join(","),e.reportData.filepath=a;var s=e.reportData;s.filepath=a,s.checkid=e.checkid,s.userid=e.loginid,s.validate=0,Object(d.b)(s,function(t){e.$alert("<span style='color:#f00;'>报送成功</span>，请等待上级部门审核通过","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"我知道了",type:"success",center:!0,modal:!1}),e.reportVisible=!1,e.fileList=[],e.getAssignList(),e.reportData={}})})}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap assignlist"},[e.allShow?a("div",[e._m(0),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},[a("el-row",[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,size:"small"}},[a("el-form-item",{staticClass:"lb",attrs:{label:"编号：",prop:"checkCode"}},[a("el-input",{attrs:{placeholder:"请输入","auto-complete":"off"},model:{value:e.filters.checkCode,callback:function(t){e.$set(e.filters,"checkCode",t)},expression:"filters.checkCode"}})],1),e._v(" "),a("el-form-item",{staticClass:"lb",attrs:{label:"牵头单位：",prop:"leaderDeptId"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.leaderDeptId,callback:function(t){e.$set(e.filters,"leaderDeptId",t)},expression:"filters.leaderDeptId"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"zt",attrs:{label:"材料报送：",prop:"formstatus"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.formstatus,callback:function(t){e.$set(e.filters,"formstatus",t)},expression:"filters.formstatus"}},e._l(e.formStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticClass:"zt",attrs:{label:"总体进度：",prop:"totalstatus"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.totalstatus,callback:function(t){e.$set(e.filters,"totalstatus",t)},expression:"filters.totalstatus"}},e._l(e.totalStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getDatas("filters")}}},[e._v("搜 索")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("filters")}}},[e._v("重 置")])],1),e._v(" "),a("div",{staticClass:"toolbtns"},[a("div",[e.isAddShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新 增")]):e._e(),e._v(" "),e.isDownShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.checkDownload}},[e._v("报表下载")]):e._e(),e._v(" "),e.isEditShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.batchRule}},[e._v("报送规则")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"选择隐藏列：",prop:"cellhidden"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"全部"},on:{change:e.itemChange},model:{value:e.cellhidden,callback:function(t){e.cellhidden=t},expression:"cellhidden"}},e._l(e.showitemlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{"empty-text":"无",border:"",data:e.assignDatas,"highlight-current-row":"","cell-class-name":e.cellClassName,"row-class-name":e.tableRowClassName,"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)"}},[a("el-table-column",{attrs:{label:"序号",width:"60",formatter:e.numberFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",width:"120",label:"编号","class-name":"bh"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"title",on:{click:function(a){e.handleDetail(t.$index,t.row,t.row.id)}}},[e._v(e._s(t.row.code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"checkMeetList",label:"督办事项"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.checkMeetList,function(t,s){return a("p",{key:s},[e._v("("+e._s(s+1)+") "+e._s(t.remark))])})),e._v(" "),a("div",e._l(t.row.checkMeetList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v("("+e._s(s+1)+")"+e._s(t.remark))])}))])]}}])}),e._v(" "),e.ishidden1?a("el-table-column",{attrs:{prop:"jobrequire",label:"工作要求"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},[a("p",[e._v(e._s(t.row.jobrequire))])]),e._v(" "),a("p",{staticClass:"title-ellipsis"},[e._v(e._s(t.row.jobrequire))])])]}}])}):e._e(),e._v(" "),e.ishidden2?a("el-table-column",{attrs:{prop:"leaderList",label:"牵头单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",e._l(t.row.leaderList,function(t,s){return a("p",{key:s},[e._v(e._s(t.deptName))])}))]}}])}):e._e(),e._v(" "),e.ishidden3?a("el-table-column",{attrs:{prop:"dutyList",label:"责任单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",e._l(t.row.dutyList,function(t,s){return a("p",{key:s},[e._v(e._s(t.deptName))])}))]}}])}):e._e(),e._v(" "),e.ishidden7?a("el-table-column",{attrs:{prop:"arealeadNameList",label:"牵头区领导"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",e._l(t.row.arealeadNameList,function(t,s){return a("p",{key:s},[e._v(e._s(t))])}))]}}])}):e._e(),e._v(" "),e.ishidden4?a("el-table-column",{attrs:{prop:"receiptList",label:"总体情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.receiptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])})),e._v(" "),a("div",e._l(t.row.receiptList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.question))])}))])],1)]}}])}):e._e(),e._v(" "),e.ishidden5?a("el-table-column",{attrs:{prop:"receiptList",label:"存在问题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.receiptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])})),e._v(" "),a("div",e._l(t.row.receiptList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.wenti))])}))])],1)]}}])}):e._e(),e._v(" "),e.ishidden6?a("el-table-column",{attrs:{prop:"receiptList",label:"下步工作计划"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.receiptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])})),e._v(" "),a("div",e._l(t.row.receiptList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.measure))])}))])],1)]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"材料报送"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalstatus",label:"总体进度"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEditShow?a("div",{staticClass:"flexbox editbtns"},[3==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):4==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#7c1d77"}}):-1==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("el-select",{staticClass:"stateSelect",on:{change:function(a){e.totalstateChange(t,t.row)}},model:{value:t.row.totalstatus,callback:function(a){e.$set(t.row,"totalstatus",a)},expression:"scope.row.totalstatus"}},e._l(e.totalStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})})),e._v(" "),a("div",{staticClass:"nomask"})],1):a("div",[a("el-tag",{attrs:{size:"medium"}},[3==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):4==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#7c1d77"}}):-1==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.totalstatusFormat(t,t.row.totalstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail(t.$index,t.row,t.row.id)}}},[e._v("详情")]),e._v(" "),e.isEditShow?a("el-button",{staticClass:"btn nobtn",on:{click:function(a){e.handleEdit(t.$index,t.row,t.row.id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.isEditShow?a("el-button",{staticClass:"btn nobtn",on:{click:function(a){e.handleDelete(t.$index,t.row,t.row.id)}}},[e._v("删除")]):e._e(),e._v(" "),e.isReportShow?a("el-button",{staticClass:"btn nobtn",on:{click:function(a){e.handleReport(t.$index,t.row,t.row.id)}}},[e._v("进展汇报")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":e.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:e.totals},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]):e._e(),e._v(" "),a("div",{staticClass:"import-data-box"},[a("import-file",{attrs:{importdataVisible:e.importdataVisible,upbtnDisabled:e.upbtnDisabled,showYearbox:e.showYearbox,itemShow:e.itemShow},on:{"update:importdataVisible":function(t){e.importdataVisible=t},"update:upbtnDisabled":function(t){e.upbtnDisabled=t},"getAllList-event":e.getAssignList}})],1),e._v(" "),a("el-dialog",{attrs:{title:"选择下载格式",visible:e.downTypeVisible,width:"400px"},on:{"update:visible":function(t){e.downTypeVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-radio-group",{model:{value:e.downType,callback:function(t){e.downType=t},expression:"downType"}},[a("el-radio",{attrs:{label:1}},[e._v("Excel")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"56px"},attrs:{label:2}},[e._v("Word")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.downDatalist}},[e._v("确 定")])],1)]),e._v(" "),e.addShow?a("div",{staticClass:"project-box"},[a("add-assign",{attrs:{addheight:e.addheight,deptlist:e.deptlist,leaderUsers:e.leaderUsers},on:{"my-event":e.handleBack,updateList:e.getAssignList}})],1):e._e(),e._v(" "),e.editShow?a("div",{staticClass:"project-box"},[a("edit-assign",{attrs:{deptlist:e.deptlist,basicInfo:e.basicInfo,checkMeetList:e.checkMeetList,addheight:e.addheight,ruleList:e.ruleList,leaderUsers:e.leaderUsers,checkReceipt:e.checkReceipt,ccid:e.ccid,leadsData:e.leadsData,dutysData:e.dutysData,newReportList:e.newReportList,fileArr:e.fileArr},on:{"my-event":e.handleBack,updateList:e.getAssignList}})],1):e._e(),e._v(" "),e.detailShow?a("div",{staticClass:"project-box"},[a("detail-assign",{attrs:{basicInfo:e.basicInfo,addheight2:e.addheight2,checkMeetList:e.checkMeetList,deptlist:e.deptlist,histableHeight:e.histableHeight,aid:e.aid,ruleList:e.ruleList,leaderUsers:e.leaderUsers,checkReceipt:e.checkReceipt,isEditShow:e.isEditShow,noEdit:e.noEdit,leadsData:e.leadsData,dutysData:e.dutysData,newReportList:e.newReportList,fileArr:e.fileArr,isCenter:e.isCenter},on:{"my-event":e.handleBack,"edit-event":e.toeditPage}})],1):e._e(),e._v(" "),a("div",{staticClass:"report-data-box"},[a("report-progress",{attrs:{reportVisible:e.reportVisible,reportData:e.reportData,laststate:e.laststate,itemShow:e.itemShow,workid:e.checkid,reportBasic:e.reportBasic,fileList:e.fileList,fileArr:e.fileArr,isExport:e.isExport},on:{"update:reportVisible":function(t){e.reportVisible=t},"update:fileList":function(t){e.fileList=t},"update:fileArr":function(t){e.fileArr=t},"update:isExport":function(t){e.isExport=t},"getAllList-event":e.getAssignList}})],1),e._v(" "),e.batchVisible?a("div",{staticClass:"batchrule-box"},[a("batch-rule",{attrs:{batchHeight:e.batchHeight,allitems:e.allitems,itemShow:e.itemShow},on:{"my-back":e.batchBack}})],1):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"navtitle"},[t("span",[this._v("批交办事项")])])}]};var R=a("VU/8")($,I,!1,function(e){a("sHgB")},null,null);t.default=R.exports},dpKc:function(e,t){},oqZT:function(e,t){},sHgB:function(e,t){}});
//# sourceMappingURL=10.d5d0633dc67711495778.js.map