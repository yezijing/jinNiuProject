webpackJsonp([23],{"5+Ss":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("woOf"),l=o.n(a),r=o("GXH0"),i=o.n(r),s=(o("DmJO"),o("P9l9")),n={name:"departmentManage",components:{Treeselect:i.a},data:function(){return{props:{},orangizes:[],types:[],users:[],currentPage:1,pageSize:10,totals:0,addFormRules:{name:[{required:!0,message:"请输入部门名称",trigger:"change"}],orgid:[{required:!0,message:"请选择组织机构",trigger:"change"}]},filters:{},tableData:[],editForm:{},addForm:{},lookForm:{},editFormVisible:!1,addFormVisible:!1,lookFormVisible:!1,conlist:["街道经济发展服务中心","功能区推进办"]}},mounted:function(){},created:function(){this.getDeptlist(),this.getDepttype(),this.getOrganize(),this.getUsers()},methods:{selectChange:function(){this.$forceUpdate()},formatter:function(e,t,o,a){return a+1+(this.currentPage-1)*this.pageSize},getUsers:function(){var e=this;Object(s.f)("",function(t){e.users=t.data.obj})},getDeptlist:function(){var e=this,t=this.filters;t.pageSize=this.pageSize,t.pageNum=this.currentPage,Object(s.k)(t,function(t){e.tableData=t.data.obj.datas,e.totals=t.data.obj.total})},handleSizeChange:function(e){this.pageSize=e,this.getDeptlist()},handleCurrentChange:function(e){this.currentPage=e,this.getDeptlist()},getDepttype:function(){var e=this;Object(s.l)("",function(t){e.types=t.data.obj})},getOrganize:function(){var e=this;Object(s.J)("",function(t){e.orangizes=t.data.obj})},getValue:function(e){this.valueId=e},getDatas:function(){var e=this,t=this.filters;t.pageSize=this.pageSize,t.pageNum=this.currentPage,Object(s.k)(t,function(t){e.tableData=t.data.obj.datas,e.totals=t.data.obj.total})},resetForm:function(e){this.$refs[e].resetFields(),this.getDeptlist()},handleAdd:function(){this.addFormVisible=!0,this.addForm={iskey:"1"}},changeMenu:function(){this.$refs.addForm.validateField("higher")},handleEdit:function(e,t){var o=this,a={lid:t.id};Object(s.m)(a,function(e){o.editForm=e.data.obj,o.editForm.iskey=String(e.data.obj.iskey),o.editFormVisible=!0})},handleLook:function(e,t){var o=this,a={lid:t.id};Object(s.m)(a,function(e){console.log(e),o.lookForm=e.data.obj,o.lookForm.iskey=String(e.data.obj.iskey),o.lookFormVisible=!0})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;var o=l()({},e.addForm);Object(s.a)(o,function(t){-1==t.data.code?e.$message({message:"部门名字重复，请重新编辑!",type:"error"}):(e.$message({message:"提交成功",type:"success"}),e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getDeptlist())},function(){e.$message({message:"提交失败",type:"error"})})})},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;var o=l()({},e.editForm);o.parent_leader=o.lid,Object(s.n)(o,function(t){-1==t.data.code?e.$message({message:"部门名字重复，请重新编辑!",type:"error"}):(e.$message({message:"编辑成功",type:"success"}),e.editFormVisible=!1,e.$refs.editForm.resetFields(),e.getDeptlist())},function(){e.$message({message:"提交失败",type:"error"})})})},handleDel:function(e,t){var o=this;this.$confirm('<span style="color:#f00;">将删除该部门信息</span>，确定删除吗?',"提示",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var e={lid:t.id};Object(s.i)(e,function(e){o.$message({message:"删除成功",type:"success"}),o.getDeptlist()},function(){o.$message({message:"删除失败",type:"error"})})}).catch(function(){o.$message({message:"取消删除",type:"warning"})})}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content-wrap setting setting2"},[e._m(0),e._v(" "),o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,size:"small"}},[o("el-form-item",{attrs:{label:"部门名称：",prop:"dname"}},[o("el-input",{attrs:{placeholder:"请输入","auto-complete":"off"},model:{value:e.filters.dname,callback:function(t){e.$set(e.filters,"dname",t)},expression:"filters.dname"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"组织机构：",prop:"orgid"}},[o("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.orgid,callback:function(t){e.$set(e.filters,"orgid",t)},expression:"filters.orgid"}},e._l(e.orangizes,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.getDatas}},[e._v("搜索")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("filters")}}},[e._v("重置")])],1),e._v(" "),o("div",{staticClass:"toolbtns"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),o("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,"highlight-current-row":""}},[o("el-table-column",{attrs:{label:"序号",width:"100",formatter:e.formatter}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"部门名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"nickname",label:"简称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"orgName",label:"组织机构"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){e.handleLook(t.$index,t.row)}}},[e._v("详情")]),e._v(" "),o("el-button",{attrs:{type:"info",size:"small"},on:{click:function(o){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:e.totals},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),o("el-dialog",{attrs:{title:"编辑部门",visible:e.editFormVisible,width:"780px"},on:{"update:visible":function(t){e.editFormVisible=t}}},[o("el-form",{ref:"editForm",attrs:{inline:!0,model:e.editForm,rules:e.addFormRules,"label-width":"140px",size:"small"}},[o("el-form-item",{attrs:{label:"部门名称：",prop:"name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"简称：",prop:"nickname"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.nickname,callback:function(t){e.$set(e.editForm,"nickname",t)},expression:"editForm.nickname"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"组织机构：",prop:"orgid"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.editForm.orgid,callback:function(t){e.$set(e.editForm,"orgid",t)},expression:"editForm.orgid"}},e._l(e.orangizes,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"部门电话：",prop:"deptphone"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.deptphone,callback:function(t){e.$set(e.editForm,"deptphone",t)},expression:"editForm.deptphone"}})],1),e._v(" "),o("el-form-item",{staticClass:"yesno",attrs:{label:"重点经济承办单位：",prop:"iskey"}},[o("el-radio",{attrs:{label:"0"},model:{value:e.editForm.iskey,callback:function(t){e.$set(e.editForm,"iskey",t)},expression:"editForm.iskey"}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:"1"},model:{value:e.editForm.iskey,callback:function(t){e.$set(e.editForm,"iskey",t)},expression:"editForm.iskey"}},[e._v("否")])],1),e._v(" "),o("el-form-item",{attrs:{label:"承办单位类别：",prop:"deptcategory"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.deptcategory,callback:function(t){e.$set(e.editForm,"deptcategory",t)},expression:"editForm.deptcategory"}},e._l(e.conlist,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),o("el-form-item",{staticClass:"works",attrs:{label:"工作职责：",prop:"duty"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入"},model:{value:e.editForm.duty,callback:function(t){e.$set(e.editForm,"duty",t)},expression:"editForm.duty"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.editSubmit("editForm")}}},[e._v("保存")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"详情",visible:e.lookFormVisible,width:"780px"},on:{"update:visible":function(t){e.lookFormVisible=t}}},[o("el-form",{ref:"lookForm",attrs:{size:"small",inline:!0,model:e.lookForm,"label-width":"140px"}},[o("el-form-item",{attrs:{label:"部门名称："}},[o("el-input",{attrs:{readonly:""},model:{value:e.lookForm.name,callback:function(t){e.$set(e.lookForm,"name",t)},expression:"lookForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"简称："}},[o("el-input",{attrs:{readonly:""},model:{value:e.lookForm.nickname,callback:function(t){e.$set(e.lookForm,"nickname",t)},expression:"lookForm.nickname"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"组织机构："}},[o("el-input",{attrs:{readonly:""},model:{value:e.lookForm.orgName,callback:function(t){e.$set(e.lookForm,"orgName",t)},expression:"lookForm.orgName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"部门电话："}},[o("el-input",{attrs:{readonly:""},model:{value:e.lookForm.deptphone,callback:function(t){e.$set(e.lookForm,"deptphone",t)},expression:"lookForm.deptphone"}})],1),e._v(" "),o("el-form-item",{staticClass:"yesno",attrs:{label:"重点经济承办单位：",prop:"iskey"}},[o("el-radio",{attrs:{label:"0",readonly:""},model:{value:e.lookForm.iskey,callback:function(t){e.$set(e.lookForm,"iskey",t)},expression:"lookForm.iskey"}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:"1",readonly:""},model:{value:e.lookForm.iskey,callback:function(t){e.$set(e.lookForm,"iskey",t)},expression:"lookForm.iskey"}},[e._v("否")])],1),e._v(" "),o("el-form-item",{attrs:{label:"承办单位类别：",prop:"deptcategory"}},[o("el-input",{attrs:{readonly:""},model:{value:e.lookForm.deptcategory,callback:function(t){e.$set(e.lookForm,"deptcategory",t)},expression:"lookForm.deptcategory"}})],1),e._v(" "),o("el-form-item",{staticClass:"works",attrs:{label:"工作职责：",prop:"duty"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:2},readonly:""},model:{value:e.lookForm.duty,callback:function(t){e.$set(e.lookForm,"duty",t)},expression:"lookForm.duty"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.lookFormVisible=!1}}},[e._v("确定")])],1)],1),e._v(" "),o("el-dialog",{staticClass:"userbox",attrs:{title:"新增部门",visible:e.addFormVisible,width:"780px"},on:{"update:visible":function(t){e.addFormVisible=t}}},[o("el-form",{ref:"addForm",attrs:{inline:!0,model:e.addForm,rules:e.addFormRules,"label-width":"140px",size:"small"}},[o("el-form-item",{attrs:{label:"部门名称：",prop:"name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"简称：",prop:"nickname"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.nickname,callback:function(t){e.$set(e.addForm,"nickname",t)},expression:"addForm.nickname"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"组织机构：",prop:"orgid"}},[o("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.addForm.orgid,callback:function(t){e.$set(e.addForm,"orgid",t)},expression:"addForm.orgid"}},e._l(e.orangizes,function(e){return o("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"部门电话：",prop:"deptphone"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.deptphone,callback:function(t){e.$set(e.addForm,"deptphone",t)},expression:"addForm.deptphone"}})],1),e._v(" "),o("el-form-item",{staticClass:"yesno",attrs:{label:"重点经济承办单位：",prop:"iskey"}},[o("el-radio",{attrs:{label:"0"},model:{value:e.addForm.iskey,callback:function(t){e.$set(e.addForm,"iskey",t)},expression:"addForm.iskey"}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:"1"},model:{value:e.addForm.iskey,callback:function(t){e.$set(e.addForm,"iskey",t)},expression:"addForm.iskey"}},[e._v("否")])],1),e._v(" "),o("el-form-item",{attrs:{label:"承办单位类别：",prop:"deptcategory"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.deptcategory,callback:function(t){e.$set(e.addForm,"deptcategory",t)},expression:"addForm.deptcategory"}},e._l(e.conlist,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),o("el-form-item",{staticClass:"works",attrs:{label:"工作职责：",prop:"duty"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入"},model:{value:e.addForm.duty,callback:function(t){e.$set(e.addForm,"duty",t)},expression:"addForm.duty"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addSubmit("addForm")}}},[e._v("新增")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"navtitle"},[t("span",[this._v("部门管理")])])}]};var m=o("VU/8")(n,d,!1,function(e){o("biD4")},null,null);t.default=m.exports},biD4:function(e,t){}});
//# sourceMappingURL=23.0f192be6234572d15af9.js.map