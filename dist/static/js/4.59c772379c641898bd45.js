webpackJsonp([4],{"2FzU":function(e,t){},"2no7":function(e,t){},"3UwD":function(e,t){},FI7t:function(e,t){},"IlA/":function(e,t){},KYKD:function(e,t){},RkB1:function(e,t){},Ynj6:function(e,t){},aJxu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),l=a("mvHQ"),r=a.n(l),n=a("woOf"),o=a.n(n),d=a("uu+V"),c=a("s64f"),u={props:["leaderlist","deptlist","addheight","yearid"],components:{},data:function(){return{loginid:JSON.parse(this.$store.getters.userdata).id,checkAll:!1,checkedItems:[],allitems:[],isIndeterminate:!1,choosenum:0,hasitem:[],basicInfo:{},years:[],yearShow:!1,yearname:"",bitemShow:!1,sitemShow:!1,threeShow:!1,fourShow:!1,unitShow:!1,bitemname:"",sitemname:"",fourname:"",threename:"",unitname:"",addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:0,biglist:[],minlist:[],addLeadVisible:!1,addDutyVisible:!1,leadsData:[],dutysData:[],addLeadData:{},addDutyData:{},taskTitle:"",threeitemList:[],fouritemList:[],seeunitList:[],ruleList:[],ruleVisible:!1,ruleTitle:"",ruleBtn:"",addRuleForm:{cycletype:1},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],dateShow1:!0,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",cycleNum:1,ruleIndex:-1,submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}]}},created:function(){this.getyear(),this.basicInfo={yearid:this.yearid},this.getBiglist(),this.getbigterm()},methods:{getSeerList:function(){var e=this;this.$forceUpdate(),Object(d.L)("",function(t){e.seeunitList=t.data.obj})},newUnit:function(){var e=this,t={name:this.unitname};Object(d.h)(t,function(t){e.unitShow=!1,e.$message({message:"新增成功",type:"success"}),e.unitname="",e.getSeerList()})},weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},getAllDatas:function(){var e=this;Object(d.y)({typemodel:this.typemodel},function(t){null==t.data.obj?e.allitems=[]:e.allitems=t.data.obj})},handleCheckAllChange:function(e){for(var t=[],a=0;a<this.allitems.length;a++)t.push(this.allitems[a].id);this.choosenum=e?t.length:0,this.checkedItems=e?t:[],this.isIndeterminate=!1},handleCheckedItemsChange:function(e){this.choosenum=e.length;var t=e.length;this.checkAll=t===this.allitems.length,this.isIndeterminate=t>0&&t<this.allitems.length},selectChange:function(){this.$forceUpdate()},ctypeFormat:function(e,t){switch(t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},addRuleBtn:function(){this.ruleVisible=!0,this.ruleTitle="新增报送规则",this.ruleBtn="新增",this.changeNum="add",this.addRuleForm={cycletype:1},this.cycleChange()},addRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);a.widList=e.checkedItems,e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),a.typemodel=e.typemodel,e.ruleList.push(a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},editRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="编辑报送规则",this.ruleBtn="保存",this.changeNum="edit",this.addRuleForm=o()({},t),this.ruleIndex=e},editRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;e.cycleNum=e.addRuleForm.cycletype;var a=o()({},e.addRuleForm);1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.splice(e.ruleIndex,1,a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleIndex=-1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},delRuleBtn:function(e,t){this.ruleList.splice(e,1),this.ruleVisible=!1,this.$message({message:"删除成功",type:"success"})},submitRule:function(){"add"==this.changeNum?this.addRuleSubmit():this.editRuleSubmit()},addLead:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增牵头单位",this.readOn=!1,this.addLeadVisible=!0},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},handleEdit2:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑牵头单位",this.readOn=!1,this.addLeadVisible=!0,this.addLeadData=o()({},t),this.tindex=e},submitLead:function(){"read"==this.changeNum?this.addLeadVisible=!1:"add"==this.changeNum?this.addLeadSubmit():this.editLeadSubmit()},deptChange:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addLeadData.deptid){e=this.deptlist[t].name;break}this.addLeadData.deptname=e},addLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);a.typemodel=e.typemodel,console.log(a),e.leadsData.push(a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1,console.log(e.leadsData)})},editLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return console.log("error"),!1;var a=o()({},e.addLeadData);e.leadsData.splice(e.tindex,1,a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},handleDelete2:function(e,t){this.leadsData.splice(e,1),this.$refs.addLeadData.resetFields(),this.addLeadVisible=!1,this.$message({message:"删除成功",type:"success"})},addDuty:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增责任单位",this.readOn=!1,this.addDutyVisible=!0},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},handleEdit3:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑责任单位",this.readOn=!1,this.addDutyVisible=!0,this.addDutyData=o()({},t),this.tindex=e},submitDuty:function(){"read"==this.changeNum?this.addDutyVisible=!1:"add"==this.changeNum?this.addDutySubmit():this.editDutySubmit()},deptChange2:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addDutyData.deptid){e=this.deptlist[t].name;break}this.addDutyData.deptname=e},addDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);a.typemodel=e.typemodel,e.dutysData.push(a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},editDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.splice(e.tindex,1,a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},handleDelete3:function(e,t){this.dutysData.splice(e,1),this.$refs.addDutyData.resetFields(),this.addDutyVisible=!1,this.$message({message:"删除成功",type:"success"})},goback:function(){var e=this;this.$confirm("<span style='color:#f00;'>数据未保存</span>，确定返回列表吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("my-event"),e.getyear()}).catch(function(){return!1})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},newYear:function(){var e=this,t={year:this.yearname};Object(d.k)(t,function(t){e.yearShow=!1,e.$message({message:"新增成功",type:"success"}),e.getyear(),e.yearname=""})},getbigterm:function(){var e=this;Object(c.z)("",function(t){e.biglist=t.data.obj,null==e.biglist&&(e.biglist=[])})},addBigSubmit:function(){this.biglist.push({workname:this.bitemname}),this.bitemShow=!1,this.$message({message:"新增成功",type:"success"})},getBiglist:function(){var e=this;Object(c.H)("",function(t){e.minlist=t.data.obj})},addSubterm:function(){this.minlist.push({nodeplan:this.sitemname}),this.sitemShow=!1,this.$message({message:"新增成功",type:"success"}),this.sitemname=""},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},submitAll:function(){var e=this;this.$refs.basicInfo.validate(function(t){if(t){var a=e.basicInfo;a.secondwork=e.basicInfo.secondwork.join(",");var s=e.basicInfo.aleaders;s=0==s.length?"":1==s.length?s[0]+",":s.join(","),a.dutyleaderid=s;for(var i="",l=0;l<e.years.length;l++)if(e.basicInfo.yearid==e.years[l].id){i=e.years[l].year;break}a.createuser=e.loginid,a.year=i;var n={tripleWorkProgress:a};n.tripleWorkProgressLeadDeptList=e.leadsData,n.tripleWorkProgressDutyDeptList=e.dutysData,n.tripleWorkProgressRuleList=e.ruleList,n=r()(n),Object(c.d)(n,function(t){if(-2==t.data.code)e.$message({message:"新增失败！",type:"error"});else if(0==t.data.code){var a={workid:t.data.obj};Object(c.i)(a,function(a){Object(c.O)({workid:t.data.obj},function(t){e.$emit("my-event"),e.$emit("add-event"),e.$message({message:"新增成功",type:"success"})})})}else e.$message({message:"新增失败",type:"error"}),e.$emit("my-event"),e.$emit("add-event")})}})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")])],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight},[a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent boxcontent0"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"120px",size:"small",model:e.basicInfo}},[a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"年度：",prop:"yearid",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.basicInfo.yearid,callback:function(t){e.$set(e.basicInfo,"yearid",t)},expression:"basicInfo.yearid"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"jiabtn"},[a("i",{staticClass:"icon el-icon-circle-plus",on:{click:function(t){e.yearShow=!0}}}),e._v(" "),e.yearShow?a("div",{staticClass:"awrap"},[a("p",[e._v("新增年度")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入年度名称"},model:{value:e.yearname,callback:function(t){e.yearname=t},expression:"yearname"}}),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{on:{click:function(t){e.yearShow=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.newYear}},[e._v("确定")])],1)],1):e._e()])],1),e._v(" "),a("div",{staticClass:"addbox addbox-area"},[a("el-form-item",{attrs:{label:"任务名称：",prop:"workname",rules:[{required:!0,message:"请输入任务名称",trigger:"change"}]}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.basicInfo.workname,callback:function(t){e.$set(e.basicInfo,"workname",t)},expression:"basicInfo.workname"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox addbox-area"},[a("el-form-item",{attrs:{label:"重要时间节点：",prop:"nodeplan"}},[a("el-input",{attrs:{rows:"3",type:"textarea",placeholder:"请输入"},model:{value:e.basicInfo.nodeplan,callback:function(t){e.$set(e.basicInfo,"nodeplan",t)},expression:"basicInfo.nodeplan"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"aleaders"}},[a("el-select",{staticClass:"item-select",attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.basicInfo.aleaders,callback:function(t){e.$set(e.basicInfo,"aleaders",t)},expression:"basicInfo.aleaders"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"督查单位：",prop:"secondwork"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},on:{focus:function(t){e.getSeerList()}},model:{value:e.basicInfo.secondwork,callback:function(t){e.$set(e.basicInfo,"secondwork",t)},expression:"basicInfo.secondwork"}},e._l(e.seeunitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1)])],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{width:"100%"}},[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addRuleBtn}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"244px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.editRuleBtn(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.delRuleBtn(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addLead}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"200px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptname",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit2(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete2(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addDuty}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,"highlight-current-row":"",height:"200px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptname",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit3(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete3(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.goback}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitAll}},[e._v("新 增")])],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:e.ruleTitle,visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,"label-width":"93px",inline:!0,"append-to-body":!0,size:"small"}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptid",rules:[{required:!0,message:"请选择牵头单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.addLeadData.deptid,callback:function(t){e.$set(e.addLeadData,"deptid",t)},expression:"addLeadData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptid",rules:[{required:!0,message:"请选择责任单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",readonly:e.readOn,placeholder:"请选择"},on:{change:e.deptChange2},model:{value:e.addDutyData.deptid,callback:function(t){e.$set(e.addDutyData,"deptid",t)},expression:"addDutyData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(u,h,!1,function(e){a("FI7t")},null,null).exports,p={props:["leaderlist","deptlist","basicInfo","addheight","leadsData","dutysData","ruleList","urlIp","upfile","workid","newReportList","lastprogress","years"],components:{},data:function(){var e;return e={userid:JSON.parse(this.$store.getters.userdata).id,checkAll:!1,checkedItems:[],allitems:[],isIndeterminate:!1,choosenum:0,hasitem:[],yearShow:!1,yearname:"",bitemShow:!1,sitemShow:!1,threeShow:!1,fourShow:!1,unitShow:!1,bitemname:"",sitemname:"",fourname:"",threename:"",unitname:"",addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:-1,biglist:[],minlist:[]},i()(e,"readOn",!1),i()(e,"addLeadData",{}),i()(e,"addDutyData",{}),i()(e,"taskTitle",""),i()(e,"ruleVisible",!1),i()(e,"dateShow1",!1),i()(e,"dateShow2",!1),i()(e,"dateShow3",!1),i()(e,"dateShow4",!1),i()(e,"dateShow5",!1),i()(e,"region",""),i()(e,"monthday",""),i()(e,"quarter",""),i()(e,"weekday",""),i()(e,"daytime",""),i()(e,"ruleTitle",""),i()(e,"ruleBtn",""),i()(e,"cycleNum",0),i()(e,"addRuleForm",{cycletype:1}),i()(e,"weekList",[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}]),i()(e,"submitType",[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}]),i()(e,"timeday",[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}]),i()(e,"ruleIndex",-1),i()(e,"fileList",[]),i()(e,"fileArr",[]),i()(e,"fouritemList",[]),i()(e,"seeunitList",[]),i()(e,"addLeadVisible",!1),i()(e,"addDutyVisible",!1),e},created:function(){this.getyear(),this.getBiglist(),this.getbigterm()},methods:{weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},getAllDatas:function(){var e=this;Object(d.y)({typemodel:this.typemodel},function(t){if(null==t.data.obj)e.allitems=[];else{e.allitems=t.data.obj;for(var a=0;a<e.allitems.length;a++)if(e.allitems[a].id==e.workid){e.allitems.splice(a,1);break}}})},handleCheckAllChange:function(e){for(var t=[],a=0;a<this.allitems.length;a++)t.push(this.allitems[a].id);this.choosenum=e?t.length:0,this.checkedItems=e?t:[],this.isIndeterminate=!1},handleCheckedItemsChange:function(e){this.choosenum=e.length;var t=e.length;this.checkAll=t===this.allitems.length,this.isIndeterminate=t>0&&t<this.allitems.length},removeArr:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1},handleRemove:function(e,t){var a=e.response.obj;this.fileArr.splice(this.removeArr(this.fileArr,a),1)},handlePreview:function(e){},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleSuccess:function(e,t){var a=e.obj;this.fileArr.push(a)},getThreeworkList:function(){var e=this;if(null==this.basicInfo.yearid||null==this.basicInfo.bigid||null==this.basicInfo.minid)this.$message({message:"请确定已选择年度、一级工作和二级工作！",type:"warning"});else{var t={bigid:this.basicInfo.bigid,yearid:this.basicInfo.yearid,minid:this.basicInfo.minid,typemodel:this.typemodel};Object(d.S)(t,function(t){e.threeitemList=t.data.obj})}},newThree:function(){var e=this;if(null==this.basicInfo.yearid||null==this.basicInfo.bigid||null==this.basicInfo.minid)this.$message({message:"请确定已选择年度、一级工作和二级工作！",type:"warning"});else{var t={bigid:this.basicInfo.bigid,yearid:this.basicInfo.yearid,minid:this.basicInfo.minid,partname:this.threename,typemodel:this.typemodel};addThreework(t,function(t){e.threeShow=!1,e.$message({message:"新增成功",type:"success"}),e.getThreeworkList(),e.threename=""})}},getSeerList:function(){var e=this;Object(d.L)("",function(t){e.seeunitList=t.data.obj})},newUnit:function(){var e=this,t={name:this.unitname};addSeer(t,function(t){e.unitShow=!1,e.$message({message:"新增成功",type:"success"}),e.unitname="",e.getSeerList()})},endtimeToTime:function(e,t){var a=new Date(e.endtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},ctypeFormat:function(e,t){switch(this.$forceUpdate(),t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},addRuleBtn:function(){this.ruleVisible=!0,this.ruleTitle="新增报送规则",this.ruleBtn="新增",this.changeNum="add",this.addRuleForm={cycletype:1},this.cycleChange()},addRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),a.typemodel=e.typemodel,e.ruleList.push(a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},editRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="编辑报送规则",this.ruleBtn="保存",this.changeNum="edit",this.addRuleForm=o()({},t),this.addRuleForm.daytime=new Date(this.addRuleForm.daytime),this.addRuleForm.starttime=new Date(this.addRuleForm.starttime),this.addRuleForm.endtime=new Date(this.addRuleForm.endtime),this.ruleIndex=e},editRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;e.cycleNum=e.addRuleForm.cycletype;var a=o()({},e.addRuleForm);1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.splice(e.ruleIndex,1,a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleIndex=-1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},delRuleBtn:function(e,t){this.ruleList.splice(e,1),this.ruleVisible=!1,this.$message({message:"删除成功",type:"success"})},submitRule:function(){"add"==this.changeNum?this.addRuleSubmit():this.editRuleSubmit()},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},addLead:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增牵头单位",this.readOn=!1,this.addLeadVisible=!0},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},handleEdit2:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑牵头单位",this.readOn=!1,this.addLeadVisible=!0,this.addLeadData=o()({},t),this.tindex=e},submitLead:function(){"read"==this.changeNum?this.addLeadVisible=!1:"add"==this.changeNum?this.addLeadSubmit():this.editLeadSubmit()},deptChange:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addLeadData.deptid){e=this.deptlist[t].name;break}this.addLeadData.deptName=e},addLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);a.typemodel=e.typemodel,e.leadsData.push(a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},editLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return console.log("error"),!1;var a=o()({},e.addLeadData);e.leadsData.splice(e.tindex,1,a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},handleDelete2:function(e,t){this.leadsData.splice(e,1),this.$refs.addLeadData.resetFields(),this.addLeadVisible=!1,this.$message({message:"删除成功",type:"success"})},addDuty:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增责任单位",this.readOn=!1,this.addDutyVisible=!0},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},handleEdit3:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑责任单位",this.readOn=!1,this.addDutyVisible=!0,this.addDutyData=o()({},t),this.tindex=e},submitDuty:function(){"read"==this.changeNum?this.addDutyVisible=!1:"add"==this.changeNum?this.addDutySubmit():this.editDutySubmit()},deptChange2:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addDutyData.deptid){e=this.deptlist[t].name;break}this.addDutyData.deptName=e},addDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);a.typemodel=e.typemodel,e.dutysData.push(a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},editDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.splice(e.tindex,1,a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},handleDelete3:function(e,t){this.dutysData.splice(e,1),this.$refs.addDutyData.resetFields(),this.addDutyVisible=!1,this.$message({message:"删除成功",type:"success"})},selectChange:function(){this.$forceUpdate()},timestampToTime:function(e,t){var a=new Date(e.submittime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()+" ")},goback:function(){var e=this;this.$confirm("<span style='color:#f00;'>数据未保存</span>，确定返回列表吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("my-event"),e.getyear()}).catch(function(){return!1})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},newYear:function(){var e=this,t={year:this.yearname};Object(d.k)(t,function(t){e.yearShow=!1,e.$message({message:"新增成功",type:"success"}),e.getyear(),e.yearname=""})},getbigterm:function(){var e=this;Object(c.z)("",function(t){e.biglist=t.data.obj})},addBigSubmit:function(){this.biglist.push({workname:this.bitemname}),this.bitemShow=!1,this.$message({message:"新增成功",type:"success"})},getBiglist:function(){var e=this;Object(c.H)("",function(t){e.minlist=t.data.obj})},addSubterm:function(){this.minlist.push({nodeplan:this.sitemname}),this.sitemShow=!1,this.$message({message:"新增成功",type:"success"}),this.sitemname=""},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},tableRowClassName:function(e){var t=e.row;e.rowIndex;return-1==t.status?"noedit":3==t.status?"lagbtn":void 0},submitAll:function(){var e=this;this.$refs.basicInfo.validate(function(t){if(t){var a=e.basicInfo.arealeadids;a=0==a.length?"":1==a.length?a[0]+",":a.join(",");for(var s="",i=0;i<e.years.length;i++)if(e.basicInfo.yearid==e.years[i].id){s=e.years[i].year;break}var l=e.basicInfo.secondwork.join(","),n={id:e.workid,yearid:e.basicInfo.yearid,workname:e.basicInfo.workname,nodeplan:e.basicInfo.nodeplan,secondwork:l,createuser:e.userid};n.dutyleaderid=a,n.year=s;var o={tripleWorkProgress:n};o.tripleWorkProgressLeadDeptList=e.leadsData,o.tripleWorkProgressDutyDeptList=e.dutysData,o.tripleWorkProgressRuleList=e.ruleList,o=r()(o),Object(c.r)(o,function(t){var a={workid:e.workid};Object(c.i)(a,function(t){Object(c.O)({workid:e.workid},function(t){e.$emit("my-event"),e.$emit("add-event"),e.$message({message:"编辑成功",type:"success"})})})})}})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")])],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight},[a("el-row",{staticClass:"box jibeninfo",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent editplanwrap"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"120px",size:"medium",model:e.basicInfo}},[a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"年度：",prop:"yearid",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{focus:e.getyear,change:e.selectChange},model:{value:e.basicInfo.yearid,callback:function(t){e.$set(e.basicInfo,"yearid",t)},expression:"basicInfo.yearid"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"jiabtn"},[a("i",{staticClass:"icon el-icon-circle-plus",on:{click:function(t){e.yearShow=!0}}}),e._v(" "),e.yearShow?a("div",{staticClass:"awrap"},[a("p",[e._v("新增")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.yearname,callback:function(t){e.yearname=t},expression:"yearname"}}),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{on:{click:function(t){e.yearShow=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.newYear}},[e._v("确定")])],1)],1):e._e()])],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"任务名称：",prop:"workname",rules:[{required:!0,message:"请输入任务名称",trigger:"change"}]}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.basicInfo.workname,callback:function(t){e.$set(e.basicInfo,"workname",t)},expression:"basicInfo.workname"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"重要时间节点：",prop:"nodeplan"}},[a("el-input",{attrs:{rows:"3",type:"textarea",placeholder:"请输入"},model:{value:e.basicInfo.nodeplan,callback:function(t){e.$set(e.basicInfo,"nodeplan",t)},expression:"basicInfo.nodeplan"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{staticClass:"ww1",attrs:{label:"牵头区领导：",prop:"arealeadids"}},[a("el-select",{attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.basicInfo.arealeadids,callback:function(t){e.$set(e.basicInfo,"arealeadids",t)},expression:"basicInfo.arealeadids"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"督查单位：",prop:"secondwork"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},on:{focus:function(t){e.getSeerList()}},model:{value:e.basicInfo.secondwork,callback:function(t){e.$set(e.basicInfo,"secondwork",t)},expression:"basicInfo.secondwork"}},e._l(e.seeunitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1)])],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{height:"100%"}},[a("legend",[e._v("进展汇报")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("div",{staticClass:"speed"},[a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("上次进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},[a("p",[e._v(e._s(e.lastprogress))])])]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("存在问题：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("下步工作计划：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])}))]),e._v(" "),a("div",{staticClass:"filelist"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),a("div",{staticClass:"list"},[a("div",e._l(e.newReportList,function(t,s){return a("div",{key:s},e._l(t.newFiles,function(t,i){return a("div",{key:i},[a("a",{staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])])}))}))])])])])])])],1),e._v(" "),a("el-row",{staticClass:"box"},[a("el-col",{attrs:{span:24}},[a("fieldset",[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addRuleBtn}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.starttime,"YYYY-MM-DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",formatter:e.endtimeToTime,label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.editRuleBtn(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.delRuleBtn(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addLead}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"报送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"small"}},[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit2(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete2(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addDuty}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit3(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete3(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.goback}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitAll}},[e._v("保 存")])],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:e.ruleTitle,visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,"label-width":"93px",size:"small",inline:!0,"append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptid",rules:[{required:!0,message:"请选择牵头单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.addLeadData.deptid,callback:function(t){e.$set(e.addLeadData,"deptid",t)},expression:"addLeadData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptid",rules:[{required:!0,message:"请选择责任单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",readonly:e.readOn,placeholder:"请选择"},on:{change:e.deptChange2},model:{value:e.addDutyData.deptid,callback:function(t){e.$set(e.addDutyData,"deptid",t)},expression:"addDutyData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(p,f,!1,function(e){a("2no7")},null,null).exports,v={props:["ddheight","leadsData","dutysData","isEditShow","noEdit","ruleList","nodeList","basicInfo","reportDetail","workid","histableHeight","newReportList","lastprogress","isCenter"],components:{},data:function(){return{addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:0,isHistoryShow:!1,isProgressShow:!1,historyData:[],progressData:[],isDetailShow:!0,addLeadVisible:!1,addDutyVisible:!1,taskTitle:"",addLeadData:{},addDutyData:{},ruleVisible:!1,ruleTitle:"",ruleBtn:"",addRuleForm:{cycletype:1},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}],dateShow1:!0,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",cycleNum:1,ruleIndex:-1}},created:function(){},methods:{weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},nullFormat:function(e,t){return"null"==t||null==t?"<span>/</span>":"<span>"+t+"</span>"},stateFormat:function(e,t){switch(t){case 2:return"未执行";case 1:return"执行中";case 0:return"失效"}},detailRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="报送规则详情",this.ruleBtn="确定",this.changeNum="detail",this.addRuleForm=o()({},t),this.addRuleForm.daytime=new Date(this.addRuleForm.daytime),this.addRuleForm.starttime=new Date(this.addRuleForm.starttime),this.addRuleForm.endtime=new Date(this.addRuleForm.endtime),this.ruleIndex=e},ctypeFormat:function(e,t){switch(t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},timestampToTime:function(e,t){new Date(e.stoptime);return e.stoptime|dateformat("YYYY-MM-DD HH:mm:ss")},enddateToTime:function(e,t){var a=new Date(e.endtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()+" ")},timestampToTime2:function(e,t){var a=new Date(e.createtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},toEdit:function(){this.$emit("edit-event")},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},submitLead:function(){this.addLeadVisible=!1},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},submitDuty:function(){this.addDutyVisible=!1},returnDetail:function(){this.isDetailShow=!0,this.isHistoryShow=!1},returnDetail2:function(){this.isDetailShow=!0,this.isProgressShow=!1},lookProgress:function(){var e=this,t={workid:this.workid};Object(c.w)(t,function(t){e.progressData=t.data.obj;for(var a=[],s=0;s<e.progressData.length;s++){var i=e.progressData[s].filepath,l=[];if(null==i)l=[];else{var r=(a=i.split(",")).length;""==a[r-1]&&a.splice(r-1,1);for(var n=a,o=0;o<n.length;o++){var d={};d.url=e.imgIp+n[o],d.name=n[o],l.push(d)}}e.progressData[s].filepath=l}}),this.isDetailShow=!1,this.isProgressShow=!0},goback:function(){1==this.isCenter?this.$router.push({path:"/index"}):2==this.isCenter?this.$router.push({path:"/personCenter"}):this.$emit("my-event")},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[e.isDetailShow?a("div",[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")]),e._v(" "),e.isEditShow?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.noEdit,expression:"noEdit"}],class:2==e.isCenter?"noeditbtn":"",attrs:{size:"small",type:"primary"},on:{click:e.toEdit}},[e._v("编辑")]):e._e()],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.ddheight},[a("el-row",{staticClass:"box jibeninfo",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-form",{ref:"basicInfo",attrs:{size:"small",model:e.basicInfo,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"年度：",prop:"yearname"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.yearname,callback:function(t){e.$set(e.basicInfo,"yearname",t)},expression:"basicInfo.yearname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务名称：",prop:"workname"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.workname,callback:function(t){e.$set(e.basicInfo,"workname",t)},expression:"basicInfo.workname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重要时间节点：",prop:"nodeplan"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2},readonly:""},model:{value:e.basicInfo.nodeplan,callback:function(t){e.$set(e.basicInfo,"nodeplan",t)},expression:"basicInfo.nodeplan"}})],1),e._v(" "),a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"leaders"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.leaders,callback:function(t){e.$set(e.basicInfo,"leaders",t)},expression:"basicInfo.leaders"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"督查单位：",prop:"secondwork"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.secondwork,callback:function(t){e.$set(e.basicInfo,"secondwork",t)},expression:"basicInfo.secondwork"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("进展填报")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{size:"small",type:"primary"},on:{click:e.lookProgress}},[e._v("报送历史")]),e._v(" "),a("div",{staticClass:"speed"},[a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("上次进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},[a("p",[e._v(e._s(e.lastprogress))])])]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("存在问题：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("下步工作计划：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])}))]),e._v(" "),a("div",{staticClass:"filelist"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),a("div",{staticClass:"list"},[a("div",e._l(e.newReportList,function(t,s){return a("div",{key:s},e._l(t.newFiles,function(t,i){return a("div",{key:i},[a("a",{staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])])}))}))])])])],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:24}},[a("fieldset",{staticStyle:{width:"100%"}},[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.starttime,"YYYY-MM-DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",formatter:e.enddateToTime,label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"medium"}},[1==t.row.status?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):0==t.row.status?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.stateFormat(t,t.row.status))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.detailRuleBtn(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo dtable",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"报送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"small"}},[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail2(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo dtable",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,height:"250px","highlight-current-row":"","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail3(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])])],1)],1)]):e._e(),e._v(" "),e.isProgressShow?a("div",{staticClass:"history"},[a("p",{staticClass:"title"},[e._v("历史进展汇报")]),e._v(" "),a("div",{staticClass:"hbtns"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.returnDetail2}},[e._v("返 回")])],1),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.progressData,"highlight-current-row":"",height:e.histableHeight}},[a("el-table-column",{attrs:{prop:"reportdept",label:"报送单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"报送时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.createtime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"question",label:"总体情况"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wenti",label:"存在问题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"measure",label:"下步工作计划"}}),e._v(" "),a("el-table-column",{attrs:{prop:"validate",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.validate?a("el-tag",{attrs:{type:"info","disable-transitions":""}},[a("span",[e._v("未审核")])]):1==t.row.validate?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[a("span",[e._v("审核未通过")])]):a("el-tag",{attrs:{type:"success","disable-transitions":""}},[a("span",[e._v("审核通过")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"审核不通过原因"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.nullFormat(t,t.row.reason))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filepath",label:"附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.filepath||""==t.row.filepath?a("p",[e._v("无")]):e._l(t.row.filepath,function(t,s){return a("a",{key:s,staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])})]}}])})],1)],1):e._e(),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:"详情",visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{readonly:"",placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{attrs:{readonly:""},model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",disabled:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{attrs:{readonly:""},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ruleVisible=!1}}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptName"}},[a("el-input",{model:{value:e.addLeadData.deptName,callback:function(t){e.$set(e.addLeadData,"deptName",t)},expression:"addLeadData.deptName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptName"}},[a("el-input",{model:{value:e.addDutyData.deptName,callback:function(t){e.$set(e.addDutyData,"deptName",t)},expression:"addDutyData.deptName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(v,y,!1,function(e){a("hltz")},null,null).exports,w=a("Vbf0"),_=a("qAgM"),k=a("Vi22"),D=a("P9l9"),S=a("y7k7"),x=a("4OxD"),C={name:"threePlan",components:{addKeywork:m,editKeywork:b,detailKeywork:g,reportProgress:w.a,batchRule:_.a,importFile:k.a},data:function(){var e;return e={downTypeVisible:!1,downType:"",upbtnDisabled:!0,showYearbox:!0,isExport:{visible:!0},isCenter:3,reportData:{},laststate:"",reportVisible:{visible:!1},itemShow:7,reportid:-1,reportBasic:{},allitems:[],batchHeight:"",batchVisible:!1,allShow:!0,chooseyear:{},otherdata:{},isShow:!0,addShow:!1,editShow:!1,detailShow:!1,processVisible:!1,deptlist:[],userlist:[],filters:{},years:[],statuss:[{value:0,status:"正常"},{value:1,status:"预警"},{value:2,status:"逾期"},{value:3,status:"滞后"},{value:4,status:"严重滞后"},{value:-1,status:"完结"}],tableData:[],bitemArr:[],bitemPos:0,sitemArr:[],sitemPos:0,threeArr:[],threePos:0},i()(e,"deptlist",[]),i()(e,"leaderlist",[]),i()(e,"processData",{}),i()(e,"evolveData",{}),i()(e,"fileList",[]),i()(e,"planCheckList",JSON.parse(this.$store.getters.userdata).planCheckList),i()(e,"loginid",JSON.parse(this.$store.getters.userdata).id),i()(e,"isAddShow",!1),i()(e,"isEditShow",!1),i()(e,"isReportShow",!1),i()(e,"isOverShow",!1),i()(e,"isDownShow",!1),i()(e,"isProcessShow",!1),i()(e,"tasklist",[]),i()(e,"upfile",""),i()(e,"urlIp",""),i()(e,"imgIp",""),i()(e,"fileArr",[]),i()(e,"pid",""),i()(e,"basicInfo",{}),i()(e,"workList",[]),i()(e,"astatus",""),i()(e,"cellhidden",[]),i()(e,"showitemlist",[{name:"牵头区领导",value:1},{name:"牵头单位",value:2},{name:"责任单位",value:3},{name:"进展情况",value:4},{name:"市上总体安排",value:5},{name:"存在问题",value:6},{name:"解决措施",value:7},{name:"协调解决事项",value:8}]),i()(e,"tableHeight","300px"),i()(e,"ishidden1",!0),i()(e,"ishidden2",!0),i()(e,"ishidden3",!0),i()(e,"ishidden4",!0),i()(e,"ishidden5",!0),i()(e,"ishidden6",!0),i()(e,"ishidden7",!0),i()(e,"ishidden8",!0),i()(e,"addheight","height:500px"),i()(e,"ddheight","height:500px"),i()(e,"histableHeight","300px"),i()(e,"colums",""),i()(e,"totalStatus",[{value:0,status:"正常"},{value:3,status:"滞后"},{value:4,status:"严重滞后"},{value:-1,status:"完结"}]),i()(e,"formStatus",[{value:0,status:"正常"},{value:1,status:"预警"},{value:2,status:"逾期"},{value:-1,status:"完结"}]),i()(e,"leadsData",[]),i()(e,"dutysData",[]),i()(e,"nodeList",[]),i()(e,"noEdit",!0),i()(e,"ruleList",[]),i()(e,"currentPage",1),i()(e,"pageSize",10),i()(e,"totals",0),i()(e,"workid",-1),i()(e,"reportDetail",{}),i()(e,"checkReceipt",{}),i()(e,"biglist",[]),i()(e,"minlist",[]),i()(e,"threeitemList",[]),i()(e,"newReportList",[]),i()(e,"defaturl",""),i()(e,"importdataVisible",{visible:!1}),i()(e,"pdatalist",[]),i()(e,"importKeyworkList",""),i()(e,"filedatas",[]),i()(e,"typemodel",2),i()(e,"loading",!0),i()(e,"curYear",2019),i()(e,"yearid",0),i()(e,"lastprogress",""),e},created:function(){this.upfile=x.j,this.imgIp=x.a,this.defaturl=S.a,this.importKeyworkList=x.e,this.hiddenDatas(),this.browerHeight(),this.isshowCheck(),this.getDeptlist(),this.getLeaderList(),this.getyear(),this.getThreePlan(),this.centerDetail()},methods:{keyworkDownload:function(){this.downTypeVisible=!0},downDatalist:function(){1==this.downType?window.open(this.defaturl+"/tripleWorkProgress/tripleWorkExportExcel"):window.open(this.defaturl+"/tripleWorkProgress/tripleWorkExport"),this.downTypeVisible=!1},getAllDatas:function(){var e=this;Object(c.u)("",function(t){if(null==t.data.obj)e.allitems=[];else{e.allitems=t.data.obj;for(var a=0;a<e.allitems.length;a++)e.allitems[a].name=e.allitems[a].workname}})},batchRule:function(){this.allShow=!1,this.batchVisible=!0,this.getAllDatas()},batchBack:function(){this.allShow=!0,this.batchVisible=!1,this.getThreePlan()},discountHeaderStyle:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(1==t)return{display:"none"}},typeSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===a){var s=this.bitemArr[t];return{rowspan:s,colspan:s>0?1:0}}if(1===a){var i=this.sitemArr[t];return{rowspan:i,colspan:i>0?1:0}}},merageInit:function(){this.bitemArr=[],this.bitemPos=0,this.sitemArr=[],this.sitemPos=0},merage:function(){this.merageInit();for(var e=0;e<this.tableData.length;e+=1)0==e?(this.bitemArr.push(1),this.bitemPos=0,this.sitemArr.push(1),this.sitemPos=0):(this.tableData[e].tripleWorkProgress.workname==this.tableData[e-1].tripleWorkProgress.workname?(this.bitemArr[this.bitemPos]+=1,this.bitemArr.push(0)):(this.bitemArr.push(1),this.bitemPos=e),this.tableData[e].tripleWorkProgress.nodeplan==this.tableData[e-1].tripleWorkProgress.nodeplan?(this.sitemArr[this.sitemPos]+=1,this.sitemArr.push(0)):(this.sitemArr.push(1),this.sitemPos=e))},handleDelete:function(e,t,a){var s=this;this.$confirm('<span style="color:#f00;">该操作将删除此条信息</span>，确定删除吗?',"提示",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var e={id:a};Object(c.o)(e,function(e){0==e.data.code?(s.$message({message:"删除成功",type:"success"}),s.getThreePlan()):s.$message({message:"删除失败",type:"error"})})}).catch(function(){s.$message({message:"取消删除",type:"warning"})})},namesChange:function(e,t){if(""==t||null==t)return"";var a=t;return a=a.replace(/,$/gi,"")},dataRemove:function(e,t){var a=e.response.obj;this.filedatas.splice(this.removeArr(this.filedatas,a),1)},handleExceed:function(e,t){this.$message.warning({message:"当前限制只能上传 1 个文件，请先删除已上传的文件，再重新上传！",duration:5e3})},hasYear:function(){this.upfileDisabled=!1},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="xls"===t,s="xlsx"===t;return a||s||this.$message({message:"上传文件只能是 xls、xlsx格式!",type:"warning"}),a||s},dataSuccess:function(e,t){if(-1==e.code)this.errorShow=!0,this.successShow=!1,this.sureImport=!0;else{this.successShow=!0,this.errorShow=!1,this.sureImport=!1;var a=e.obj;this.filedatas.push(a),this.getThreePlan()}},loadData:function(){this.importdataVisible.visible=!0,this.showYearbox=!0,this.upbtnDisabled=!1},sureImportData:function(){var e=this;this.$refs.chooseyear.validate(function(t){t&&(e.otherdata.year=parseInt(e.chooseyear.year),e.otherdata.createuser=e.loginid,e.$refs.uploaddata.submit(),e.importdataVisible=!1,e.$message({type:"success",message:"导入成功!"}),e.getThreePlan())})},downMoudle:function(){window.open(this.defaturl+"/templateDownload/tripleWorkImportTemplate")},numberFormatter:function(e,t,a,s){return s+1+(this.currentPage-1)*this.pageSize},tabsClick:function(e){this.activeClass=e},totalstateChange:function(e,t){var a=this,s={totalstatus:t.tripleWorkProgress.totalstatus,workid:t.tripleWorkProgress.id};Object(c.l)(s,function(e){a.getThreePlan(),a.$message({type:"success",message:"修改状态成功!"})})},totalstatusFormat:function(e,t){switch(t){case 0:return"正常";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},browerHeight:function(){var e=document.body.clientHeight,t=e-390,a=e-280,s=e-350,i=e-250;this.batchHeight=i+"px",this.tableHeight=t+"px",this.addheight="height:"+s+"px",this.ddheight="height:"+a+"px",this.histableHeight=s+"px"},hiddenDatas:function(){var e=this,t={userid:this.loginid,catagory:2,typemodel:this.typemodel};Object(D.B)(t,function(t){e.cellhidden=t.data.obj,e.showItems()})},selectChange:function(){this.$forceUpdate()},showItems:function(){this.ishidden1=!0,this.ishidden2=!0,this.ishidden3=!0,this.ishidden4=!0,this.ishidden5=!0,this.ishidden6=!0,this.ishidden7=!0,this.ishidden8=!0;for(var e=0;e<this.cellhidden.length;e++){switch(this.cellhidden[e]){case 1:this.ishidden1=!1;break;case 2:this.ishidden2=!1;break;case 3:this.ishidden3=!1;break;case 4:this.ishidden4=!1;break;case 5:this.ishidden5=!1;break;case 6:this.ishidden6=!1;break;case 7:this.ishidden7=!1;break;case 8:this.ishidden8=!1}}},itemChange:function(){var e=this;this.$forceUpdate(),0==this.cellhidden.length?this.colums="":1==this.cellhidden.length?this.colums=this.cellhidden[0]+",":this.colums=this.cellhidden.join(",");var t={colums:this.colums,userId:this.loginid,catagory:2};Object(D.o)(t,function(t){e.hiddenDatas(),e.showItems(),e.colums=""})},getThreePlan:function(){var e=this;this.loading=!0;var t=this.filters;t.userid=this.loginid,t.pageNum=this.currentPage,t.pageSize=this.pageSize,Object(c.B)(t,function(t){null==t.data.obj||t.data.obj==[]?(e.tableData=[],e.totals=0,e.loading=!1):(e.tableData=t.data.obj.datas,e.totals=t.data.obj.total,e.loading=!1)})},handleSizeChange:function(e){this.pageSize=e,this.getThreePlan()},handleCurrentChange:function(e){this.currentPage=e,this.getThreePlan()},isshowCheck:function(){if(null!==this.planCheckList)for(var e=0;e<this.planCheckList.length;e++){switch(this.planCheckList[e]){case"C-add":this.isAddShow=!0;break;case"C-edit":this.isEditShow=!0;break;case"C-report":this.isReportShow=!0;break;case"C-over":this.isOverShow=!0;break;case"C-down":this.isDownShow=!0;break;case"C-process":this.isProcessShow=!0}}},getDeptlist:function(){var e=this;Object(D.e)("",function(t){e.deptlist=t.data.obj})},getLeaderList:function(){var e=this;Object(D.G)("",function(t){e.leaderlist=t.data.obj})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},handleBack:function(){this.isShow=!0,this.addShow=!1,this.detailShow=!1,this.editShow=!1},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},tableRowClassName:function(e){var t=e.row;e.rowIndex;return-1==t.status?"noedit":4==t.status?"lagbtn":void 0},getDatas:function(){this.getThreePlan()},resetForm:function(e){this.$refs[e].resetFields(),this.getThreePlan()},redetailFuc:function(e){var t=this;Object(c.A)({workid:e},function(e){t.detailData=e.data.obj,t.reportBasic=t.detailData.tripleWorkProgress,t.reportBasic.yearname=t.detailData.tripleWorkProgress.year;var a=t.detailData.tripleWorkProgress.dutyleadname;if(null==a)t.reportBasic.leaders="";else{a=a.replace(/,$/gi,""),t.reportBasic.leaders=a}var s=e.data.obj.tripleWorkProgressLeadDeptList,i=[];if(null==s)i=[];else for(var l=0;l<s.length;l++)i.push(s[l].deptName);t.reportBasic.leaderDeptName=i.join(", ")})},handleEvolve:function(e,t){var a=this;this.reportData={},this.fileList=[],this.fileArr=[],this.laststate="",this.isExport.visible=!0,this.workid=t.tripleWorkProgress.id,this.redetailFuc(this.workid),Object(c.G)({workid:this.workid},function(e){null==e.data.obj?a.laststate="":a.laststate=e.data.obj.question});var s={};s.workid=this.workid,s.userid=this.loginid,Object(c.K)(s,function(e){if(1==e.data.obj)a.isExport.visible=!1,a.$confirm("<span style='color:#f00;'>已重复报送</span>，确定继续报送吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!1,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){a.reportVisible.visible=!0}).catch(function(){a.$message({type:"info",message:"取消报送"}),a.reportVisible.visible=!1});else{var t={userid:a.loginid,termid:a.workid,modeltype:7};Object(D.L)(t,function(e){var t=e.data.obj;if(null==t)a.reportData={userid:a.loginid},a.reportid=-1;else{a.isExport.visible=!1,a.reportid=t.id,a.reportData={userid:a.loginid,question:t.question,measure:t.plan,wenti:t.problem,remark:t.remark};var s=t.filepath,i={};if(null==s||""==s)a.fileList=[],a.fileArr=[];else{var l;l=(s=s.replace(/,$/gi,"")).split(",");for(var r=0;r<l.length;r++)i.name=l[r],i.url=a.imgIp+l[r],a.fileList.push(i),a.fileArr.push(i.name)}}a.reportVisible.visible=!0})}})},removeArr:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1},handleRemove:function(e,t){var a=e.response.obj;this.fileArr.splice(this.removeArr(this.fileArr,a),1)},handlePreview:function(e){},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleSuccess:function(e,t){var a=e.obj;this.fileArr.push(a)},saveReport:function(){var e=this;this.$refs.reportChild.$refs.reportData.validate(function(t){if(t){if(0==e.fileArr.length)"";else 1==e.fileArr.length?e.fileArr[0]+",":e.fileArr.join(",");var a=e.reportData;a.problem=e.reportData.wenti,a.plan=e.reportData.measure,-1==e.reportid||(a.id=e.reportid),a.modeltype=7,a.filepath="",a.termid=e.workid,Object(D.N)(a,function(t){e.$message({type:"success",message:"保存成功"}),e.isExport.visible=!1})}})},submitReport:function(){var e=this;this.$refs.reportChild.$refs.reportData.validate(function(t){if(t){var a="";e.fileArr==[]?a="":1==e.fileArr.length?a+=e.fileArr[0]+",":a=e.fileArr.join(",");var s=e.reportData;s.workid=e.workid,s.validate=0,s.userid=e.loginid,s.files=a,Object(c.f)(s,function(t){e.$alert("<span style='color:#f00;'>报送成功</span>，请等待上级部门审核通过","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"我知道了",type:"success",center:!0,modal:!1}),e.reportVisible=!1,e.getThreePlan()})}})},detailFuc:function(e){var t=this;Object(c.A)(e,function(e){t.detailData=e.data.obj,t.basicInfo=t.detailData.tripleWorkProgress,t.basicInfo.yearname=t.detailData.tripleWorkProgress.year;var a=t.detailData.tripleWorkProgress.dutyleadname;if(null==a)t.basicInfo.leaders="";else{a=a.replace(/,$/gi,""),t.basicInfo.leaders=a}t.leadsData=t.detailData.tripleWorkProgressLeadDeptList,t.dutysData=t.detailData.tripleWorkProgressDutyDeptList,t.ruleList=t.detailData.tripleWorkProgressRuleList,null==t.detailData.reportList&&(t.detailData.reportList=[]),t.newReportList=t.detailData.reportList;for(var s=0;s<t.newReportList.length;s++){t.newReportList[s].newFiles=[];var i=t.newReportList[s].filepath;if(""==i||null==i)t.newReportList[s].newFiles=[];else{var l=(i=i.split(",")).length;""==i[l-1]&&i.splice(l-1,1);var r=i;for(s=0;s<r.length;s++){var n={};n.url=t.imgIp+r[s],n.name=r[s],t.newReportList[s].newFiles.push(n)}}}Object(c.G)({workid:t.workid},function(e){null==e.data.obj?t.lastprogress="":t.lastprogress=e.data.obj.question})})},handleDetail:function(e,t,a){-1==t.tripleWorkProgress.totalstatus?this.noEdit=!1:this.noEdit=!0,this.isShow=!1,this.detailShow=!0,this.noEdit=!0,this.workid=a;var s={workid:a};this.detailFuc(s)},centerDetail:function(){if(void 0==this.$route.query.workid)this.workid="",this.isCenter=3,this.getThreePlan();else{if(0!=this.$route.query.sortnum)return!1;this.workid=this.$route.query.workid,this.isCenter=this.$route.query.isCenter,this.isShow=!1,this.detailShow=!0,this.noEdit=!0;var e={workid:this.workid};this.detailFuc(e)}},editFuc:function(e){var t=this;Object(c.A)(e,function(e){t.editShow=!0,t.isShow=!1,t.detailData=e.data.obj,t.basicInfo=t.detailData.tripleWorkProgress;var a=t.detailData.tripleWorkProgress.dutyleaderid,s=[];if(null==a||""==a?(s=[],t.basicInfo.arealeadids=[]):(s=a.split(","),t.basicInfo.arealeadids=s),console.log(t.basicInfo),t.leadsData=t.detailData.tripleWorkProgressLeadDeptList,t.dutysData=t.detailData.tripleWorkProgressDutyDeptList,t.ruleList=t.detailData.tripleWorkProgressRuleList,null==t.detailData.reportList&&(t.detailData.reportList=[]),t.newReportList=t.detailData.reportList,0==t.newReportList.length);else for(var i=0;i<t.newReportList.length;i++){t.newReportList[i].newFiles=[];var l=t.newReportList[i].filepath;if(""==l||null==l)t.newReportList[i].newFiles=[];else{var r=(l=l.split(",")).length;""==l[r-1]&&l.splice(r-1,1);var n=l;for(i=0;i<n.length;i++){var o={};o.url=t.imgIp+n[i],o.name=n[i],t.newReportList[i].newFiles.push(o)}}}null==t.leadsData&&(t.leadsData=[]),null==t.dutysData&&(t.dutysData=[]),null==t.ruleList&&(t.ruleList=[]),Object(c.G)({workid:t.workid},function(e){null==e.data.obj?t.lastprogress="":t.lastprogress=e.data.obj.question})})},toeditPage:function(){this.detailShow=!1;var e={workid:this.workid};this.basicInfo={},this.editFuc(e)},handleEdit:function(e,t,a){this.workid=a,this.basicInfo={};var s={workid:a};this.editFuc(s)},currentYear:function(){var e=new Date;this.curYear=e.getFullYear();for(var t=0;t<this.years.length;t++)this.curYear==this.years[t].year&&(this.yearid=this.years[t].id)},handleAdd:function(){this.currentYear(),this.isShow=!1,this.addShow=!0}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[e.allShow?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},[a("el-row",[a("el-col",{staticClass:"toolbar toolbar2",attrs:{span:24}},[a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,size:"small"}},[a("el-form-item",{staticClass:"zt",attrs:{label:"年度：",prop:"yearId"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.filters.yearId,callback:function(t){e.$set(e.filters,"yearId",t)},expression:"filters.yearId"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"ld",attrs:{label:"牵头区领导：",prop:"areaLeadId",filterable:""},on:{change:e.selectChange}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.filters.areaLeadId,callback:function(t){e.$set(e.filters,"areaLeadId",t)},expression:"filters.areaLeadId"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"ld",attrs:{label:"牵头单位：",prop:"leaderDeptId"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.leaderDeptId,callback:function(t){e.$set(e.filters,"leaderDeptId",t)},expression:"filters.leaderDeptId"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"zt",attrs:{label:"状态：",prop:"status"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},e._l(e.statuss,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getDatas("filters")}}},[e._v("搜 索")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("filters")}}},[e._v("重 置")])],1),e._v(" "),a("div",{staticClass:"toolbtns"},[a("div",[e.isAddShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新 增")]):e._e(),e._v(" "),e.isDownShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.keyworkDownload}},[e._v("报表下载")]):e._e(),e._v(" "),e.isAddShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.loadData}},[e._v("导入数据")]):e._e(),e._v(" "),e.isEditShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.batchRule}},[e._v("报送规则")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"选择隐藏列：",prop:"cellhidden"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"全部"},on:{change:e.itemChange},model:{value:e.cellhidden,callback:function(t){e.cellhidden=t},expression:"cellhidden"}},e._l(e.showitemlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":"无",border:"",height:e.tableHeight,"header-cell-style":e.discountHeaderStyle,"cell-class-name":e.cellClassName,"row-class-name":e.tableRowClassName,"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)"}},[a("el-table-column",{attrs:{label:"序号",width:"60",formatter:e.numberFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"tripleWorkProgress",label:"任务名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.tripleWorkProgress.workname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tripleWorkProgress",label:"重要时间节点"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"1.8"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.tripleWorkProgress.nodeplan))]),e._v(" "),a("p",{staticClass:"title-ellipsis title",on:{click:function(a){e.handleDetail(t.$index,t.row,t.row.tripleWorkProgress.id)}}},[e._v(e._s(t.row.tripleWorkProgress.nodeplan))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tripleWorkProgress",label:"督查单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.tripleWorkProgress.secondwork))])]}}])}),e._v(" "),e.ishidden1?a("el-table-column",{attrs:{prop:"workLeaderNames",label:"牵头区领导"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.namesChange(t,t.row.workLeaderNames))}})]}}])}):e._e(),e._v(" "),e.ishidden2?a("el-table-column",{attrs:{prop:"tripleWorkProgressLeadDeptList",label:"牵头单位"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.tripleWorkProgressLeadDeptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.deptName))])})}}])}):e._e(),e._v(" "),e.ishidden3?a("el-table-column",{attrs:{prop:"tripleWorkProgressDutyDeptList",label:"责任单位"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.tripleWorkProgressDutyDeptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.deptName))])})}}])}):e._e(),e._v(" "),e.ishidden4?a("el-table-column",{attrs:{prop:"reportList",label:"进展情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.reportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])})),e._v(" "),a("div",e._l(t.row.reportList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.question))])}))])],1)]}}])}):e._e(),e._v(" "),e.ishidden6?a("el-table-column",{attrs:{prop:"reportList",label:"存在问题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.reportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])})),e._v(" "),a("div",e._l(t.row.reportList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.wenti))])}))])],1)]}}])}):e._e(),e._v(" "),e.ishidden7?a("el-table-column",{attrs:{prop:"reportList",label:"解决措施"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.reportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])})),e._v(" "),a("div",e._l(t.row.reportList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.measure))])}))])],1)]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"tripleWorkProgress",label:"材料报送",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[1==t.row.tripleWorkProgress.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.tripleWorkProgress.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.tripleWorkProgress.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.tripleWorkProgress.formstatus))}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tripleWorkProgress",label:"总体进度",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEditShow?a("div",{staticClass:"flexbox"},[3==t.row.tripleWorkProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):4==t.row.tripleWorkProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#7c1d77"}}):-1==t.row.tripleWorkProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("el-select",{staticClass:"stateSelect",on:{change:function(a){e.totalstateChange(t,t.row)}},model:{value:t.row.tripleWorkProgress.totalstatus,callback:function(a){e.$set(t.row.tripleWorkProgress,"totalstatus",a)},expression:"scope.row.tripleWorkProgress.totalstatus"}},e._l(e.totalStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1):a("div",[3==t.row.tripleWorkProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):4==t.row.tripleWorkProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#7c1d77"}}):-1==t.row.tripleWorkProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.totalstatusFormat(t,t.row.tripleWorkProgress.totalstatus))}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"edit",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail(t.$index,t.row,t.row.tripleWorkProgress.id)}}},[e._v("详情")]),e._v(" "),e.isEditShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit(t.$index,t.row,t.row.tripleWorkProgress.id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.isEditShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete(t.$index,t.row,t.row.tripleWorkProgress.id)}}},[e._v("删除")]):e._e(),e._v(" "),e.isReportShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEvolve(t.$index,t.row)}}},[e._v("进展填报")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":e.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:e.totals},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"选择下载格式",visible:e.downTypeVisible,width:"400px"},on:{"update:visible":function(t){e.downTypeVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-radio-group",{model:{value:e.downType,callback:function(t){e.downType=t},expression:"downType"}},[a("el-radio",{attrs:{label:1}},[e._v("Excel")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"56px"},attrs:{label:2}},[e._v("Word")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.downDatalist}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"import-data-box"},[a("import-file",{attrs:{importdataVisible:e.importdataVisible,importFileList:e.importKeyworkList,showYearbox:e.showYearbox,itemShow:e.itemShow,upbtnDisabled:e.upbtnDisabled},on:{"update:importdataVisible":function(t){e.importdataVisible=t},"update:upbtnDisabled":function(t){e.upbtnDisabled=t},"getAllList-event":e.getThreePlan}})],1),e._v(" "),e.addShow?a("div",{staticClass:"project-box"},[a("add-keywork",{attrs:{deptlist:e.deptlist,leaderlist:e.leaderlist,addheight:e.addheight,yearid:e.yearid},on:{"my-event":e.handleBack,"add-event":e.getThreePlan}})],1):e._e(),e._v(" "),e.editShow?a("div",{staticClass:"project-box"},[a("edit-keywork",{attrs:{deptlist:e.deptlist,basicInfo:e.basicInfo,addheight:e.addheight,leadsData:e.leadsData,dutysData:e.dutysData,ruleList:e.ruleList,checkReceipt:e.checkReceipt,upfile:e.upfile,imgIp:e.imgIp,workid:e.workid,leaderlist:e.leaderlist,newReportList:e.newReportList,lastprogress:e.lastprogress,years:e.years},on:{"my-event":e.handleBack,"add-event":e.getThreePlan}})],1):e._e(),e._v(" "),e.detailShow?a("div",{staticClass:"project-box"},[a("detail-keywork",{attrs:{basicInfo:e.basicInfo,reportDetail:e.reportDetail,ruleList:e.ruleList,leadsData:e.leadsData,dutysData:e.dutysData,ddheight:e.ddheight,isEditShow:e.isEditShow,noEdit:e.noEdit,workid:e.workid,histableHeight:e.histableHeight,newReportList:e.newReportList,isCenter:e.isCenter,lastprogress:e.lastprogress},on:{"my-event":e.handleBack,"edit-event":e.toeditPage}})],1):e._e(),e._v(" "),a("div",{staticClass:"report-data-box"},[a("report-progress",{attrs:{reportVisible:e.reportVisible,reportData:e.reportData,laststate:e.laststate,itemShow:e.itemShow,workid:e.workid,reportBasic:e.reportBasic,fileList:e.fileList,fileArr:e.fileArr,isExport:e.isExport},on:{"update:reportVisible":function(t){e.reportVisible=t},"update:fileList":function(t){e.fileList=t},"update:fileArr":function(t){e.fileArr=t},"update:isExport":function(t){e.isExport=t},"getAllList-event":e.getThreePlan}})],1),e._v(" "),e.batchVisible?a("div",{staticClass:"batchrule-box"},[a("batch-rule",{attrs:{batchHeight:e.batchHeight,allitems:e.allitems,itemShow:e.itemShow},on:{"my-back":e.batchBack}})],1):e._e()],1)},staticRenderFns:[]};var $=a("VU/8")(C,L,!1,function(e){a("zPDu")},null,null).exports,R={props:["leaderlist","deptlist","addheight","typemodel","yearid","isImport"],components:{},data:function(){return{userid:JSON.parse(this.$store.getters.userdata).id,basicInfo:{},years:[],yearShow:!1,yearname:"",unitShow:!1,unitname:"",readOn:!1,changeNum:"",changeWord:"",tindex:0,addLeadVisible:!1,addDutyVisible:!1,leadsData:[],dutysData:[],addLeadData:{},addDutyData:{},taskTitle:"",seeunitList:[],ruleList:[],ruleVisible:!1,ruleTitle:"",ruleBtn:"",addRuleForm:{cycletype:1},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],dateShow1:!0,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",cycleNum:1,ruleIndex:-1,submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}]}},created:function(){this.getyear(),this.basicInfo={yearid:this.yearid}},methods:{weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},selectChange:function(){this.$forceUpdate()},ctypeFormat:function(e,t){switch(t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},addRuleBtn:function(){this.ruleVisible=!0,this.ruleTitle="新增报送规则",this.ruleBtn="新增",this.changeNum="add",this.addRuleForm={cycletype:1},this.cycleChange()},addRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),a.typemodel=e.typemodel,e.ruleList.push(a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},editRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="编辑报送规则",this.ruleBtn="保存",this.changeNum="edit",this.addRuleForm=o()({},t),this.ruleIndex=e},editRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.splice(e.ruleIndex,1,a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleIndex=-1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},delRuleBtn:function(e,t){this.ruleList.splice(e,1),this.ruleVisible=!1,this.$message({message:"删除成功",type:"success"})},submitRule:function(){"add"==this.changeNum?this.addRuleSubmit():this.editRuleSubmit()},addLead:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增牵头单位",this.readOn=!1,this.addLeadVisible=!0},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},handleEdit2:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑牵头单位",this.readOn=!1,this.addLeadVisible=!0,this.addLeadData=o()({},t),this.tindex=e},submitLead:function(){"read"==this.changeNum?this.addLeadVisible=!1:"add"==this.changeNum?this.addLeadSubmit():this.editLeadSubmit()},deptChange:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addLeadData.deptid){e=this.deptlist[t].name;break}this.addLeadData.deptname=e},addLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);e.leadsData.push(a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},editLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);e.leadsData.splice(e.tindex,1,a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},handleDelete2:function(e,t){this.leadsData.splice(e,1),this.$refs.addLeadData.resetFields(),this.addLeadVisible=!1,this.$message({message:"删除成功",type:"success"})},addDuty:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增责任单位",this.readOn=!1,this.addDutyVisible=!0},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},handleEdit3:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑责任单位",this.readOn=!1,this.addDutyVisible=!0,this.addDutyData=o()({},t),this.tindex=e},submitDuty:function(){"read"==this.changeNum?this.addDutyVisible=!1:"add"==this.changeNum?this.addDutySubmit():this.editDutySubmit()},deptChange2:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addDutyData.deptid){e=this.deptlist[t].name;break}this.addDutyData.deptname=e},addDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.push(a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},editDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.splice(e.tindex,1,a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},handleDelete3:function(e,t){this.dutysData.splice(e,1),this.$refs.addDutyData.resetFields(),this.addDutyVisible=!1,this.$message({message:"删除成功",type:"success"})},goback:function(){var e=this;this.$confirm("<span style='color:#f00;'>数据未保存</span>，确定返回列表吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("my-event"),e.getyear()}).catch(function(){return!1})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},newYear:function(){var e=this,t={year:this.yearname};Object(d.k)(t,function(t){e.yearShow=!1,e.$message({message:"新增成功",type:"success"}),e.getyear(),e.yearname=""})},getSeerList:function(){var e=this;this.$forceUpdate(),Object(d.L)("",function(t){e.seeunitList=t.data.obj})},newUnit:function(){var e=this,t={name:this.unitname};Object(d.h)(t,function(t){e.unitShow=!1,e.$message({message:"新增成功",type:"success"}),e.unitname="",e.getSeerList()})},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},submitAll:function(){var e=this;this.$refs.basicInfo.validate(function(t){if(t)if(e.leadsData==[])e.$message({message:"请添加牵头单位",type:"warning"});else{var a=e.basicInfo;0==a.arealeadids.length?a.arealeadids="":1==a.arealeadids.length?a.arealeadids=a.arealeadids[0]+",":a.arealeadids=a.arealeadids.join(",");for(var s="",i=0;i<e.years.length;i++)if(e.basicInfo.yearid==e.years[i].id){s=e.years[i].year;break}a.createuser=e.userid,a.year=s,a.superdept=a.superdept.join(",");var l={tripleAreaProgress:a};l.tripleAreaProgressLeadDeptList=e.leadsData,l.tripleAreaProgressDutyDeptList=e.dutysData,l.tripleAreaProgressRuleList=e.ruleList,l=r()(l),Object(c.b)(l,function(t){-2==t.data.code?e.$message({message:"新增失败！",type:"error"}):0==t.data.code?Object(c.g)({workid:t.data.obj},function(a){Object(c.M)({workid:t.data.obj},function(t){e.$emit("my-event"),e.$emit("add-event"),e.$message({message:"新增成功",type:"success"})})}):(e.$message({message:"新增失败",type:"error"}),e.$emit("my-event"),e.$emit("add-event"))})}})}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")])],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight},[a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent boxcontent0"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"110px",size:"small",model:e.basicInfo}},[a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"年度：",prop:"yearid",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.basicInfo.yearid,callback:function(t){e.$set(e.basicInfo,"yearid",t)},expression:"basicInfo.yearid"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"jiabtn"},[a("i",{staticClass:"icon el-icon-circle-plus",on:{click:function(t){e.yearShow=!0}}}),e._v(" "),e.yearShow?a("div",{staticClass:"awrap"},[a("p",[e._v("新增年度")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入年度名称"},model:{value:e.yearname,callback:function(t){e.yearname=t},expression:"yearname"}}),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{on:{click:function(t){e.yearShow=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.newYear}},[e._v("确定")])],1)],1):e._e()])],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"arealeadids"}},[a("el-select",{staticClass:"item-select",attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.basicInfo.arealeadids,callback:function(t){e.$set(e.basicInfo,"arealeadids",t)},expression:"basicInfo.arealeadids"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"addbox addbox-area"},[a("el-form-item",{attrs:{label:"具体片区：",prop:"nodeplan"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.basicInfo.nodeplan,callback:function(t){e.$set(e.basicInfo,"nodeplan",t)},expression:"basicInfo.nodeplan"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox addbox-area"},[a("el-form-item",{attrs:{label:"项目名称：",prop:"workname"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.basicInfo.workname,callback:function(t){e.$set(e.basicInfo,"workname",t)},expression:"basicInfo.workname"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox addbox-area"},[a("el-form-item",{attrs:{label:"重要时间节点：",prop:"timenode"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入",rows:"3"},model:{value:e.basicInfo.timenode,callback:function(t){e.$set(e.basicInfo,"timenode",t)},expression:"basicInfo.timenode"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"督查单位：",prop:"superdept"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},on:{focus:function(t){e.getSeerList()}},model:{value:e.basicInfo.superdept,callback:function(t){e.$set(e.basicInfo,"superdept",t)},expression:"basicInfo.superdept"}},e._l(e.seeunitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1)])],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{width:"100%"}},[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addRuleBtn}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"280px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.editRuleBtn(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.delRuleBtn(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addLead}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"200px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptname",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit2(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete2(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addDuty}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,"highlight-current-row":"",height:"200px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptname",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit3(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete3(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.goback}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitAll}},[e._v("新 增")])],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:e.ruleTitle,visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptid",rules:[{required:!0,message:"请选择牵头单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.addLeadData.deptid,callback:function(t){e.$set(e.addLeadData,"deptid",t)},expression:"addLeadData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptid",rules:[{required:!0,message:"请选择责任单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",readonly:e.readOn,placeholder:"请选择"},on:{change:e.deptChange2},model:{value:e.addDutyData.deptid,callback:function(t){e.$set(e.addDutyData,"deptid",t)},expression:"addDutyData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var I={props:["leaderlist","deptlist","basicInfo","partid","addheight","leadsData","dutysData","ruleList","urlIp","upfile","checkReceipt","workid","typemodel","newReportList","lastprogress","isImport"],components:{},data:function(){var e;return e={userid:JSON.parse(this.$store.getters.userdata).id,years:[],yearShow:!1,yearname:"",unitShow:!1,unitname:"",addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:-1},i()(e,"readOn",!1),i()(e,"addLeadData",{}),i()(e,"addDutyData",{}),i()(e,"taskTitle",""),i()(e,"ruleVisible",!1),i()(e,"dateShow1",!1),i()(e,"dateShow2",!1),i()(e,"dateShow3",!1),i()(e,"dateShow4",!1),i()(e,"dateShow5",!1),i()(e,"region",""),i()(e,"monthday",""),i()(e,"quarter",""),i()(e,"weekday",""),i()(e,"daytime",""),i()(e,"ruleTitle",""),i()(e,"ruleBtn",""),i()(e,"cycleNum",0),i()(e,"addRuleForm",{}),i()(e,"weekList",[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}]),i()(e,"submitType",[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}]),i()(e,"timeday",[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}]),i()(e,"ruleIndex",-1),i()(e,"fileList",[]),i()(e,"fileArr",[]),i()(e,"fouritemList",[]),i()(e,"seeunitList",[]),i()(e,"addLeadVisible",!1),i()(e,"addDutyVisible",!1),e},created:function(){this.getyear(),this.getSeerList()},methods:{weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},removeArr:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1},handleRemove:function(e,t){var a=e.response.obj;this.fileArr.splice(this.removeArr(this.fileArr,a),1)},handlePreview:function(e){},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleSuccess:function(e,t){var a=e.obj;this.fileArr.push(a)},getSeerList:function(){var e=this;Object(d.L)("",function(t){e.seeunitList=t.data.obj})},newUnit:function(){var e=this,t={name:this.unitname};Object(d.h)(t,function(t){e.unitShow=!1,e.$message({message:"新增成功",type:"success"}),e.unitname="",e.getSeerList()})},endtimeToTime:function(e,t){var a=new Date(e.endtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},ctypeFormat:function(e,t){switch(this.$forceUpdate(),t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},addRuleBtn:function(){this.ruleVisible=!0,this.ruleTitle="新增报送规则",this.ruleBtn="新增",this.changeNum="add"},addRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.push(a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},editRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="编辑报送规则",this.ruleBtn="保存",this.changeNum="edit",this.addRuleForm=o()({},t),this.addRuleForm.daytime=new Date(this.addRuleForm.daytime),this.addRuleForm.starttime=new Date(this.addRuleForm.starttime),this.addRuleForm.endtime=new Date(this.addRuleForm.endtime),this.ruleIndex=e},editRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.splice(e.ruleIndex,1,a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleIndex=-1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},delRuleBtn:function(e,t){this.ruleList.splice(e,1),this.ruleVisible=!1,this.$message({message:"删除成功",type:"success"})},submitRule:function(){"add"==this.changeNum?this.addRuleSubmit():this.editRuleSubmit()},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},addLead:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增牵头单位",this.readOn=!1,this.addLeadVisible=!0},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},handleEdit2:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑牵头单位",this.readOn=!1,this.addLeadVisible=!0,this.addLeadData=o()({},t),this.tindex=e},submitLead:function(){"read"==this.changeNum?this.addLeadVisible=!1:"add"==this.changeNum?this.addLeadSubmit():this.editLeadSubmit()},deptChange:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addLeadData.deptid){e=this.deptlist[t].name;break}this.addLeadData.deptName=e},addLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);e.leadsData.push(a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},editLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return console.log("error"),!1;var a=o()({},e.addLeadData);e.leadsData.splice(e.tindex,1,a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},handleDelete2:function(e,t){this.leadsData.splice(e,1),this.$refs.addLeadData.resetFields(),this.addLeadVisible=!1,this.$message({message:"删除成功",type:"success"})},addDuty:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增责任单位",this.readOn=!1,this.addDutyVisible=!0},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},handleEdit3:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑责任单位",this.readOn=!1,this.addDutyVisible=!0,this.addDutyData=o()({},t),this.tindex=e},submitDuty:function(){"read"==this.changeNum?this.addDutyVisible=!1:"add"==this.changeNum?this.addDutySubmit():this.editDutySubmit()},deptChange2:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addDutyData.deptid){e=this.deptlist[t].name;break}this.addDutyData.deptName=e},addDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.push(a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},editDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.splice(e.tindex,1,a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},handleDelete3:function(e,t){this.dutysData.splice(e,1),this.$refs.addDutyData.resetFields(),this.addDutyVisible=!1,this.$message({message:"删除成功",type:"success"})},selectChange:function(){this.$forceUpdate()},timestampToTime:function(e,t){var a=new Date(e.submittime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()+" ")},goback:function(){var e=this;this.$confirm("<span style='color:#f00;'>数据未保存</span>，确定返回列表吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("my-event"),e.getyear()}).catch(function(){return!1})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},newYear:function(){var e=this,t={year:this.yearname};Object(d.k)(t,function(t){e.yearShow=!1,e.$message({message:"新增成功",type:"success"}),e.getyear(),e.yearname=""})},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},tableRowClassName:function(e){var t=e.row;e.rowIndex;return-1==t.status?"noedit":3==t.status?"lagbtn":void 0},submitAll:function(){var e=this;this.$refs.basicInfo.validate(function(t){if(t){0==e.basicInfo.arealeadids.length?e.basicInfo.arealeadids="":1==e.basicInfo.arealeadids.length?e.basicInfo.arealeadids=e.basicInfo.arealeadids[0]+",":e.basicInfo.arealeadids=e.basicInfo.arealeadids.join(",");for(var a="",s=0;s<e.years.length;s++)if(e.basicInfo.yearid==e.years[s].id){a=e.years[s].year;break}e.basicInfo.year=a,e.basicInfo.createuser=e.userid,e.basicInfo.superdept=e.basicInfo.superdept.join(",");var i={tripleAreaProgress:e.basicInfo};i.tripleAreaProgressLeadDeptList=e.leadsData,i.tripleAreaProgressDutyDeptList=e.dutysData,i.tripleAreaProgressRuleList=e.ruleList,i.tripleAreaProgress.id=e.workid,i=r()(i),Object(c.p)(i,function(t){Object(c.g)({workid:e.workid},function(t){Object(c.M)({workid:e.workid},function(t){e.$emit("my-event"),e.$emit("add-event"),e.$message({message:"编辑成功",type:"success"})})})})}})}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")])],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight},[a("el-row",{staticClass:"box jibeninfo",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent editplanwrap"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"110px",size:"medium",model:e.basicInfo}},[a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"年度：",prop:"yearid",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{focus:e.getyear,change:e.selectChange},model:{value:e.basicInfo.yearid,callback:function(t){e.$set(e.basicInfo,"yearid",t)},expression:"basicInfo.yearid"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"jiabtn"},[a("i",{staticClass:"icon el-icon-circle-plus",on:{click:function(t){e.yearShow=!0}}}),e._v(" "),e.yearShow?a("div",{staticClass:"awrap"},[a("p",[e._v("新增")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.yearname,callback:function(t){e.yearname=t},expression:"yearname"}}),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{on:{click:function(t){e.yearShow=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.newYear}},[e._v("确定")])],1)],1):e._e()])],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{staticClass:"ww1",attrs:{label:"牵头区领导：",prop:"arealeadids"}},[a("el-select",{attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.basicInfo.arealeadids,callback:function(t){e.$set(e.basicInfo,"arealeadids",t)},expression:"basicInfo.arealeadids"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"具体片区：",prop:"nodeplan"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.basicInfo.nodeplan,callback:function(t){e.$set(e.basicInfo,"nodeplan",t)},expression:"basicInfo.nodeplan"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"项目名称：",prop:"workname"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.basicInfo.workname,callback:function(t){e.$set(e.basicInfo,"workname",t)},expression:"basicInfo.workname"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"重要时间节点：",prop:"timenode"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入",autosize:{minRows:3}},model:{value:e.basicInfo.timenode,callback:function(t){e.$set(e.basicInfo,"timenode",t)},expression:"basicInfo.timenode"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"督查单位：",prop:"superdept"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},on:{focus:function(t){e.getSeerList()}},model:{value:e.basicInfo.superdept,callback:function(t){e.$set(e.basicInfo,"superdept",t)},expression:"basicInfo.superdept"}},e._l(e.seeunitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1)])],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{height:"100%"}},[a("legend",[e._v("进展汇报")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("div",{staticClass:"speed"},[a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("上次进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},[a("p",[e._v(e._s(e.lastprogress))])])]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("存在问题：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("下步工作计划：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])}))]),e._v(" "),a("div",{staticClass:"filelist"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),a("div",{staticClass:"list"},[a("div",e._l(e.newReportList,function(t,s){return a("div",{key:s},e._l(t.newFiles,function(t,i){return a("div",{key:i},[a("a",{staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])])}))}))])])])])])])],1),e._v(" "),a("el-row",{staticClass:"box"},[a("el-col",{attrs:{span:24}},[a("fieldset",[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addRuleBtn}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.starttime,"YYYY-MM-DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",formatter:e.endtimeToTime,label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.editRuleBtn(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.delRuleBtn(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addLead}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"报送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"small"}},[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit2(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete2(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addDuty}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit3(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete3(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.goback}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitAll}},[e._v("保 存")])],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:e.ruleTitle,visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptid",rules:[{required:!0,message:"请选择牵头单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.addLeadData.deptid,callback:function(t){e.$set(e.addLeadData,"deptid",t)},expression:"addLeadData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptid",rules:[{required:!0,message:"请选择责任单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",readonly:e.readOn,placeholder:"请选择"},on:{change:e.deptChange2},model:{value:e.addDutyData.deptid,callback:function(t){e.$set(e.addDutyData,"deptid",t)},expression:"addDutyData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var T={props:["ddheight","leadsData","dutysData","isEditShow","noEdit","ruleList","nodeList","basicInfo","reportDetail","workid","histableHeight","typemodel","newReportList","isCenter","lastprogress","isImport"],components:{},data:function(){return{addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:0,isProgressShow:!1,historyData:[],progressData:[],isDetailShow:!0,addLeadVisible:!1,addDutyVisible:!1,taskTitle:"",addLeadData:{},addDutyData:{},ruleVisible:!1,ruleTitle:"",ruleBtn:"",addRuleForm:{cycletype:1},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}],dateShow1:!0,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",cycleNum:1,ruleIndex:-1}},created:function(){},methods:{weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},nullFormat:function(e,t){return"null"==t||null==t?"<span>/</span>":"<span>"+t+"</span>"},stateFormat:function(e,t){switch(t){case 2:return"未执行";case 1:return"执行中";case 0:return"失效"}},detailRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="报送规则详情",this.ruleBtn="确定",this.changeNum="detail",this.addRuleForm=o()({},t),this.addRuleForm.daytime=new Date(this.addRuleForm.daytime),this.addRuleForm.starttime=new Date(this.addRuleForm.starttime),this.addRuleForm.endtime=new Date(this.addRuleForm.endtime),this.ruleIndex=e},ctypeFormat:function(e,t){switch(t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},timestampToTime:function(e,t){new Date(e.stoptime);return e.stoptime|dateformat("YYYY-MM-DD HH:mm:ss")},enddateToTime:function(e,t){var a=new Date(e.endtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()+" ")},timestampToTime2:function(e,t){var a=new Date(e.createtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},toEdit:function(){this.$emit("edit-event")},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},submitLead:function(){this.addLeadVisible=!1},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},submitDuty:function(){this.addDutyVisible=!1},returnDetail2:function(){this.isDetailShow=!0,this.isProgressShow=!1},lookProgress:function(){var e=this,t={workid:this.workid};Object(c.v)(t,function(t){e.progressData=t.data.obj;for(var a=[],s=0;s<e.progressData.length;s++){var i=e.progressData[s].filepath,l=[];if(null==i)l=[];else{var r=(a=i.split(",")).length;""==a[r-1]&&a.splice(r-1,1);for(var n=a,o=0;o<n.length;o++){var d={};d.url=e.imgIp+n[o],d.name=n[o],l.push(d)}}e.progressData[s].filepath=l}}),this.isDetailShow=!1,this.isProgressShow=!0},goback:function(){1==this.isCenter?this.$router.push({path:"/index"}):2==this.isCenter?this.$router.push({path:"/personCenter"}):this.$emit("my-event")},newYear:function(){this.yearname},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[e.isDetailShow?a("div",[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")]),e._v(" "),e.isEditShow?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.noEdit,expression:"noEdit"}],class:2==e.isCenter?"noeditbtn":"",attrs:{size:"small",type:"primary"},on:{click:e.toEdit}},[e._v("编辑")]):e._e()],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.ddheight},[a("el-row",{staticClass:"box jibeninfo",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-form",{ref:"basicInfo",attrs:{size:"small",model:e.basicInfo,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"年度：",prop:"yearname"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.yearname,callback:function(t){e.$set(e.basicInfo,"yearname",t)},expression:"basicInfo.yearname"}})],1),e._v(" "),a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"leaders"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.leaders,callback:function(t){e.$set(e.basicInfo,"leaders",t)},expression:"basicInfo.leaders"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"具体片区：",prop:"nodeplan"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.nodeplan,callback:function(t){e.$set(e.basicInfo,"nodeplan",t)},expression:"basicInfo.nodeplan"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称：",prop:"workname"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.workname,callback:function(t){e.$set(e.basicInfo,"workname",t)},expression:"basicInfo.workname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重要时间节点：",prop:"timenode"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3},readonly:""},model:{value:e.basicInfo.timenode,callback:function(t){e.$set(e.basicInfo,"timenode",t)},expression:"basicInfo.timenode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"督查单位：",prop:"superdept"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.superdept,callback:function(t){e.$set(e.basicInfo,"superdept",t)},expression:"basicInfo.superdept"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("进展填报")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{size:"small",type:"primary"},on:{click:e.lookProgress}},[e._v("报送历史")]),e._v(" "),a("div",{staticClass:"speed"},[a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("上次进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},[a("p",[e._v(e._s(e.lastprogress))])])]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("存在问题：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("下步工作计划：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])}))]),e._v(" "),a("div",{staticClass:"filelist"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),a("div",{staticClass:"list"},[a("div",e._l(e.newReportList,function(t,s){return a("div",{key:s},e._l(t.newFiles,function(t,i){return a("div",{key:i},[a("a",{staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])])}))}))])])])],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:24}},[a("fieldset",{staticStyle:{width:"100%"}},[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.starttime,"YYYY-MM-DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",formatter:e.enddateToTime,label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[1==t.row.status?a("el-tag",{attrs:{type:"success",size:"medium"}},[a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}),e._v(" "),a("span",[e._v("执行中")])]):e._e(),e._v(" "),2==t.row.status?a("el-tag",{attrs:{size:"medium",type:"info"}},[a("i",{staticClass:"fa mark"}),e._v(" "),a("span",[e._v("未执行")])]):e._e(),e._v(" "),0==t.row.status?a("el-tag",{attrs:{size:"medium",type:"danger"}},[a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}),e._v(" "),a("span",[e._v("失效")])]):a("p",[e._v("/")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.detailRuleBtn(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo dtable",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"报送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"small"}},[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail2(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo dtable",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,height:"250px","highlight-current-row":"","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail3(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])])],1)],1)]):e._e(),e._v(" "),e.isProgressShow?a("div",{staticClass:"history"},[a("p",{staticClass:"title"},[e._v("历史进展汇报")]),e._v(" "),a("div",{staticClass:"hbtns"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.returnDetail2}},[e._v("返 回")])],1),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.progressData,"highlight-current-row":"",height:e.histableHeight}},[a("el-table-column",{attrs:{prop:"reportdept",label:"报送单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"报送时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.createtime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"question",label:"总体情况"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wenti",label:"存在问题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"measure",label:"下步工作计划"}}),e._v(" "),a("el-table-column",{attrs:{prop:"validate",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.validate?a("el-tag",{attrs:{type:"info","disable-transitions":""}},[a("span",[e._v("未审核")])]):1==t.row.validate?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[a("span",[e._v("审核未通过")])]):a("el-tag",{attrs:{type:"success","disable-transitions":""}},[a("span",[e._v("审核通过")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"审核不通过原因"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.nullFormat(t,t.row.reason))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filepath",label:"附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.filepath||""==t.row.filepath?a("p",[e._v("无")]):e._l(t.row.filepath,function(t,s){return a("a",{key:s,staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])})]}}])})],1)],1):e._e(),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:"详情",visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{readonly:"",placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{attrs:{readonly:""},model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",disabled:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{attrs:{readonly:""},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ruleVisible=!1}}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptName"}},[a("el-input",{model:{value:e.addLeadData.deptName,callback:function(t){e.$set(e.addLeadData,"deptName",t)},expression:"addLeadData.deptName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptName"}},[a("el-input",{model:{value:e.addDutyData.deptName,callback:function(t){e.$set(e.addDutyData,"deptName",t)},expression:"addDutyData.deptName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var V={name:"threePlan",components:{addKeyarea:a("VU/8")(R,F,!1,function(e){a("agoO")},null,null).exports,editKeyarea:a("VU/8")(I,N,!1,function(e){a("Ynj6")},null,null).exports,detailKeyarea:a("VU/8")(T,j,!1,function(e){a("KYKD")},null,null).exports,reportProgress:w.a,batchRule:_.a,importFile:k.a},data:function(){var e;return e={downTypeVisible:!1,downType:"",upbtnDisabled:!0,showYearbox:!0,lastprogress:"",isCenter:3,reportData:{},laststate:"",reportVisible:{visible:!1},itemShow:8,reportid:-1,reportBasic:{},allitems:[],batchHeight:"",batchVisible:!1,allShow:!0,chooseyear:{},otherdata:{},isShow:!0,addShow:!1,editShow:!1,detailShow:!1,processVisible:!1,deptlist:[],userlist:[],filters:{},years:[],statuss:[{value:0,status:"正常"},{value:1,status:"预警"},{value:2,status:"逾期"},{value:3,status:"滞后"},{value:4,status:"严重滞后"},{value:-1,status:"完结"}],tableData:[],bitemArr:[],bitemPos:0,sitemArr:[],sitemPos:0,threeArr:[],threePos:0},i()(e,"deptlist",[]),i()(e,"leaderlist",[]),i()(e,"processData",{}),i()(e,"evolveData",{}),i()(e,"fileList",[]),i()(e,"planCheckList",JSON.parse(this.$store.getters.userdata).planCheckList),i()(e,"loginid",JSON.parse(this.$store.getters.userdata).id),i()(e,"isAddShow",!1),i()(e,"isEditShow",!1),i()(e,"isReportShow",!1),i()(e,"isOverShow",!1),i()(e,"isDownShow",!1),i()(e,"isProcessShow",!1),i()(e,"tasklist",[]),i()(e,"upfile",""),i()(e,"urlIp",""),i()(e,"imgIp",""),i()(e,"fileArr",[]),i()(e,"pid",""),i()(e,"basicInfo",{}),i()(e,"workList",[]),i()(e,"astatus",""),i()(e,"cellhidden",[]),i()(e,"showitemlist",[{name:"牵头区领导",value:1},{name:"牵头单位",value:2},{name:"责任单位",value:3},{name:"进展情况",value:4},{name:"市上总体安排",value:5},{name:"存在问题",value:6},{name:"解决措施",value:7},{name:"协调解决事项",value:8}]),i()(e,"tableHeight","300px"),i()(e,"ishidden1",!0),i()(e,"ishidden2",!0),i()(e,"ishidden3",!0),i()(e,"ishidden4",!0),i()(e,"ishidden5",!0),i()(e,"ishidden6",!0),i()(e,"ishidden7",!0),i()(e,"ishidden8",!0),i()(e,"addheight","height:500px"),i()(e,"ddheight","height:500px"),i()(e,"histableHeight","300px"),i()(e,"colums",""),i()(e,"totalStatus",[{value:0,status:"正常"},{value:3,status:"滞后"},{value:4,status:"严重滞后"},{value:-1,status:"完结"}]),i()(e,"formStatus",[{value:0,status:"正常"},{value:1,status:"预警"},{value:2,status:"逾期"},{value:-1,status:"完结"}]),i()(e,"leadsData",[]),i()(e,"dutysData",[]),i()(e,"nodeList",[]),i()(e,"noEdit",!0),i()(e,"ruleList",[]),i()(e,"currentPage",1),i()(e,"pageSize",10),i()(e,"totals",0),i()(e,"workid",-1),i()(e,"reportDetail",{}),i()(e,"checkReceipt",{}),i()(e,"biglist",[]),i()(e,"minlist",[]),i()(e,"threeitemList",[]),i()(e,"newReportList",[]),i()(e,"defaturl",""),i()(e,"importdataVisible",{visible:!1}),i()(e,"pdatalist",[]),i()(e,"importKeyareaList",""),i()(e,"filedatas",[]),i()(e,"typemodel",2),i()(e,"loading",!0),i()(e,"curYear",2019),i()(e,"yearid",0),i()(e,"isImport",!0),i()(e,"isExport",{visible:!0}),e},created:function(){this.upfile=x.j,this.imgIp=x.a,this.defaturl=S.a,this.importKeyareaList=x.d,this.hiddenDatas(),this.browerHeight(),this.isshowCheck(),this.getDeptlist(),this.getLeaderList(),this.getyear(),this.getThreePlan(),this.centerDetail()},methods:{keyareaDownload:function(){this.downTypeVisible=!0},downDatalist:function(){1==this.downType?window.open(this.defaturl+"/tripleAreaProgress/tripleAreaExportExcel"):window.open(this.defaturl+"/tripleAreaProgress/tripleAreaExport"),this.downTypeVisible=!1},getAllDatas:function(){var e=this;Object(c.s)("",function(t){if(null==t.data.obj)e.allitems=[];else{e.allitems=t.data.obj;for(var a=0;a<e.allitems.length;a++)e.allitems[a].name=e.allitems[a].workname}})},batchRule:function(){this.allShow=!1,this.batchVisible=!0,this.getAllDatas()},batchBack:function(){this.allShow=!0,this.batchVisible=!1,this.getThreePlan()},typeSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(1===e.columnIndex){var a=this.bitemArr[t];return{rowspan:a,colspan:a>0?1:0}}},merage:function(){this.bitemArr=[],this.bitemPos=0;for(var e=0;e<this.tableData.length;e+=1)0==e?(this.bitemArr.push(1),this.bitemPos=0):this.tableData[e].tripleAreaProgress.nodeplan==this.tableData[e-1].tripleAreaProgress.nodeplan?(this.bitemArr[this.bitemPos]+=1,this.bitemArr.push(0)):(this.bitemArr.push(1),this.bitemPos=e);console.log(this.bitemArr)},handleDelete:function(e,t,a){var s=this;this.$confirm('<span style="color:#f00;">该操作将删除此条信息</span>，确定删除吗?',"提示",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var e={id:a};Object(c.m)(e,function(e){0==e.data.code?(s.$message({message:"删除成功",type:"success"}),s.getThreePlan()):s.$message({message:"删除失败",type:"error"})})}).catch(function(){s.$message({message:"取消删除",type:"warning"})})},namesChange:function(e,t){if(""==t||null==t)return"";var a=t;return a=a.replace(/,$/gi,"")},dataRemove:function(e,t){var a=e.response.obj;this.filedatas.splice(this.removeArr(this.filedatas,a),1)},handleExceed:function(e,t){this.$message.warning({message:"当前限制只能上传 1 个文件，请先删除已上传的文件，再重新上传！",duration:5e3})},hasYear:function(){this.upfileDisabled=!1},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="xls"===t,s="xlsx"===t;return a||s||this.$message({message:"上传文件只能是 xls、xlsx格式!",type:"warning"}),a||s},dataSuccess:function(e,t){if(-1==e.code)this.errorShow=!0,this.successShow=!1,this.sureImport=!0;else{this.successShow=!0,this.errorShow=!1,this.sureImport=!1;var a=e.obj;this.filedatas.push(a),this.getThreePlan()}},loadData:function(){this.importdataVisible.visible=!0,this.showYearbox=!0,this.upbtnDisabled=!1},sureImportData:function(){var e=this;this.$refs.chooseyear.validate(function(t){t&&(e.otherdata.year=parseInt(e.chooseyear.year),e.otherdata.createuser=e.loginid,e.$refs.uploaddata.submit(),e.importdataVisible=!1,e.$message({type:"success",message:"导入成功!"}),e.getThreePlan())})},downMoudle:function(){window.open(this.defaturl+"/templateDownload/tripleAreaImportTemplate")},numberFormatter:function(e,t,a,s){return s+1+(this.currentPage-1)*this.pageSize},tabsClick:function(e){this.activeClass=e},totalstateChange:function(e,t){var a=this,s={totalstatus:t.tripleAreaProgress.totalstatus,workid:t.tripleAreaProgress.id};Object(c.k)(s,function(e){a.getThreePlan(),a.$message({type:"success",message:"修改状态成功!"})})},totalstatusFormat:function(e,t){switch(t){case 0:return"正常";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},browerHeight:function(){var e=document.body.clientHeight,t=e-390,a=e-280,s=e-350,i=e-250;this.batchHeight=i+"px",this.tableHeight=t+"px",this.addheight="height:"+s+"px",this.ddheight="height:"+a+"px",this.histableHeight=s+"px"},hiddenDatas:function(){var e=this,t={userid:this.loginid,catagory:2,typemodel:this.typemodel};Object(D.B)(t,function(t){e.cellhidden=t.data.obj,e.showItems()})},selectChange:function(){this.$forceUpdate()},showItems:function(){this.ishidden1=!0,this.ishidden2=!0,this.ishidden3=!0,this.ishidden4=!0,this.ishidden5=!0,this.ishidden6=!0,this.ishidden7=!0,this.ishidden8=!0;for(var e=0;e<this.cellhidden.length;e++){switch(this.cellhidden[e]){case 1:this.ishidden1=!1;break;case 2:this.ishidden2=!1;break;case 3:this.ishidden3=!1;break;case 4:this.ishidden4=!1;break;case 5:this.ishidden5=!1;break;case 6:this.ishidden6=!1;break;case 7:this.ishidden7=!1;break;case 8:this.ishidden8=!1}}},itemChange:function(){var e=this;this.$forceUpdate(),0==this.cellhidden.length?this.colums="":1==this.cellhidden.length?this.colums=this.cellhidden[0]+",":this.colums=this.cellhidden.join(",");var t={colums:this.colums,userId:this.loginid,catagory:2};Object(D.o)(t,function(t){e.hiddenDatas(),e.showItems(),e.colums=""})},getThreePlan:function(){var e=this;this.loading=!0;var t=this.filters;t.userid=this.loginid,t.pageNum=this.currentPage,t.pageSize=this.pageSize,Object(c.y)(t,function(t){null==t.data.obj||t.data.obj==[]?(e.tableData=[],e.totals=0,e.merage(),e.loading=!1):(e.tableData=t.data.obj.datas,e.totals=t.data.obj.total,e.merage(),e.loading=!1)})},handleSizeChange:function(e){this.pageSize=e,this.getThreePlan()},handleCurrentChange:function(e){this.currentPage=e,this.getThreePlan()},isshowCheck:function(){if(null!==this.planCheckList)for(var e=0;e<this.planCheckList.length;e++){switch(this.planCheckList[e]){case"C-add":this.isAddShow=!0;break;case"C-edit":this.isEditShow=!0;break;case"C-report":this.isReportShow=!0;break;case"C-over":this.isOverShow=!0;break;case"C-down":this.isDownShow=!0;break;case"C-process":this.isProcessShow=!0}}},getDeptlist:function(){var e=this;Object(D.e)("",function(t){e.deptlist=t.data.obj})},getLeaderList:function(){var e=this;Object(D.G)("",function(t){e.leaderlist=t.data.obj})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},handleBack:function(){this.isShow=!0,this.addShow=!1,this.detailShow=!1,this.editShow=!1},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},tableRowClassName:function(e){var t=e.row;e.rowIndex;return-1==t.status?"noedit":4==t.status?"lagbtn":void 0},getDatas:function(){this.getThreePlan()},resetForm:function(e){this.$refs[e].resetFields(),this.getThreePlan()},redetailFuc:function(e){var t=this;Object(c.x)({workid:e},function(e){t.detailData=e.data.obj,t.reportBasic=t.detailData.tripleAreaProgress,t.reportBasic.yearname=t.detailData.tripleAreaProgress.year;var a=t.detailData.tripleAreaProgress.arealeadnames;if(null==a)a="",t.reportBasic.leaders="";else{a=a.replace(/,$/gi,""),t.reportBasic.leaders=a}var s=e.data.obj.tripleAreaProgressLeadDeptList,i=[];if(null==s)i=[];else for(var l=0;l<s.length;l++)i.push(s[l].deptName);t.reportBasic.leaderDeptName=i.join(", ")})},handleEvolve:function(e,t){var a=this;this.reportData={},this.fileList=[],this.fileArr=[],this.laststate="",this.isExport.visible=!0,this.workid=t.tripleAreaProgress.id,this.redetailFuc(this.workid),Object(c.F)({workid:this.workid},function(e){null==e.data.obj?a.laststate="":a.laststate=e.data.obj.question});var s={};s.workid=this.workid,s.userid=this.loginid,Object(c.J)(s,function(e){if(1==e.data.obj)a.isExport.visible=!1,a.$confirm("<span style='color:#f00;'>已重复报送</span>，确定继续报送吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!1,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){a.reportVisible.visible=!0}).catch(function(){a.$message({type:"info",message:"取消报送"}),a.reportVisible.visible=!1});else{var t={userid:a.loginid,termid:a.workid,modeltype:8};Object(D.L)(t,function(e){var t=e.data.obj;if(a.isExport.visible=!0,null==t)a.reportData={userid:a.loginid},a.reportid=-1;else{a.isExport.visible=!1,a.workid=!1,a.reportid=t.id,a.reportData={userid:a.loginid,question:t.question,measure:t.plan,wenti:t.problem,remark:t.remark};var s=t.filepath,i={};if(null==s||""==s)a.fileList=[],a.fileArr=[];else{var l;l=(s=s.replace(/,$/gi,"")).split(",");for(var r=0;r<l.length;r++)i.name=l[r],i.url=a.imgIp+l[r],a.fileList.push(i),a.fileArr.push(i.name)}}a.reportVisible.visible=!0})}})},removeArr:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1},handleRemove:function(e,t){var a=e.response.obj;this.fileArr.splice(this.removeArr(this.fileArr,a),1)},handlePreview:function(e){},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleSuccess:function(e,t){var a=e.obj;this.fileArr.push(a)},saveReport:function(){var e=this;this.$refs.reportChild.$refs.reportData.validate(function(t){if(t){if(0==e.fileArr.length)"";else 1==e.fileArr.length?e.fileArr[0]+",":e.fileArr.join(",");var a=e.reportData;a.problem=e.reportData.wenti,a.plan=e.reportData.measure,-1==e.reportid||(a.id=e.reportid),a.modeltype=8,a.filepath="",a.termid=e.workid,Object(D.N)(a,function(t){e.$message({type:"success",message:"保存成功"}),e.isExport.visible=!1})}})},submitReport:function(){var e=this;this.$refs.reportChild.$refs.reportData.validate(function(t){if(t){var a="";e.fileArr==[]?a="":1==e.fileArr.length?a+=e.fileArr[0]+",":a=e.fileArr.join(",");var s=e.reportData;s.workid=e.workid,s.validate=0,s.userid=e.loginid,s.files=a,Object(c.e)(s,function(t){e.$alert("<span style='color:#f00;'>报送成功</span>，请等待上级部门审核通过","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"我知道了",type:"success",center:!0,modal:!1}),e.reportVisible=!1,e.getThreePlan()})}})},detailFuc:function(e){var t=this;Object(c.x)(e,function(e){t.detailData=e.data.obj,t.basicInfo=t.detailData.tripleAreaProgress,t.basicInfo.yearname=t.detailData.tripleAreaProgress.year;var a=t.detailData.tripleAreaProgress.arealeadnames;if(null==a)a="",t.basicInfo.leaders="";else{a=a.replace(/,$/gi,""),t.basicInfo.leaders=a}t.leadsData=t.detailData.tripleAreaProgressLeadDeptList,t.dutysData=t.detailData.tripleAreaProgressDutyDeptList,t.ruleList=t.detailData.tripleAreaProgressRuleList,null==t.detailData.reportList&&(t.detailData.reportList=[]),t.newReportList=t.detailData.reportList;for(var s=0;s<t.newReportList.length;s++){t.newReportList[s].newFiles=[];var i=t.newReportList[s].filepath;if(""==i||null==i)t.newReportList[s].newFiles=[];else{var l=(i=i.split(",")).length;""==i[l-1]&&i.splice(l-1,1);var r=i;for(s=0;s<r.length;s++){var n={};n.url=t.imgIp+r[s],n.name=r[s],t.newReportList[s].newFiles.push(n)}}}Object(c.F)({workid:t.workid},function(e){null==e.data.obj?t.lastprogress="":t.lastprogress=e.data.obj.question})})},handleDetail:function(e,t,a){-1==t.tripleAreaProgress.totalstatus?this.noEdit=!1:this.noEdit=!0,this.isShow=!1,this.detailShow=!0,this.noEdit=!0,this.workid=a;var s={workid:a};this.detailFuc(s)},centerDetail:function(){if(void 0==this.$route.query.workid)this.workid="",this.isCenter=3,this.getThreePlan();else{if(1!=this.$route.query.sortnum)return!1;this.isCenter=this.$route.query.isCenter,this.workid=this.$route.query.workid,this.isShow=!1,this.detailShow=!0,this.noEdit=!0;var e={workid:this.workid};this.detailFuc(e)}},editFuc:function(e){var t=this;Object(c.x)(e,function(e){t.editShow=!0,t.isShow=!1,t.detailData=e.data.obj,t.basicInfo=t.detailData.tripleAreaProgress,t.basicInfo.superdept=t.detailData.tripleAreaProgress.superdept.split(",");var a=t.detailData.tripleAreaProgress.arealeadids,s=[];null==a||""==a?(s=[],t.basicInfo.arealeadids=[]):(s=(a=","==a.substring(a.length-1)?a.substring(0,a.length-1):a).split(","),t.basicInfo.arealeadids=s.map(Number)),t.leadsData=t.detailData.tripleAreaProgressLeadDeptList,t.dutysData=t.detailData.tripleAreaProgressDutyDeptList,t.ruleList=t.detailData.tripleAreaProgressRuleList,null==t.detailData.reportList&&(t.detailData.reportList=[]),t.newReportList=t.detailData.reportList;for(var i=0;i<t.newReportList.length;i++){t.newReportList[i].newFiles=[];var l=t.newReportList[i].filepath;if(""==l||null==l)t.newReportList[i].newFiles=[];else{var r=(l=l.split(",")).length;""==l[r-1]&&l.splice(r-1,1);var n=l;for(i=0;i<n.length;i++){var o={};o.url=t.imgIp+n[i],o.name=n[i],t.newReportList[i].newFiles.push(o)}}}null==t.leadsData&&(t.leadsData=[]),null==t.dutysData&&(t.dutysData=[]),null==t.ruleList&&(t.ruleList=[]),Object(c.F)({workid:t.workid},function(e){null==e.data.obj?t.lastprogress="":t.lastprogress=e.data.obj.question})})},toeditPage:function(){this.detailShow=!1;var e={workid:this.workid};this.basicInfo={},this.editFuc(e)},handleEdit:function(e,t,a){this.workid=a,this.basicInfo={};var s={workid:a};this.editFuc(s)},currentYear:function(){var e=new Date;this.curYear=e.getFullYear();for(var t=0;t<this.years.length;t++)this.curYear==this.years[t].year&&(this.yearid=this.years[t].id)},handleAdd:function(){this.currentYear(),this.isShow=!1,this.addShow=!0}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[e.allShow?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},[a("el-row",[a("el-col",{staticClass:"toolbar toolbar2",attrs:{span:24}},[a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,size:"small"}},[a("el-form-item",{staticClass:"zt",attrs:{label:"年度：",prop:"yearId"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.filters.yearId,callback:function(t){e.$set(e.filters,"yearId",t)},expression:"filters.yearId"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"ld",attrs:{label:"牵头区领导：",prop:"areaLeadId",filterable:""},on:{change:e.selectChange}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.filters.areaLeadId,callback:function(t){e.$set(e.filters,"areaLeadId",t)},expression:"filters.areaLeadId"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"ld",attrs:{label:"牵头单位：",prop:"leaderDeptId"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.leaderDeptId,callback:function(t){e.$set(e.filters,"leaderDeptId",t)},expression:"filters.leaderDeptId"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"zt",attrs:{label:"状态：",prop:"status"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},e._l(e.statuss,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getDatas("filters")}}},[e._v("搜 索")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("filters")}}},[e._v("重 置")])],1),e._v(" "),a("div",{staticClass:"toolbtns"},[a("div",[e.isAddShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新 增")]):e._e(),e._v(" "),e.isDownShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.keyareaDownload}},[e._v("报表下载")]):e._e(),e._v(" "),e.isAddShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.loadData}},[e._v("导入数据")]):e._e(),e._v(" "),e.isEditShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.batchRule}},[e._v("报送规则")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"选择隐藏列：",prop:"cellhidden"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"全部"},on:{change:e.itemChange},model:{value:e.cellhidden,callback:function(t){e.cellhidden=t},expression:"cellhidden"}},e._l(e.showitemlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{"empty-text":"无",data:e.tableData,border:"",height:e.tableHeight,"span-method":e.typeSpanMethod,"cell-class-name":e.cellClassName,"row-class-name":e.tableRowClassName,"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)"}},[a("el-table-column",{attrs:{label:"序号",width:"60",formatter:e.numberFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"tripleAreaProgress",label:"具体片区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.tripleAreaProgress.nodeplan))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tripleAreaProgress",label:"项目名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"1.8"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.tripleAreaProgress.workname))]),e._v(" "),a("p",{staticClass:"title-ellipsis title",on:{click:function(a){e.handleDetail(t.$index,t.row,t.row.tripleAreaProgress.id)}}},[e._v(e._s(t.row.tripleAreaProgress.workname))])])]}}])}),e._v(" "),e.ishidden5?a("el-table-column",{attrs:{prop:"tripleAreaProgress",label:"重要时间节点"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"1.8"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.tripleAreaProgress.timenode))]),e._v(" "),a("p",{staticClass:"title-ellipsis"},[e._v(e._s(t.row.tripleAreaProgress.timenode))])])]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"tripleAreaProgress",label:"督查单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"title-ellipsis"},[e._v(e._s(t.row.tripleAreaProgress.superdept))])]}}])}),e._v(" "),e.ishidden1?a("el-table-column",{attrs:{prop:"areaLeaderNames",label:"牵头区领导"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.namesChange(t,t.row.areaLeaderNames))}})]}}])}):e._e(),e._v(" "),e.ishidden2?a("el-table-column",{attrs:{prop:"tripleAreaProgressLeadDeptList",label:"牵头单位"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.tripleAreaProgressLeadDeptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.deptName))])})}}])}):e._e(),e._v(" "),e.ishidden3?a("el-table-column",{attrs:{prop:"tripleAreaProgressDutyDeptList",label:"责任单位"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.tripleAreaProgressDutyDeptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.deptName))])})}}])}):e._e(),e._v(" "),e.ishidden4?a("el-table-column",{attrs:{prop:"reportList",label:"进展情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.reportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])})),e._v(" "),a("div",e._l(t.row.reportList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.question))])}))])],1)]}}])}):e._e(),e._v(" "),e.ishidden6?a("el-table-column",{attrs:{prop:"reportList",label:"存在问题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.reportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])})),e._v(" "),a("div",e._l(t.row.reportList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.wenti))])}))])],1)]}}])}):e._e(),e._v(" "),e.ishidden7?a("el-table-column",{attrs:{prop:"reportList",label:"解决措施"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.reportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])})),e._v(" "),a("div",e._l(t.row.reportList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.measure))])}))])],1)]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"tripleAreaProgress",label:"材料报送",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[1==t.row.tripleAreaProgress.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.tripleAreaProgress.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.tripleAreaProgress.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.tripleAreaProgress.formstatus))}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"tripleAreaProgress",label:"总体进度",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEditShow?a("div",{staticClass:"flexbox"},[3==t.row.tripleAreaProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):4==t.row.tripleAreaProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#7c1d77"}}):-1==t.row.tripleAreaProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("el-select",{staticClass:"stateSelect",on:{change:function(a){e.totalstateChange(t,t.row)}},model:{value:t.row.tripleAreaProgress.totalstatus,callback:function(a){e.$set(t.row.tripleAreaProgress,"totalstatus",a)},expression:"scope.row.tripleAreaProgress.totalstatus"}},e._l(e.totalStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1):a("div",[3==t.row.tripleAreaProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):4==t.row.tripleAreaProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#7c1d77"}}):-1==t.row.tripleAreaProgress.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.totalstatusFormat(t,t.row.tripleAreaProgress.totalstatus))}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"edit",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail(t.$index,t.row,t.row.tripleAreaProgress.id)}}},[e._v("详情")]),e._v(" "),e.isEditShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit(t.$index,t.row,t.row.tripleAreaProgress.id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.isEditShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete(t.$index,t.row,t.row.tripleAreaProgress.id)}}},[e._v("删除")]):e._e(),e._v(" "),e.isReportShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEvolve(t.$index,t.row)}}},[e._v("进展填报")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":e.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:e.totals},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]):e._e(),e._v(" "),a("div",{staticClass:"import-data-box"},[a("import-file",{attrs:{importdataVisible:e.importdataVisible,showYearbox:e.showYearbox,itemShow:e.itemShow,importFileList:e.importKeyareaList,upbtnDisabled:e.upbtnDisabled},on:{"update:importdataVisible":function(t){e.importdataVisible=t},"update:upbtnDisabled":function(t){e.upbtnDisabled=t},"getAllList-event":e.getThreePlan}})],1),e._v(" "),a("el-dialog",{attrs:{title:"选择下载格式",visible:e.downTypeVisible,width:"400px"},on:{"update:visible":function(t){e.downTypeVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-radio-group",{model:{value:e.downType,callback:function(t){e.downType=t},expression:"downType"}},[a("el-radio",{attrs:{label:1}},[e._v("Excel")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"56px"},attrs:{label:2}},[e._v("Word")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.downDatalist}},[e._v("确 定")])],1)]),e._v(" "),e.addShow?a("div",{staticClass:"project-box"},[a("add-keyarea",{attrs:{deptlist:e.deptlist,leaderlist:e.leaderlist,addheight:e.addheight,typemodel:e.typemodel,yearid:e.yearid,isImport:e.isImport},on:{"my-event":e.handleBack,"add-event":e.getThreePlan}})],1):e._e(),e._v(" "),e.editShow?a("div",{staticClass:"project-box"},[a("edit-keyarea",{attrs:{deptlist:e.deptlist,basicInfo:e.basicInfo,addheight:e.addheight,leadsData:e.leadsData,dutysData:e.dutysData,ruleList:e.ruleList,checkReceipt:e.checkReceipt,upfile:e.upfile,imgIp:e.imgIp,workid:e.workid,leaderlist:e.leaderlist,typemodel:e.typemodel,newReportList:e.newReportList,lastprogress:e.lastprogress,isImport:e.isImport},on:{"my-event":e.handleBack,"add-event":e.getThreePlan}})],1):e._e(),e._v(" "),e.detailShow?a("div",{staticClass:"project-box"},[a("detail-keyarea",{attrs:{basicInfo:e.basicInfo,reportDetail:e.reportDetail,ruleList:e.ruleList,leadsData:e.leadsData,dutysData:e.dutysData,ddheight:e.ddheight,isEditShow:e.isEditShow,noEdit:e.noEdit,workid:e.workid,histableHeight:e.histableHeight,typemodel:e.typemodel,newReportList:e.newReportList,isCenter:e.isCenter,lastprogress:e.lastprogress,isImport:e.isImport},on:{"my-event":e.handleBack,"edit-event":e.toeditPage}})],1):e._e(),e._v(" "),a("div",{staticClass:"report-data-box"},[a("report-progress",{attrs:{reportVisible:e.reportVisible,reportData:e.reportData,laststate:e.laststate,itemShow:e.itemShow,workid:e.workid,reportBasic:e.reportBasic,fileList:e.fileList,fileArr:e.fileArr,isExport:e.isExport},on:{"update:reportVisible":function(t){e.reportVisible=t},"update:fileList":function(t){e.fileList=t},"update:fileArr":function(t){e.fileArr=t},"update:isExport":function(t){e.isExport=t},"getAllList-event":e.getThreePlan}})],1),e._v(" "),e.batchVisible?a("div",{staticClass:"batchrule-box"},[a("batch-rule",{attrs:{batchHeight:e.batchHeight,allitems:e.allitems,itemShow:e.itemShow},on:{"my-back":e.batchBack}})],1):e._e()],1)},staticRenderFns:[]};var A=a("VU/8")(V,P,!1,function(e){a("nbRt")},null,null).exports,O=(a("mse9"),{props:["leaderlist","deptlist","addheight","yearid"],components:{},data:function(){return{checkAll:!1,checkedItems:[],allitems:[],isIndeterminate:!1,choosenum:0,hasitem:[],basicInfo:{},years:[],yearShow:!1,yearname:"",bitemShow:!1,sitemShow:!1,threeShow:!1,fourShow:!1,unitShow:!1,bitemname:"",sitemname:"",fourname:"",threename:"",unitname:"",addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:0,biglist:[],minlist:[],addLeadVisible:!1,addDutyVisible:!1,leadsData:[],dutysData:[],addLeadData:{},addDutyData:{},taskTitle:"",threeitemList:[],fouritemList:[],seeunitList:[],ruleList:[],ruleVisible:!1,ruleTitle:"",ruleBtn:"",addRuleForm:{cycletype:1},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],dateShow1:!0,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",cycleNum:1,ruleIndex:-1,submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}]}},created:function(){this.getyear(),this.basicInfo={yearid:this.yearid},this.getAllDatas()},methods:{weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},getAllDatas:function(){this.allitems=[]},handleCheckAllChange:function(e){for(var t=[],a=0;a<this.allitems.length;a++)t.push(this.allitems[a].id);this.choosenum=e?t.length:0,this.checkedItems=e?t:[],this.isIndeterminate=!1},handleCheckedItemsChange:function(e){this.choosenum=e.length;var t=e.length;this.checkAll=t===this.allitems.length,this.isIndeterminate=t>0&&t<this.allitems.length},ctypeFormat:function(e,t){switch(t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},addRuleBtn:function(){this.ruleVisible=!0,this.ruleTitle="新增报送规则",this.ruleBtn="新增",this.changeNum="add",this.addRuleForm={cycletype:1},this.cycleChange()},addRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),a.typemodel=e.typemodel,e.ruleList.push(a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},editRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="编辑报送规则",this.ruleBtn="保存",this.changeNum="edit",this.addRuleForm=o()({},t),this.ruleIndex=e},editRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;e.cycleNum=e.addRuleForm.cycletype;var a=o()({},e.addRuleForm);1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.splice(e.ruleIndex,1,a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleIndex=-1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},delRuleBtn:function(e,t){this.ruleList.splice(e,1),this.ruleVisible=!1,this.$message({message:"删除成功",type:"success"})},submitRule:function(){"add"==this.changeNum?this.addRuleSubmit():this.editRuleSubmit()},addLead:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增牵头单位",this.readOn=!1,this.addLeadVisible=!0},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},handleEdit2:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑牵头单位",this.readOn=!1,this.addLeadVisible=!0,this.addLeadData=o()({},t),this.tindex=e},submitLead:function(){"read"==this.changeNum?this.addLeadVisible=!1:"add"==this.changeNum?this.addLeadSubmit():this.editLeadSubmit()},deptChange:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addLeadData.deptid){e=this.deptlist[t].name;break}this.addLeadData.deptname=e},addLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);a.typemodel=e.typemodel,e.leadsData.push(a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},editLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);e.leadsData.splice(e.tindex,1,a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},handleDelete2:function(e,t){this.leadsData.splice(e,1),this.$refs.addLeadData.resetFields(),this.addLeadVisible=!1,this.$message({message:"删除成功",type:"success"})},addDuty:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增责任单位",this.readOn=!1,this.addDutyVisible=!0},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},handleEdit3:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑责任单位",this.readOn=!1,this.addDutyVisible=!0,this.addDutyData=o()({},t),this.tindex=e},submitDuty:function(){"read"==this.changeNum?this.addDutyVisible=!1:"add"==this.changeNum?this.addDutySubmit():this.editDutySubmit()},deptChange2:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addDutyData.deptid){e=this.deptlist[t].name;break}this.addDutyData.deptname=e},addDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);a.typemodel=e.typemodel,e.dutysData.push(a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},editDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.splice(e.tindex,1,a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},handleDelete3:function(e,t){this.dutysData.splice(e,1),this.$refs.addDutyData.resetFields(),this.addDutyVisible=!1,this.$message({message:"删除成功",type:"success"})},goback:function(){var e=this;this.$confirm("<span style='color:#f00;'>数据未保存</span>，确定返回列表吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("my-event"),e.getyear()}).catch(function(){return!1})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},newYear:function(){var e=this,t={year:this.yearname};Object(d.k)(t,function(t){e.yearShow=!1,e.$message({message:"新增成功",type:"success"}),e.getyear(),e.yearname=""})},getbigterm:function(){var e=this;if(null==this.basicInfo.yearid)this.$message({message:"请选择年度！",type:"warning"});else{var t={yearid:this.basicInfo.yearid,typemodel:this.typemodel};Object(d.m)(t,function(t){e.biglist=t.data.obj,console.log(e.biglist)})}},addBigSubmit:function(){var e=this;if(null==this.basicInfo.yearid)this.$message({message:"请选择年度！",type:"warning"});else{var t={yearid:this.basicInfo.yearid,bigname:this.bitemname,typemodel:this.typemodel};Object(d.a)(t,function(t){e.bitemShow=!1,e.$message({message:"新增成功",type:"success"}),e.getbigterm(),e.bitemname=""})}},getBiglist:function(){var e=this;if(null==this.basicInfo.yearid||null==this.basicInfo.bigid)this.$message({message:"请选择年度和大项！",type:"warning"});else{var t={bigid:this.basicInfo.bigid,yearid:this.basicInfo.yearid,typemodel:this.typemodel};Object(d.l)(t,function(t){e.minlist=t.data.obj})}},addSubterm:function(){var e=this;if(null==this.basicInfo.yearid||null==this.basicInfo.bigid)this.$message({message:"请选择年度和一级工作！",type:"warning"});else{var t={bigid:this.basicInfo.bigid,yearid:this.basicInfo.yearid,minname:this.sitemname,typemodel:this.typemodel};Object(d.f)(t,function(t){e.sitemShow=!1,e.$message({message:"新增成功",type:"success"}),e.getBiglist(),e.sitemname=""})}},getThreeworkList:function(){var e=this;if(null==this.basicInfo.yearid||null==this.basicInfo.bigid||null==this.basicInfo.minid)this.$message({message:"请确定已选择年度、一级工作和二级工作！",type:"warning"});else{var t={bigid:this.basicInfo.bigid,yearid:this.basicInfo.yearid,minid:this.basicInfo.minid,typemodel:this.typemodel};Object(d.S)(t,function(t){e.threeitemList=t.data.obj})}},newThree:function(){var e=this;if(null==this.basicInfo.yearid||null==this.basicInfo.bigid||null==this.basicInfo.minid)this.$message({message:"请确定已选择年度、一级工作和二级工作！",type:"warning"});else{var t={bigid:this.basicInfo.bigid,yearid:this.basicInfo.yearid,minid:this.basicInfo.minid,partname:this.threename,typemodel:this.typemodel};Object(d.j)(t,function(t){e.threeShow=!1,e.$message({message:"新增成功",type:"success"}),e.getThreeworkList(),e.threename=""})}},getSeerList:function(){var e=this;Object(d.L)("",function(t){e.seeunitList=t.data.obj})},newUnit:function(){var e=this,t={name:this.unitname};Object(d.h)(t,function(t){e.unitShow=!1,e.$message({message:"新增成功",type:"success"}),e.unitname="",e.getSeerList()})},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},submitAll:function(){var e=this;this.$refs.basicInfo.validate(function(t){if(t){var a=e.basicInfo.arealeadids;a=0==a.length?"":1==a.length?a[0]+",":a.join(",");var s=e.basicInfo.superdept.join(","),i={year:e.basicInfo.yearid,projectname:e.basicInfo.projectname,timenode:e.basicInfo.timenode,superdept:s};i.lederid=a,i.ldeptList=e.leadsData,i.dutyDeptList=e.dutysData,i.ruleList=e.ruleList,i=r()(i),Object(c.c)(i,function(t){"0"==t.data.code?Object(c.h)({eid:t.data.obj},function(a){Object(c.N)({eid:t.data.obj},function(t){e.$emit("my-event"),e.$emit("add-event"),e.$message({message:"新增成功",type:"success"})})}):(e.$message({message:"新增失败",type:"error"}),e.$emit("my-event"),e.$emit("add-event"))})}})}}}),M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")])],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight},[a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent boxcontent0"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"120px",size:"small",model:e.basicInfo}},[a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"年度：",prop:"yearid",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.basicInfo.yearid,callback:function(t){e.$set(e.basicInfo,"yearid",t)},expression:"basicInfo.yearid"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"jiabtn"},[a("i",{staticClass:"icon el-icon-circle-plus",on:{click:function(t){e.yearShow=!0}}}),e._v(" "),e.yearShow?a("div",{staticClass:"awrap"},[a("p",[e._v("新增年度")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入年度名称"},model:{value:e.yearname,callback:function(t){e.yearname=t},expression:"yearname"}}),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{on:{click:function(t){e.yearShow=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.newYear}},[e._v("确定")])],1)],1):e._e()])],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"arealeadids"}},[a("el-select",{staticClass:"item-select",attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.basicInfo.arealeadids,callback:function(t){e.$set(e.basicInfo,"arealeadids",t)},expression:"basicInfo.arealeadids"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"addbox addbox-area"},[a("el-form-item",{attrs:{label:"项目名称：",prop:"projectname"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.basicInfo.projectname,callback:function(t){e.$set(e.basicInfo,"projectname",t)},expression:"basicInfo.projectname"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox addbox-area"},[a("el-form-item",{attrs:{label:"重要时间节点：",prop:"timenode"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入",rows:"3"},model:{value:e.basicInfo.timenode,callback:function(t){e.$set(e.basicInfo,"timenode",t)},expression:"basicInfo.timenode"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"督查单位：",prop:"superdept"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},on:{focus:function(t){e.getSeerList()}},model:{value:e.basicInfo.superdept,callback:function(t){e.$set(e.basicInfo,"superdept",t)},expression:"basicInfo.superdept"}},e._l(e.seeunitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1)])],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{width:"100%"}},[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addRuleBtn}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"192px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.editRuleBtn(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.delRuleBtn(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addLead}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"200px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptname",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit2(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete2(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addDuty}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,"highlight-current-row":"",height:"200px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptname",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit3(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete3(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.goback}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitAll}},[e._v("新 增")])],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:e.ruleTitle,visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,"label-width":"93px",inline:!0,size:"small","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptid",rules:[{required:!0,message:"请选择牵头单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.addLeadData.deptid,callback:function(t){e.$set(e.addLeadData,"deptid",t)},expression:"addLeadData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptid",rules:[{required:!0,message:"请选择责任单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",readonly:e.readOn,placeholder:"请选择"},on:{change:e.deptChange2},model:{value:e.addDutyData.deptid,callback:function(t){e.$set(e.addDutyData,"deptid",t)},expression:"addDutyData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var z={props:["leaderlist","deptlist","basicInfo","partid","addheight","leadsData","dutysData","ruleList","urlIp","upfile","checkReceipt","workid","newReportList","years","lastprogress"],components:{},data:function(){var e;return e={checkAll:!1,checkedItems:[],allitems:[],isIndeterminate:!1,choosenum:0,hasitem:[],yearShow:!1,yearname:"",unitShow:!1,unitname:"",addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:-1},i()(e,"readOn",!1),i()(e,"addLeadData",{}),i()(e,"addDutyData",{}),i()(e,"taskTitle",""),i()(e,"ruleVisible",!1),i()(e,"dateShow1",!1),i()(e,"dateShow2",!1),i()(e,"dateShow3",!1),i()(e,"dateShow4",!1),i()(e,"dateShow5",!1),i()(e,"region",""),i()(e,"monthday",""),i()(e,"quarter",""),i()(e,"weekday",""),i()(e,"daytime",""),i()(e,"ruleTitle",""),i()(e,"ruleBtn",""),i()(e,"cycleNum",0),i()(e,"addRuleForm",{}),i()(e,"weekList",[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}]),i()(e,"submitType",[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}]),i()(e,"timeday",[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}]),i()(e,"ruleIndex",-1),i()(e,"fileList",[]),i()(e,"fileArr",[]),i()(e,"fouritemList",[]),i()(e,"seeunitList",[]),i()(e,"addLeadVisible",!1),i()(e,"addDutyVisible",!1),e},created:function(){this.getyear(),this.getAllDatas()},methods:{weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},getAllDatas:function(){this.allitems=[]},handleCheckAllChange:function(e){for(var t=[],a=0;a<this.allitems.length;a++)t.push(this.allitems[a].id);this.choosenum=e?t.length:0,this.checkedItems=e?t:[],this.isIndeterminate=!1},handleCheckedItemsChange:function(e){this.choosenum=e.length;var t=e.length;this.checkAll=t===this.allitems.length,this.isIndeterminate=t>0&&t<this.allitems.length},removeArr:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1},handleRemove:function(e,t){var a=e.response.obj;this.fileArr.splice(this.removeArr(this.fileArr,a),1)},handlePreview:function(e){},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleSuccess:function(e,t){var a=e.obj;this.fileArr.push(a)},getSeerList:function(){var e=this;Object(d.L)("",function(t){e.seeunitList=t.data.obj})},newUnit:function(){var e=this,t={name:this.unitname};Object(d.h)(t,function(t){e.unitShow=!1,e.$message({message:"新增成功",type:"success"}),e.unitname="",e.getSeerList()})},endtimeToTime:function(e,t){var a=new Date(e.endtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},ctypeFormat:function(e,t){switch(this.$forceUpdate(),t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},addRuleBtn:function(){this.ruleVisible=!0,this.ruleTitle="新增报送规则",this.ruleBtn="新增",this.changeNum="add",this.addRuleForm={cycletype:1},this.cycleChange()},addRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.push(a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},editRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="编辑报送规则",this.ruleBtn="保存",this.changeNum="edit",this.addRuleForm=o()({},t),this.addRuleForm.daytime=new Date(this.addRuleForm.daytime),this.addRuleForm.starttime=new Date(this.addRuleForm.starttime),this.addRuleForm.endtime=new Date(this.addRuleForm.endtime),this.ruleIndex=e},editRuleSubmit:function(){var e=this;this.$refs.addRuleForm.validate(function(t){if(!t)return!1;var a=o()({},e.addRuleForm);e.cycleNum=e.addRuleForm.cycletype,1==e.cycleNum?a.cycletime=e.region:2==e.cycleNum?a.cycletime=e.weekday:3==e.cycleNum?a.cycletime=e.monthday:4==e.cycleNum?a.cycletime=e.quarter:5==e.cycleNum&&(a.cycletime=e.daytime),e.ruleList.splice(e.ruleIndex,1,a),e.$refs.addRuleForm.resetFields(),e.ruleVisible=!1,e.ruleIndex=-1,e.ruleTitle="",e.ruleBtn="",e.changeNum="",e.cycleNum=0})},delRuleBtn:function(e,t){this.ruleList.splice(e,1),this.ruleVisible=!1,this.$message({message:"删除成功",type:"success"})},submitRule:function(){"add"==this.changeNum?this.addRuleSubmit():this.editRuleSubmit()},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},addLead:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增牵头单位",this.readOn=!1,this.addLeadVisible=!0},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},handleEdit2:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑牵头单位",this.readOn=!1,this.addLeadVisible=!0,this.addLeadData=o()({},t),this.tindex=e},submitLead:function(){"read"==this.changeNum?this.addLeadVisible=!1:"add"==this.changeNum?this.addLeadSubmit():this.editLeadSubmit()},deptChange:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addLeadData.deptid){e=this.deptlist[t].name;break}this.addLeadData.deptName=e},addLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return!1;var a=o()({},e.addLeadData);e.leadsData.push(a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},editLeadSubmit:function(){var e=this;this.$refs.addLeadData.validate(function(t){if(!t)return console.log("error"),!1;var a=o()({},e.addLeadData);e.leadsData.splice(e.tindex,1,a),e.$refs.addLeadData.resetFields(),e.addLeadVisible=!1})},handleDelete2:function(e,t){this.leadsData.splice(e,1),this.$refs.addLeadData.resetFields(),this.addLeadVisible=!1,this.$message({message:"删除成功",type:"success"})},addDuty:function(){this.changeNum="add",this.changeWord="新增",this.taskTitle="新增责任单位",this.readOn=!1,this.addDutyVisible=!0},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},handleEdit3:function(e,t){this.changeNum="edit",this.changeWord="保存",this.taskTitle="编辑责任单位",this.readOn=!1,this.addDutyVisible=!0,this.addDutyData=o()({},t),this.tindex=e},submitDuty:function(){"read"==this.changeNum?this.addDutyVisible=!1:"add"==this.changeNum?this.addDutySubmit():this.editDutySubmit()},deptChange2:function(){for(var e="",t=0;t<this.deptlist.length;t++)if(this.deptlist[t].id==this.addDutyData.deptid){e=this.deptlist[t].name;break}this.addDutyData.deptName=e},addDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);console.log(e.dutysData),e.dutysData.push(a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},editDutySubmit:function(){var e=this;this.$refs.addDutyData.validate(function(t){if(!t)return!1;var a=o()({},e.addDutyData);e.dutysData.splice(e.tindex,1,a),e.$refs.addDutyData.resetFields(),e.addDutyVisible=!1})},handleDelete3:function(e,t){this.dutysData.splice(e,1),this.$refs.addDutyData.resetFields(),this.addDutyVisible=!1,this.$message({message:"删除成功",type:"success"})},selectChange:function(){this.$forceUpdate()},timestampToTime:function(e,t){var a=new Date(e.submittime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()+" ")},goback:function(){var e=this;this.$confirm("<span style='color:#f00;'>数据未保存</span>，确定返回列表吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("my-event"),e.getyear()}).catch(function(){return!1})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},newYear:function(){var e=this,t={year:this.yearname};Object(d.k)(t,function(t){e.yearShow=!1,e.$message({message:"新增成功",type:"success"}),e.getyear(),e.yearname=""})},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},tableRowClassName:function(e){var t=e.row;e.rowIndex;return-1==t.status?"noedit":3==t.status?"lagbtn":void 0},submitAll:function(){var e=this;this.$refs.basicInfo.validate(function(t){if(t){var a=e.basicInfo.arealeadids;a=0==a.length?"":1==a.length?a[0]+",":a.join(",");var s=e.basicInfo.superdept.join(","),i={year:e.basicInfo.yearid,projectname:e.basicInfo.projectname,timenode:e.basicInfo.timenode,superdept:s,lederid:a,id:e.workid};i.ldeptList=e.leadsData,i.dutyDeptList=e.dutysData,i.ruleList=e.ruleList,i=r()(i),Object(c.q)(i,function(t){Object(c.h)({eid:e.workid},function(t){Object(c.N)({eid:e.workid},function(t){e.$emit("my-event"),e.$emit("add-event"),e.$message({message:"编辑成功",type:"success"})})})})}})}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")])],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.addheight},[a("el-row",{staticClass:"box jibeninfo",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent editplanwrap"},[a("el-form",{ref:"basicInfo",attrs:{"label-width":"100px",size:"medium",model:e.basicInfo}},[a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"年度：",prop:"yearid",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{focus:e.getyear,change:e.selectChange},model:{value:e.basicInfo.yearid,callback:function(t){e.$set(e.basicInfo,"yearid",t)},expression:"basicInfo.yearid"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"jiabtn"},[a("i",{staticClass:"icon el-icon-circle-plus",on:{click:function(t){e.yearShow=!0}}}),e._v(" "),e.yearShow?a("div",{staticClass:"awrap"},[a("p",[e._v("新增")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.yearname,callback:function(t){e.yearname=t},expression:"yearname"}}),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{on:{click:function(t){e.yearShow=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.newYear}},[e._v("确定")])],1)],1):e._e()])],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{staticClass:"ww1",attrs:{label:"牵头区领导：",prop:"arealeadids"}},[a("el-select",{attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.basicInfo.arealeadids,callback:function(t){e.$set(e.basicInfo,"arealeadids",t)},expression:"basicInfo.arealeadids"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"项目名称：",prop:"projectname"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.basicInfo.projectname,callback:function(t){e.$set(e.basicInfo,"projectname",t)},expression:"basicInfo.projectname"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"重要时间节点：",prop:"timenode"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入",autosize:{minRows:3}},model:{value:e.basicInfo.timenode,callback:function(t){e.$set(e.basicInfo,"timenode",t)},expression:"basicInfo.timenode"}})],1)],1),e._v(" "),a("div",{staticClass:"addbox"},[a("el-form-item",{attrs:{label:"督查单位：",prop:"superdept"}},[a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},on:{focus:function(t){e.getSeerList()}},model:{value:e.basicInfo.superdept,callback:function(t){e.$set(e.basicInfo,"superdept",t)},expression:"basicInfo.superdept"}},e._l(e.seeunitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}))],1)],1)])],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",{staticStyle:{height:"100%"}},[a("legend",[e._v("进展汇报")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("div",{staticClass:"speed"},[a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("上次进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},[a("p",[e._v(e._s(e.lastprogress))])])]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("存在问题：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("下步工作计划：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])}))]),e._v(" "),a("div",{staticClass:"filelist"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),a("div",{staticClass:"list"},[a("div",e._l(e.newReportList,function(t,s){return a("div",{key:s},e._l(t.newFiles,function(t,i){return a("div",{key:i},[a("a",{staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])])}))}))])])])])])])],1),e._v(" "),a("el-row",{staticClass:"box"},[a("el-col",{attrs:{span:24}},[a("fieldset",[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addRuleBtn}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.starttime,"YYYY-MM-DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",formatter:e.endtimeToTime,label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.editRuleBtn(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.delRuleBtn(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addLead}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"报送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"small"}},[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit2(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete2(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticClass:"addbtn",attrs:{size:"small",type:"primary"},on:{click:e.addDuty}},[e._v("新 增")]),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit3(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete3(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)])])],1)],1),e._v(" "),a("div",{staticClass:"goback"},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.goback}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitAll}},[e._v("保 存")])],1),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:e.ruleTitle,visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0,size:"small"}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRule}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptid",rules:[{required:!0,message:"请选择牵头单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.addLeadData.deptid,callback:function(t){e.$set(e.addLeadData,"deptid",t)},expression:"addLeadData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptid",rules:[{required:!0,message:"请选择责任单位",trigger:"change"}]}},[a("el-select",{attrs:{clearable:"",filterable:"",readonly:e.readOn,placeholder:"请选择"},on:{change:e.deptChange2},model:{value:e.addDutyData.deptid,callback:function(t){e.$set(e.addDutyData,"deptid",t)},expression:"addDutyData.deptid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var W={props:["ddheight","leadsData","dutysData","isEditShow","noEdit","ruleList","nodeList","basicInfo","reportDetail","workid","histableHeight","newReportList","isCenter","lastprogress"],components:{},data:function(){return{addItemData:{},itemTitle:"",itemVisible:!1,readOn:!1,changeNum:"",changeWord:"",tindex:0,isHistoryShow:!1,isProgressShow:!1,historyData:[],progressData:[],isDetailShow:!0,addLeadVisible:!1,addDutyVisible:!1,taskTitle:"",addLeadData:{},addDutyData:{},ruleVisible:!1,ruleTitle:"",ruleBtn:"",addRuleForm:{cycletype:1},weekList:[{value:"1",name:"周一"},{value:"2",name:"周二"},{value:"3",name:"周三"},{value:"4",name:"周四"},{value:"5",name:"周五"},{value:"6",name:"周六"},{value:"7",name:"周日"}],submitType:[{value:1,type:"区间"},{value:3,type:"月"},{value:4,type:"季度"},{value:5,type:"天"}],timeday:[{value:"1",name:"1日"},{value:"2",name:"2日"},{value:"3",name:"3日"},{value:"4",name:"4日"},{value:"5",name:"5日"},{value:"6",name:"6日"},{value:"7",name:"7日"},{value:"8",name:"8日"},{value:"9",name:"9日"},{value:"10",name:"10日"},{value:"11",name:"11日"},{value:"12",name:"12日"},{value:"13",name:"13日"},{value:"14",name:"14日"},{value:"15",name:"15日"},{value:"16",name:"16日"},{value:"17",name:"17日"},{value:"18",name:"18日"},{value:"19",name:"19日"},{value:"20",name:"20日"},{value:"21",name:"21日"},{value:"22",name:"22日"},{value:"23",name:"23日"},{value:"24",name:"24日"},{value:"25",name:"25日"},{value:"26",name:"26日"},{value:"27",name:"27日"},{value:"28",name:"28日"},{value:"29",name:"29日"},{value:"30",name:"30日"},{value:"31",name:"31日"}],dateShow1:!0,dateShow2:!1,dateShow3:!1,dateShow4:!1,dateShow5:!1,region:"",monthday:"",quarter:"",weekday:"",daytime:"",cycleNum:1,ruleIndex:-1}},created:function(){},methods:{weekFormat:function(e,t){switch(t){case"1":return"周一";case"2":return"周二";case"3":return"周三";case"4":return"周四";case"5":return"周五";case"6":return"周六";case"7":return"周日"}},nullFormat:function(e,t){return"null"==t||null==t?"<span>/</span>":"<span>"+t+"</span>"},stateFormat:function(e,t){switch(t){case 2:return"未执行";case 1:return"执行中";case 0:return"失效"}},detailRuleBtn:function(e,t){switch(t.cycletype){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.region=t.cycletime;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1,this.weekday=t.cycletime;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1,this.monthday=t.cycletime;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1,this.quarter=t.cycletime;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1,this.daytime=t.cycletime}this.ruleVisible=!0,this.ruleTitle="报送规则详情",this.ruleBtn="确定",this.changeNum="detail",this.addRuleForm=o()({},t),this.addRuleForm.daytime=new Date(this.addRuleForm.daytime),this.addRuleForm.starttime=new Date(this.addRuleForm.starttime),this.addRuleForm.endtime=new Date(this.addRuleForm.endtime),this.ruleIndex=e},ctypeFormat:function(e,t){switch(t){case 1:return"区间";case 2:return"周";case 3:return"月";case 4:return"季度";case 5:return"天"}},cycleChange:function(){switch(this.cycleNum=this.addRuleForm.cycletype,this.cycleNum){case 1:this.dateShow1=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 2:this.dateShow2=!0,this.dateShow1=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 3:this.dateShow3=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow4=!1,this.dateShow5=!1;break;case 4:this.dateShow4=!0,this.dateShow1=!1,this.dateShow2=!1,this.dateShow3=!1,this.dateShow5=!1;break;case 5:this.dateShow5=!0,this.dateShow2=!1,this.dateShow3=!1,this.dateShow4=!1,this.dateShow1=!1}},timestampToTime:function(e,t){new Date(e.stoptime);return e.stoptime|dateformat("YYYY-MM-DD HH:mm:ss")},enddateToTime:function(e,t){var a=new Date(e.endtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()+" ")},timestampToTime2:function(e,t){var a=new Date(e.createtime);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+a.getDate()},toEdit:function(){this.$emit("edit-event")},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},handleDetail2:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addLeadVisible=!0,this.addLeadData=o()({},t)},submitLead:function(){this.addLeadVisible=!1},handleDetail3:function(e,t){this.changeNum="read",this.changeWord="确认",this.taskTitle="详情",this.readOn=!0,this.addDutyVisible=!0,this.addDutyData=o()({},t)},submitDuty:function(){this.addDutyVisible=!1},returnDetail:function(){this.isDetailShow=!0,this.isHistoryShow=!1},returnDetail2:function(){this.isDetailShow=!0,this.isProgressShow=!1},lookProgress:function(){var e=this,t={situationid:this.workid};Object(c.L)(t,function(t){e.progressData=t.data.obj;for(var a=[],s=0;s<e.progressData.length;s++){var i=e.progressData[s].filepath,l=[];if(null==i)l=[];else{var r=(a=i.split(",")).length;""==a[r-1]&&a.splice(r-1,1);for(var n=a,o=0;o<n.length;o++){var d={};d.url=e.imgIp+n[o],d.name=n[o],l.push(d)}}e.progressData[s].filepath=l}}),this.isDetailShow=!1,this.isProgressShow=!0},goback:function(){1==this.isCenter?this.$router.push({path:"/index"}):2==this.isCenter?this.$router.push({path:"/personCenter"}):this.$emit("my-event")},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addplan"},[e.isDetailShow?a("div",[a("div",{staticClass:"pbtn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goback}},[e._v("返 回")]),e._v(" "),e.isEditShow?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.noEdit,expression:"noEdit"}],class:2==e.isCenter?"noeditbtn":"",attrs:{size:"small",type:"primary"},on:{click:e.toEdit}},[e._v("编辑")]):e._e()],1),e._v(" "),a("div",{staticClass:"addcontent",style:e.ddheight},[a("el-row",{staticClass:"box jibeninfo",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-form",{ref:"basicInfo",attrs:{size:"small",model:e.basicInfo,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"年度：",prop:"yearname"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.yearname,callback:function(t){e.$set(e.basicInfo,"yearname",t)},expression:"basicInfo.yearname"}})],1),e._v(" "),a("el-form-item",{staticClass:"qt",attrs:{label:"牵头区领导：",prop:"leaders"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.leaders,callback:function(t){e.$set(e.basicInfo,"leaders",t)},expression:"basicInfo.leaders"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称：",prop:"projectname"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3},readonly:""},model:{value:e.basicInfo.projectname,callback:function(t){e.$set(e.basicInfo,"projectname",t)},expression:"basicInfo.projectname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重要时间节点：",prop:"timenode"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3},readonly:""},model:{value:e.basicInfo.timenode,callback:function(t){e.$set(e.basicInfo,"timenode",t)},expression:"basicInfo.timenode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"督查单位：",prop:"superdept"}},[a("el-input",{attrs:{readonly:""},model:{value:e.basicInfo.superdept,callback:function(t){e.$set(e.basicInfo,"superdept",t)},expression:"basicInfo.superdept"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("进展填报")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{size:"small",type:"primary"},on:{click:e.lookProgress}},[e._v("报送历史")]),e._v(" "),a("div",{staticClass:"speed"},[a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("上次进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},[a("p",[e._v(e._s(e.lastprogress))])])]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("进展情况：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("存在问题：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])}))]),e._v(" "),a("div",{staticClass:"pbox"},[a("p",{staticClass:"tt"},[e._v("下步工作计划：")]),e._v(" "),a("div",{staticClass:"conbox"},e._l(e.newReportList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])}))]),e._v(" "),a("div",{staticClass:"filelist"},[a("p",{staticClass:"tt"},[e._v("附件")]),e._v(" "),a("div",{staticClass:"list"},[a("div",e._l(e.newReportList,function(t,s){return a("div",{key:s},e._l(t.newFiles,function(t,i){return a("div",{key:i},[a("a",{staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])])}))}))])])])],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:24}},[a("fieldset",{staticStyle:{width:"100%"}},[a("legend",[e._v("报送规则")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.ruleList,"highlight-current-row":"","cell-class-name":e.cellClassName,height:"200px"}},[a("el-table-column",{attrs:{prop:"stagename",label:"阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletype",label:"报送周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.ctypeFormat(t,t.row.cycletype))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cycletime",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cycletype?a("p",[e._v("每隔"+e._s(t.row.cycletime)+"天")]):e._e(),e._v(" "),2==t.row.cycletype?a("p",[a("span",{domProps:{innerHTML:e._s(e.weekFormat(t,t.row.cycletime))}})]):3==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):4==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime)+"日")]):5==t.row.cycletype?a("p",[e._v(e._s(t.row.cycletime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warnday",label:"提前预警(天)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.starttime,"YYYY-MM-DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",formatter:e.enddateToTime,label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[1==t.row.status?a("el-tag",{attrs:{size:"medium"}},[a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}),e._v(" "),a("span",[e._v("执行中")])]):2==t.row.status?a("el-tag",{attrs:{size:"medium"}},[a("i",{staticClass:"fa mark"}),e._v(" "),a("span",[e._v("未执行")])]):0==t.row.status?a("el-tag",{attrs:{size:"medium"}},[a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}),e._v(" "),a("span",[e._v("失效")])]):a("p",[e._v("/")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.detailRuleBtn(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])])],1),e._v(" "),a("el-row",{staticClass:"box",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("牵头单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo dtable",staticStyle:{width:"100%"},attrs:{border:"",data:e.leadsData,"highlight-current-row":"",height:"250px","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"牵头单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"报送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{size:"small"}},[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail2(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("fieldset",[a("legend",[e._v("责任单位")]),e._v(" "),a("div",{staticClass:"boxcontent"},[a("el-table",{staticClass:"tableinfo dtable",staticStyle:{width:"100%"},attrs:{border:"",data:e.dutysData,height:"250px","highlight-current-row":"","cell-class-name":e.cellClassName}},[a("el-table-column",{attrs:{prop:"deptName",label:"责任单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leadername",label:"责任领导"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentname",label:"经办人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail3(t.$index,t.row)}}},[e._v("详情")])]}}])})],1)],1)])])],1)],1)]):e._e(),e._v(" "),e.isProgressShow?a("div",{staticClass:"history"},[a("p",{staticClass:"title"},[e._v("历史进展汇报")]),e._v(" "),a("div",{staticClass:"hbtns"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.returnDetail2}},[e._v("返 回")])],1),e._v(" "),a("el-table",{staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{border:"",data:e.progressData,"highlight-current-row":"",height:e.histableHeight}},[a("el-table-column",{attrs:{prop:"reportdept",label:"报送单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"报送时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateformat")(t.row.createtime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"question",label:"总体情况"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wenti",label:"存在问题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"measure",label:"下步工作计划"}}),e._v(" "),a("el-table-column",{attrs:{prop:"validate",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.validate?a("el-tag",{attrs:{type:"info","disable-transitions":""}},[a("span",[e._v("未审核")])]):1==t.row.validate?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[a("span",[e._v("审核未通过")])]):a("el-tag",{attrs:{type:"success","disable-transitions":""}},[a("span",[e._v("审核通过")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"审核不通过原因"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.nullFormat(t,t.row.reason))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"filepath",label:"附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.filepath||""==t.row.filepath?a("p",[e._v("无")]):e._l(t.row.filepath,function(t,s){return a("a",{key:s,staticClass:"filetitle",staticStyle:{"text-align":"left"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(s+1)+". "+e._s(t.name))])})]}}])})],1)],1):e._e(),e._v(" "),a("el-dialog",{staticClass:"rule-dialog",attrs:{title:"详情",visible:e.ruleVisible,width:"700px"},on:{"update:visible":function(t){e.ruleVisible=t}}},[a("el-form",{ref:"addRuleForm",attrs:{model:e.addRuleForm,inline:!0,"label-width":"93px","append-to-body":!0}},[a("el-form-item",{attrs:{label:"阶段：",prop:"stagename"}},[a("el-input",{attrs:{readonly:"",placeholder:"请输入"},model:{value:e.addRuleForm.stagename,callback:function(t){e.$set(e.addRuleForm,"stagename",t)},expression:"addRuleForm.stagename"}})],1),e._v(" "),a("el-form-item",{staticClass:"day",attrs:{label:"提前：",prop:"warnday"}},[a("el-input",{attrs:{readonly:""},model:{value:e.addRuleForm.warnday,callback:function(t){e.$set(e.addRuleForm,"warnday",t)},expression:"addRuleForm.warnday"}},[a("template",{slot:"append"},[e._v("天预警")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"报送周期：",prop:"cycletype"}},[a("el-select",{attrs:{clearable:"",disabled:"",placeholder:"请选择"},on:{change:function(t){e.cycleChange()}},model:{value:e.addRuleForm.cycletype,callback:function(t){e.$set(e.addRuleForm,"cycletype",t)},expression:"addRuleForm.cycletype"}},e._l(e.submitType,function(e){return a("el-option",{key:e.value,attrs:{label:e.type,value:e.value}})}))],1),e._v(" "),e.dateShow1?a("el-form-item",{staticClass:"day",attrs:{label:"每隔：",prop:"region"}},[a("el-input",{attrs:{readonly:""},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("template",{slot:"append"},[e._v("天报送")])],2)],1):e._e(),e._v(" "),e.dateShow2?a("el-form-item",{attrs:{label:"日期：",prop:"weekday"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}},e._l(e.weekList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow3?a("el-form-item",{attrs:{label:"日期：",prop:"monthday"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.monthday,callback:function(t){e.monthday=t},expression:"monthday"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow4?a("el-form-item",{attrs:{label:"日期：",prop:"quarter"}},[a("el-select",{attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:e.quarter,callback:function(t){e.quarter=t},expression:"quarter"}},e._l(e.timeday,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1):e._e(),e._v(" "),e.dateShow5?a("el-form-item",{attrs:{label:"日期：",prop:"daytime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.daytime,callback:function(t){e.daytime=t},expression:"daytime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.starttime,callback:function(t){e.$set(e.addRuleForm,"starttime",t)},expression:"addRuleForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime",rules:[{required:!0,message:"时间不能为空",trigger:"change"}]}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",readonly:"","value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.addRuleForm.endtime,callback:function(t){e.$set(e.addRuleForm,"endtime",t)},expression:"addRuleForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ruleVisible=!1}}},[e._v(e._s(e.ruleBtn))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addLeadVisible,width:"800px"},on:{"update:visible":function(t){e.addLeadVisible=t}}},[a("el-form",{ref:"addLeadData",attrs:{inline:!0,model:e.addLeadData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"牵头单位：",prop:"deptName"}},[a("el-input",{model:{value:e.addLeadData.deptName,callback:function(t){e.$set(e.addLeadData,"deptName",t)},expression:"addLeadData.deptName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addLeadData.leadername,callback:function(t){e.$set(e.addLeadData,"leadername",t)},expression:"addLeadData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{model:{value:e.addLeadData.leaderphone,callback:function(t){e.$set(e.addLeadData,"leaderphone",t)},expression:"addLeadData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{model:{value:e.addLeadData.agentname,callback:function(t){e.$set(e.addLeadData,"agentname",t)},expression:"addLeadData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{model:{value:e.addLeadData.agentphone,callback:function(t){e.$set(e.addLeadData,"agentphone",t)},expression:"addLeadData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:e.addLeadData.duty,callback:function(t){e.$set(e.addLeadData,"duty",t)},expression:"addLeadData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitLead}},[e._v(e._s(e.changeWord))])],1)],1),e._v(" "),a("el-dialog",{staticClass:"task-dialog task-dialog2",attrs:{title:e.taskTitle,visible:e.addDutyVisible,width:"800px"},on:{"update:visible":function(t){e.addDutyVisible=t}}},[a("el-form",{ref:"addDutyData",attrs:{inline:!0,model:e.addDutyData,"label-width":"100px","append-to-body":!0}},[a("div",{staticClass:"leabox"},[a("el-form-item",{attrs:{label:"责任单位：",prop:"deptName"}},[a("el-input",{model:{value:e.addDutyData.deptName,callback:function(t){e.$set(e.addDutyData,"deptName",t)},expression:"addDutyData.deptName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"责任领导：",prop:"leadername"}},[a("el-input",{model:{value:e.addDutyData.leadername,callback:function(t){e.$set(e.addDutyData,"leadername",t)},expression:"addDutyData.leadername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"leaderphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.leaderphone,callback:function(t){e.$set(e.addDutyData,"leaderphone",t)},expression:"addDutyData.leaderphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"经办人：",prop:"agentname"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentname,callback:function(t){e.$set(e.addDutyData,"agentname",t)},expression:"addDutyData.agentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"agentphone"}},[a("el-input",{attrs:{readonly:e.readOn},model:{value:e.addDutyData.agentphone,callback:function(t){e.$set(e.addDutyData,"agentphone",t)},expression:"addDutyData.agentphone"}})],1),e._v(" "),a("div",{staticClass:"leabox leabox2"},[a("el-form-item",{attrs:{label:"工作职责：",prop:"duty"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},readonly:e.readOn},model:{value:e.addDutyData.duty,callback:function(t){e.$set(e.addDutyData,"duty",t)},expression:"addDutyData.duty"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitDuty}},[e._v(e._s(e.changeWord))])],1)],1)],1)},staticRenderFns:[]};var E={name:"threePlan",components:{addthreeWork:a("VU/8")(O,M,!1,function(e){a("2FzU")},null,null).exports,editthreeWork:a("VU/8")(z,B,!1,function(e){a("RkB1")},null,null).exports,dthreeWork:a("VU/8")(W,q,!1,function(e){a("IlA/")},null,null).exports,reportProgress:w.a,batchRule:_.a,importFile:k.a},data:function(){var e;return e={downTypeVisible:!1,downType:"",upbtnDisabled:!0,showYearbox:!0,lastprogress:"",isCenter:3,reportData:{},laststate:"",reportVisible:{visible:!1},itemShow:9,reportid:-1,reportBasic:{},allitems:[],batchHeight:"",batchVisible:!1,allShow:!0,isKeywork:!1,isKeyitem:!0,isKeyarea:!1,loading:!0,isShow:!0,addShow:!1,editShow:!1,detailShow:!1,processVisible:!1,deptlist:[],userlist:[],filters:{},years:[],statuss:[{value:0,status:"正常"},{value:1,status:"预警"},{value:2,status:"逾期"},{value:3,status:"滞后"},{value:4,status:"严重滞后"},{value:-1,status:"完结"}],tableData:[],bitemArr:[],bitemPos:0,sitemArr:[],sitemPos:0,threeArr:[],threePos:0},i()(e,"deptlist",[]),i()(e,"leaderlist",[]),i()(e,"processData",{}),i()(e,"evolveData",{}),i()(e,"fileList",[]),i()(e,"planCheckList",JSON.parse(this.$store.getters.userdata).planCheckList),i()(e,"loginid",JSON.parse(this.$store.getters.userdata).id),i()(e,"isAddShow",!1),i()(e,"isEditShow",!1),i()(e,"isReportShow",!1),i()(e,"isOverShow",!1),i()(e,"isDownShow",!1),i()(e,"isProcessShow",!1),i()(e,"tasklist",[]),i()(e,"upfile",""),i()(e,"urlIp",""),i()(e,"imgIp",""),i()(e,"fileArr",[]),i()(e,"pid",""),i()(e,"basicInfo",{}),i()(e,"workList",[]),i()(e,"astatus",""),i()(e,"tableHeight","300px"),i()(e,"addheight","height:500px"),i()(e,"ddheight","height:500px"),i()(e,"histableHeight","300px"),i()(e,"colums",""),i()(e,"ishidden1",!0),i()(e,"ishidden2",!0),i()(e,"ishidden3",!0),i()(e,"ishidden4",!0),i()(e,"ishidden5",!0),i()(e,"ishidden6",!0),i()(e,"ishidden7",!0),i()(e,"cellhidden",[]),i()(e,"showitemlist",[{name:"牵头区领导",value:1},{name:"牵头单位",value:2},{name:"责任单位",value:3},{name:"总体情况",value:4},{name:"存在问题",value:5},{name:"解决措施",value:6}]),i()(e,"totalStatus",[{value:0,status:"正常"},{value:3,status:"滞后"},{value:4,status:"严重滞后"},{value:-1,status:"完结"}]),i()(e,"formStatus",[{value:0,status:"正常"},{value:1,status:"预警"},{value:2,status:"逾期"},{value:-1,status:"完结"}]),i()(e,"leadsData",[]),i()(e,"dutysData",[]),i()(e,"nodeList",[]),i()(e,"noEdit",!0),i()(e,"ruleList",[]),i()(e,"currentPage",1),i()(e,"pageSize",10),i()(e,"totals",0),i()(e,"workid",-1),i()(e,"reportDetail",{}),i()(e,"biglist",[]),i()(e,"minlist",[]),i()(e,"threeitemList",[]),i()(e,"typemodel",2),i()(e,"newReportList",[]),i()(e,"defaturl",""),i()(e,"importdataVisible",{visible:!1}),i()(e,"pdatalist",[]),i()(e,"importKeyItemList",""),i()(e,"filedatas",[]),i()(e,"otherdata",{}),i()(e,"chooseyear",{}),i()(e,"curYear",2019),i()(e,"yearid",0),i()(e,"isExport",{visible:!0}),e},created:function(){this.upfile=x.j,this.imgIp=x.a,this.defaturl=S.a,this.importKeyItemList=x.c,this.browerHeight(),this.isshowCheck(),this.getDeptlist(),this.getLeaderList(),this.getyear(),this.getThreePlan(),this.centerDetail()},methods:{keyitemDownload:function(){this.downTypeVisible=!0},downDatalist:function(){1==this.downType?window.open(this.defaturl+"/yy/importSituationExport"):window.open(this.defaturl+"/yy/importSituationExportworld"),this.downTypeVisible=!1},downMoudle:function(){window.open(this.defaturl+"/templateDownload/importSituationDown")},getAllDatas:function(){var e=this;Object(c.t)("",function(t){if(null==t.data.obj)e.allitems=[];else{e.allitems=t.data.obj;for(var a=0;a<e.allitems.length;a++)e.allitems[a].name=e.allitems[a].projectname}})},batchRule:function(){this.allShow=!1,this.batchVisible=!0,this.getAllDatas()},batchBack:function(){this.allShow=!0,this.batchVisible=!1,this.getThreePlan()},numberFormatter:function(e,t,a,s){return s+1+(this.currentPage-1)*this.pageSize},handleDelete:function(e,t,a){var s=this;this.$confirm('<span style="color:#f00;">该操作将删除此条信息</span>，确定删除吗?',"提示",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var e={id:a};Object(c.n)(e,function(e){0==e.data.code?(s.$message({message:"删除成功",type:"success"}),s.getThreePlan()):s.$message({message:"删除失败",type:"error"})})}).catch(function(){s.$message({message:"取消删除",type:"warning"})})},namesChange:function(e,t){return""==t||null==t?"":t.split(",")},dataRemove:function(e,t){var a=e.response.obj;this.filedatas.splice(this.removeArr(this.filedatas,a),1)},handleExceed:function(e,t){this.$message.warning({message:"当前限制只能上传 1 个文件，请先删除已上传的文件，再重新上传！",duration:5e3})},hasYear:function(){this.upfileDisabled=!1},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="xls"===t,s="xlsx"===t;return a||s||this.$message({message:"上传文件只能是 xls、xlsx格式!",type:"warning"}),a||s},dataSuccess:function(e,t){if(-1==e.code)this.errorShow=!0,this.successShow=!1,this.sureImport=!0;else{this.successShow=!0,this.errorShow=!1,this.sureImport=!1;var a=e.obj;this.filedatas.push(a),this.getThreePlan()}},loadData:function(){this.importdataVisible.visible=!0,this.showYearbox=!0,this.upbtnDisabled=!1},sureImportData:function(){var e=this;this.$refs.chooseyear.validate(function(t){t&&(e.otherdata.year=parseInt(e.chooseyear.year),e.otherdata.typemodel=2,e.$refs.uploaddata.submit(),e.importdataVisible=!1,e.$message({type:"success",message:"导入成功!"}))})},totalstateChange:function(e,t){var a=this,s={totalstatus:t.totalstatus,id:t.id};Object(c.j)(s,function(e){a.getThreePlan(),a.$message({type:"success",message:"修改状态成功!"})})},totalstatusFormat:function(e,t){switch(t){case 0:return"正常";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},formstatusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case-1:return"完结"}},browerHeight:function(){var e=document.body.clientHeight,t=e-390,a=e-280,s=e-350,i=e-250;this.batchHeight=i+"px",this.tableHeight=t+"px",this.addheight="height:"+s+"px",this.ddheight="height:"+a+"px",this.histableHeight=s+"px"},hiddenDatas:function(){var e=this,t={userid:this.loginid,catagory:2,typemodel:2};Object(D.B)(t,function(t){e.cellhidden=t.data.obj,e.showItems()})},selectChange:function(){this.$forceUpdate()},showItems:function(){this.ishidden1=!0,this.ishidden2=!0,this.ishidden3=!0,this.ishidden4=!0,this.ishidden5=!0,this.ishidden6=!0,this.ishidden7=!0,this.ishidden8=!0,this.ishidden9=!0;for(var e=0;e<this.cellhidden.length;e++){switch(this.cellhidden[e]){case 1:this.ishidden1=!1;break;case 2:this.ishidden2=!1;break;case 3:this.ishidden3=!1;break;case 4:this.ishidden4=!1;break;case 5:this.ishidden5=!1;break;case 6:this.ishidden6=!1;break;case 7:this.ishidden7=!1;break;case 8:this.ishidden8=!1;break;case 9:this.ishidden9=!1}}},itemChange:function(){var e=this;this.$forceUpdate(),0==this.cellhidden.length?this.colums="":1==this.cellhidden.length?this.colums=this.cellhidden[0]+",":this.colums=this.cellhidden.join(",");var t={colums:this.colums,userId:this.loginid,catagory:2};Object(D.o)(t,function(t){e.hiddenDatas(),e.showItems(),e.colums=""})},getThreePlan:function(){var e=this;this.loading=!0;var t=this.filters;t.userid=this.loginid,t.pageNum=this.currentPage,t.pageSize=this.pageSize,Object(c.D)(t,function(t){if(null==t.data.obj||""===t.data.obj)e.tableData=[],e.totals=0,e.loading=!1;else{e.tableData=t.data.obj.datas;for(var a=0;a<e.tableData.length;a++)if(null==e.tableData[a].leadername)e.tableData[a].leadername="";else{var s=e.tableData[a].leadername;e.tableData[a].leadername=s.join(",")}e.totals=t.data.obj.total,e.loading=!1}})},handleSizeChange:function(e){this.pageSize=e,this.getThreePlan()},handleCurrentChange:function(e){this.currentPage=e,this.getThreePlan()},isshowCheck:function(){if(null!==this.planCheckList)for(var e=0;e<this.planCheckList.length;e++){switch(this.planCheckList[e]){case"C-add":this.isAddShow=!0;break;case"C-edit":this.isEditShow=!0;break;case"C-report":this.isReportShow=!0;break;case"C-over":this.isOverShow=!0;break;case"C-down":this.isDownShow=!0;break;case"C-process":this.isProcessShow=!0}}},getDeptlist:function(){var e=this;Object(D.e)("",function(t){e.deptlist=t.data.obj})},getLeaderList:function(){var e=this;Object(D.G)("",function(t){e.leaderlist=t.data.obj})},getyear:function(){var e=this;Object(d.B)("",function(t){e.years=t.data.obj})},handleBack:function(){this.isShow=!0,this.addShow=!1,this.detailShow=!1,this.editShow=!1},statusFormat:function(e,t){switch(t){case 0:return"正常";case 1:return"预警";case 2:return"逾期";case 3:return"滞后";case 4:return"严重滞后";case-1:return"完结"}},cellClassName:function(e){var t=e.row;e.column,e.rowIndex;switch(t.status){case 1:return"yellow";case 2:return"red";case 3:return"zh";case 4:return"zhou";case-1:return"gray"}},tableRowClassName:function(e){var t=e.row;e.rowIndex;return-1==t.status?"noedit":4==t.status?"lagbtn":void 0},getDatas:function(){this.getThreePlan()},resetForm:function(e){this.$refs[e].resetFields(),this.getThreePlan()},redetailFuc:function(e){var t=this;Object(c.C)({id:e},function(e){t.detailData=e.data.obj,t.reportBasic={projectname:t.detailData.projectname,timenode:t.detailData.timenode,yearname:t.detailData.yearname};var a=t.detailData.leadername;t.reportBasic.leaders=null==a?"":a.join("，");var s=e.data.obj.ldeptList,i=[];if(null==s)i=[];else for(var l=0;l<s.length;l++)i.push(s[l].deptName);t.reportBasic.leaderDeptName=i.join(", ")})},handleEvolve:function(e,t){var a=this;this.reportData={},this.fileList=[],this.fileArr=[],this.laststate="",this.isExport.visible=!0,this.workid=t.id,this.redetailFuc(this.workid),Object(c.E)({sid:this.workid,userid:this.loginid},function(e){a.laststate=e.data.obj.question});var s={};s.situationid=t.id,s.userid=this.loginid,Object(c.I)(s,function(e){if(null==e.data.obj||0==e.data.obj){a.reportVisible.visible=!0;var t={userid:a.loginid,termid:a.workid,modeltype:9};Object(D.L)(t,function(e){var t=e.data.obj;if(null==t)a.reportData={userid:a.loginid},a.reportid=-1;else{a.isExport.visible=!1,a.reportid=t.id,a.reportData={userid:a.loginid,question:t.question,measure:t.plan,wenti:t.problem,remark:t.remark};var s=t.filepath,i={};if(null==s||""==s)a.fileList=[],a.fileArr=[];else{var l;l=(s=s.replace(/,$/gi,"")).split(",");for(var r=0;r<l.length;r++)i.name=l[r],i.url=a.imgIp+l[r],a.fileList.push(i),a.fileArr.push(i.name)}}})}else a.isExport.visible=!1,a.$confirm("<span style='color:#f00;'>已重复报送</span>，确定继续报送吗？","提示",{dangerouslyUseHTMLString:!0,type:"warning",center:!0,modal:!1,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){a.reportVisible.visible=!0,a.reportData.userid=a.loginid,a.reportData.question=e.data.obj.question,a.reportData.measure=e.data.obj.measure,a.reportData.wenti=e.data.obj.wenti,a.reportData.remark=e.data.obj.remark;var t=e.data.obj.filepath,s={};if(null==t||""==t)a.fileList=[],a.fileArr=[];else{var i;i=(t=t.replace(/,$/gi,"")).split(",");for(var l=0;l<i.length;l++)s.name=i[l],s.url=a.imgIp+i[l],a.fileList.push(s),a.fileArr.push(s.name)}}).catch(function(){a.$message({type:"info",message:"取消报送"}),a.reportVisible.visible=!1})})},removeArr:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return a;return!1},handleRemove:function(e,t){var a=e.name;this.fileArr.splice(this.removeArr(this.fileArr,a),1)},handlePreview:function(e){},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handleSuccess:function(e,t){var a=e.obj;this.fileArr.push(a)},saveReport:function(){var e=this;this.$refs.reportChild.$refs.reportData.validate(function(t){if(t){if(0==e.fileArr.length)"";else 1==e.fileArr.length?e.fileArr[0]+",":e.fileArr.join(",");var a=e.reportData;a.problem=e.reportData.wenti,a.plan=e.reportData.measure,-1==e.reportid||(a.id=e.reportid),a.modeltype=9,a.filepath="",a.termid=e.workid,Object(D.N)(a,function(t){e.$message({type:"success",message:"保存成功"}),e.isExport.visible=!1})}})},submitReport:function(){var e=this;this.$refs.reportChild.$refs.reportData.validate(function(t){if(t){var a="";e.fileArr==[]?a="":1==e.fileArr.length?a+=e.fileArr[0]+",":a=e.fileArr.join(",");var s=e.reportData;s.situationid=e.workid,s.validate=0,s.userid=e.loginid,s.filepath=a,Object(c.a)(s,function(t){e.$alert("<span style='color:#f00;'>报送成功</span>，请等待上级部门审核通过","提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"我知道了",type:"success",center:!0,modal:!1}),e.reportVisible=!1,e.getThreePlan()})}})},detailFuc:function(e){var t=this;Object(c.C)(e,function(e){t.detailData=e.data.obj,t.basicInfo={projectname:t.detailData.projectname,timenode:t.detailData.timenode,yearname:t.detailData.yearname,superdept:t.detailData.superdept};var a=t.detailData.leadername;t.basicInfo.leaders=null==a?"":a.join("，"),null==t.detailData.ldeptList&&(t.detailData.ldeptList=[]),null==t.detailData.dutyDeptList&&(t.detailData.dutyDeptList=[]),null==t.detailData.ruleList&&(t.detailData.ruleList=[]),t.leadsData=t.detailData.ldeptList,t.dutysData=t.detailData.dutyDeptList,t.ruleList=t.detailData.ruleList,null==t.detailData.progressList&&(t.detailData.progressList=[]),t.newReportList=t.detailData.progressList;for(var s=0;s<t.newReportList.length;s++){t.newReportList[s].newFiles=[];var i=t.newReportList[s].filepath;if(""==i||null==i)t.newReportList[s].newFiles=[];else{var l=(i=i.split(",")).length;""==i[l-1]&&i.splice(l-1,1);var r=i;for(s=0;s<r.length;s++){var n={};n.url=t.imgIp+r[s],n.name=r[s],t.newReportList[s].newFiles.push(n)}}}Object(c.E)({sid:t.workid,userid:t.loginid},function(e){t.lastprogress=e.data.obj.question})})},handleDetail:function(e,t,a){-1==t.totalstatus?this.noEdit=!1:this.noEdit=!0,this.isShow=!1,this.detailShow=!0,this.noEdit=!0,this.workid=a;var s={id:a};this.detailFuc(s)},centerDetail:function(){if(void 0==this.$route.query.workid)this.workid="",this.isCenter=3,this.getThreePlan();else{if(2!=this.$route.query.sortnum)return!1;this.workid=this.$route.query.workid,this.isCenter=this.$route.query.isCenter,this.isShow=!1,this.detailShow=!0,this.noEdit=!0;var e={id:this.workid};this.detailFuc(e)}},editFuc:function(e){var t=this;Object(c.C)(e,function(e){t.detailData=e.data.obj;var a=[];a=null==t.detailData.superdept?[]:t.detailData.superdept.split(","),t.basicInfo={projectname:t.detailData.projectname,timenode:t.detailData.timenode,yearid:t.detailData.year,superdept:a},t.basicInfo.arealeadids=t.detailData.leadleaderid,null==t.detailData.ldeptList&&(t.detailData.ldeptList=[]),null==t.detailData.dutyDeptList&&(t.detailData.dutyDeptList=[]),null==t.detailData.ruleList&&(t.detailData.ruleList=[]),t.leadsData=t.detailData.ldeptList,t.dutysData=t.detailData.dutyDeptList,t.ruleList=t.detailData.ruleList,t.newReportList=[],null==t.detailData.reportList&&(t.detailData.reportList=[]),t.newReportList=t.detailData.reportList;for(var s=0;s<t.newReportList.length;s++){t.newReportList[s].newFiles=[];var i=t.newReportList[s].filepath;if(""==i||null==i)t.newReportList[s].newFiles=[];else{var l=(i=i.split(",")).length;""==i[l-1]&&i.splice(l-1,1);for(var r=i,n=0;n<r.length;n++){var o={};o.url=t.imgIp+r[n],o.name=r[n],t.newReportList[s].newFiles.push(o)}}}Object(c.E)({sid:t.workid,userid:t.loginid},function(e){t.lastprogress=e.data.obj.question})})},toeditPage:function(){this.detailShow=!0;var e={id:this.workid};this.basicInfo={},this.editShow=!0,this.isShow=!1,this.detailShow=!1,this.getYear(),this.editFuc(e)},handleEdit:function(e,t,a){this.getyear(),this.editShow=!0,this.isShow=!1,this.workid=a,this.basicInfo={};var s={id:a};this.editFuc(s)},currentYear:function(){var e=new Date;this.curYear=e.getFullYear();for(var t=0;t<this.years.length;t++)this.curYear==this.years[t].year&&(this.yearid=this.years[t].id)},handleAdd:function(){this.currentYear(),this.isShow=!1,this.addShow=!0}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[e.allShow?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},[a("el-row",[a("el-col",{staticClass:"toolbar toolbar2",attrs:{span:24}},[a("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters,size:"small"}},[a("el-form-item",{staticClass:"zt",attrs:{label:"年度：",prop:"yearid"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.filters.yearid,callback:function(t){e.$set(e.filters,"yearid",t)},expression:"filters.yearid"}},e._l(e.years,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"ld",attrs:{label:"牵头区领导：",prop:"arealeaderid",filterable:""},on:{change:e.selectChange}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.filters.arealeaderid,callback:function(t){e.$set(e.filters,"arealeaderid",t)},expression:"filters.arealeaderid"}},e._l(e.leaderlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"ld",attrs:{label:"牵头单位：",prop:"leaderid"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.leaderid,callback:function(t){e.$set(e.filters,"leaderid",t)},expression:"filters.leaderid"}},e._l(e.deptlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"zt",attrs:{label:"材料报送：",prop:"formstatus"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.formstatus,callback:function(t){e.$set(e.filters,"formstatus",t)},expression:"filters.formstatus"}},e._l(e.formStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticClass:"zt",attrs:{label:"总体状态：",prop:"totalstatus"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},on:{change:e.selectChange},model:{value:e.filters.totalstatus,callback:function(t){e.$set(e.filters,"totalstatus",t)},expression:"filters.totalstatus"}},e._l(e.statuss,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getDatas("filters")}}},[e._v("搜 索")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("filters")}}},[e._v("重 置")])],1),e._v(" "),a("div",{staticClass:"toolbtns"},[a("div",[e.isAddShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新 增")]):e._e(),e._v(" "),e.isDownShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.keyitemDownload}},[e._v("报表下载")]):e._e(),e._v(" "),e.isAddShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.loadData}},[e._v("导入数据")]):e._e(),e._v(" "),e.isEditShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.batchRule}},[e._v("报送规则")]):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"选择隐藏列：",prop:"cellhidden"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"全部"},on:{change:e.itemChange},model:{value:e.cellhidden,callback:function(t){e.cellhidden=t},expression:"cellhidden"}},e._l(e.showitemlist,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tableinfo",staticStyle:{width:"100%"},attrs:{"empty-text":"无",data:e.tableData,border:"",height:e.tableHeight,"cell-class-name":e.cellClassName,"row-class-name":e.tableRowClassName,"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)"}},[a("el-table-column",{attrs:{label:"序号",width:"60",formatter:e.numberFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectname",width:"150px",label:"项目名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"1.8"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.projectname))]),e._v(" "),a("p",{staticClass:"title-ellipsis"},[e._v(e._s(t.row.projectname))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"timenode",width:"150px",label:"重要时间节点"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"1.8"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.timenode))]),e._v(" "),a("p",{staticClass:"title-ellipsis"},[e._v(e._s(t.row.timenode))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"superdept",label:"督查单位"}}),e._v(" "),e.ishidden1?a("el-table-column",{attrs:{prop:"leadername",label:"牵头区领导"}}):e._e(),e._v(" "),e.ishidden2?a("el-table-column",{attrs:{prop:"ldeptList",label:"牵头单位"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.ldeptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.deptName))])})}}])}):e._e(),e._v(" "),e.ishidden3?a("el-table-column",{attrs:{prop:"dutyDeptList",label:"责任单位"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dutyDeptList,function(t,s){return a("p",{key:s},[e._v(e._s(t.deptName))])})}}])}):e._e(),e._v(" "),e.ishidden4?a("el-table-column",{attrs:{prop:"progressList",label:"进展情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.progressList,function(t,s){return a("p",{key:s},[e._v(e._s(t.question))])})),e._v(" "),a("div",e._l(t.row.progressList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.question))])}))])],1)]}}])}):e._e(),e._v(" "),e.ishidden5?a("el-table-column",{attrs:{prop:"progressList",label:"存在问题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.progressList,function(t,s){return a("p",{key:s},[e._v(e._s(t.wenti))])})),e._v(" "),a("div",e._l(t.row.progressList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.wenti))])}))])],1)]}}])}):e._e(),e._v(" "),e.ishidden6?a("el-table-column",{attrs:{prop:"progressList",label:"解决措施"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{"max-width":"300px","line-height":"2"},attrs:{slot:"content"},slot:"content"},e._l(t.row.progressList,function(t,s){return a("p",{key:s},[e._v(e._s(t.measure))])})),e._v(" "),a("div",e._l(t.row.progressList,function(t,s){return a("p",{key:s,staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","text-align":"left"}},[e._v(e._s(t.measure))])}))])],1)]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"formstatus",label:"材料报送",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#fbe804"}}):2==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#f00"}}):-1==t.row.formstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.formstatusFormat(t,t.row.formstatus))}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalstatus",label:"总体进度",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEditShow?a("div",{staticClass:"flexbox"},[3==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):4==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#7c1d77"}}):-1==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("el-select",{staticClass:"stateSelect",on:{change:function(a){e.totalstateChange(t,t.row)}},model:{value:t.row.totalstatus,callback:function(a){e.$set(t.row,"totalstatus",a)},expression:"scope.row.totalstatus"}},e._l(e.totalStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.status,value:e.value}})}))],1):a("div",[3==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#364e98"}}):4==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#7c1d77"}}):-1==t.row.totalstatus?a("i",{staticClass:"fa mark",staticStyle:{background:"#999"}}):a("i",{staticClass:"fa mark"}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.totalstatusFormat(t,t.row.totalstatus))}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"edit",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDetail(t.$index,t.row,t.row.id)}}},[e._v("详情")]),e._v(" "),e.isEditShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEdit(t.$index,t.row,t.row.id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.isEditShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleDelete(t.$index,t.row,t.row.id)}}},[e._v("删除")]):e._e(),e._v(" "),e.isReportShow?a("el-button",{staticClass:"btn",on:{click:function(a){e.handleEvolve(t.$index,t.row)}}},[e._v("进展填报")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":e.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:e.totals},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"选择下载格式",visible:e.downTypeVisible,width:"400px"},on:{"update:visible":function(t){e.downTypeVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-radio-group",{model:{value:e.downType,callback:function(t){e.downType=t},expression:"downType"}},[a("el-radio",{attrs:{label:1}},[e._v("Excel")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"56px"},attrs:{label:2}},[e._v("Word")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.downDatalist}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"import-data-box"},[a("import-file",{attrs:{importdataVisible:e.importdataVisible,showYearbox:e.showYearbox,importFileList:e.importKeyItemList,itemShow:e.itemShow,upbtnDisabled:e.upbtnDisabled},on:{"update:importdataVisible":function(t){e.importdataVisible=t},"update:upbtnDisabled":function(t){e.upbtnDisabled=t},"getAllList-event":e.getThreePlan}})],1),e._v(" "),e.addShow?a("div",{staticClass:"project-box"},[a("addthree-work",{attrs:{deptlist:e.deptlist,leaderlist:e.leaderlist,addheight:e.addheight,yearid:e.yearid},on:{"my-event":e.handleBack,"add-event":e.getThreePlan}})],1):e._e(),e._v(" "),e.editShow?a("div",{staticClass:"project-box"},[a("editthree-work",{attrs:{deptlist:e.deptlist,basicInfo:e.basicInfo,addheight:e.addheight,leadsData:e.leadsData,dutysData:e.dutysData,ruleList:e.ruleList,upfile:e.upfile,imgIp:e.imgIp,workid:e.workid,leaderlist:e.leaderlist,newReportList:e.newReportList,years:e.years,lastprogress:e.lastprogress},on:{"my-event":e.handleBack,"add-event":e.getThreePlan}})],1):e._e(),e._v(" "),e.detailShow?a("div",{staticClass:"project-box"},[a("dthree-work",{attrs:{basicInfo:e.basicInfo,reportDetail:e.reportDetail,ruleList:e.ruleList,leadsData:e.leadsData,dutysData:e.dutysData,ddheight:e.ddheight,isEditShow:e.isEditShow,noEdit:e.noEdit,workid:e.workid,histableHeight:e.histableHeight,newReportList:e.newReportList,isCenter:e.isCenter,lastprogress:e.lastprogress},on:{"my-event":e.handleBack,"edit-event":e.toeditPage}})],1):e._e(),e._v(" "),a("div",{staticClass:"report-data-box"},[a("report-progress",{attrs:{reportVisible:e.reportVisible,reportData:e.reportData,laststate:e.laststate,itemShow:e.itemShow,workid:e.workid,reportBasic:e.reportBasic,fileList:e.fileList,fileArr:e.fileArr,isExport:e.isExport},on:{"update:reportVisible":function(t){e.reportVisible=t},"update:fileList":function(t){e.fileList=t},"update:fileArr":function(t){e.fileArr=t},"update:isExport":function(t){e.isExport=t},"getAllList-event":e.getThreePlan}})],1),e._v(" "),e.batchVisible?a("div",{staticClass:"batchrule-box"},[a("batch-rule",{attrs:{batchHeight:e.batchHeight,allitems:e.allitems,itemShow:e.itemShow},on:{"my-back":e.batchBack}})],1):e._e()],1)},staticRenderFns:[]};var Y={name:"threework",components:{keyWork:$,keyArea:A,keyItem:a("VU/8")(E,H,!1,function(e){a("3UwD")},null,null).exports},data:function(){return{tabitem:["重点工作情况推进","重要片区情况推进","重大项目情况"],activeClass:0,isWorkShow:!0,isWorkShow2:!1,isWorkShow3:!1}},created:function(){this.centerLink()},methods:{tabsClick:function(e){this.activeClass=e,0==e?(this.isWorkShow=!0,this.isWorkShow2=!1,this.isWorkShow3=!1):1==e?(this.isWorkShow=!1,this.isWorkShow3=!1,this.isWorkShow2=!0):(this.isWorkShow=!1,this.isWorkShow3=!0,this.isWorkShow2=!1)},centerLink:function(){void 0==this.$route.query.isWorkShow||void 0==this.$route.query.isWorkShow2||void 0==this.$route.query.isWorkShow3||void 0==this.$route.query.activeClass?(this.isWorkShow=!0,this.isWorkShow2=!1,this.isWorkShow3=!1,this.activeClass=0):(this.isWorkShow=this.$route.query.isWorkShow,this.isWorkShow2=this.$route.query.isWorkShow2,this.isWorkShow3=this.$route.query.isWorkShow3,this.activeClass=this.$route.query.activeClass)}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap working"},[a("div",{staticClass:"tabs"},e._l(e.tabitem,function(t,s){return a("a",{key:s,staticClass:"item",class:e.activeClass==s?"active":"",attrs:{href:"javascript:;"},on:{click:function(t){e.tabsClick(s)}}},[e._v(e._s(t))])})),e._v(" "),a("div",{staticClass:"workwrap"},[e.isWorkShow?a("div",{staticClass:"jobsharing"},[a("key-work")],1):e._e(),e._v(" "),e.isWorkShow2?a("div",{staticClass:"jobsharing"},[a("key-area")],1):e._e(),e._v(" "),e.isWorkShow3?a("div",{staticClass:"jobsharing"},[a("key-item")],1):e._e()])])},staticRenderFns:[]},K=a("VU/8")(Y,U,!1,null,null,null);t.default=K.exports},agoO:function(e,t){},hltz:function(e,t){},nbRt:function(e,t){},zPDu:function(e,t){}});
//# sourceMappingURL=4.59c772379c641898bd45.js.map